import{r as n,j as e}from"./index-Cd5tM5Cw.js";import{F as V,T as X,M as P,C as E,a as Q,b as y,S as Y,c as Z}from"./Toast-uop3fvrM.js";import{P as _,I as d,B as x,d as I,a as h,b as l,T as i,c as M}from"./Page-Bs3Yy5l8.js";import{T as $,L as o}from"./TitleBar-BcpaBvsu.js";import{C as g}from"./Card-Vxxgx_Dr.js";import{F as A}from"./FormLayout-DnJHHvdP.js";import"./context-DL2GIqZU.js";import"./context-D8WZWu7V.js";const B=[{id:"st1",brand:"PHONIC",title:"Smart Audio Glasses",image:"https://images.unsplash.com/photo-1556306535-38febf6782e7?w=330&h=400&fit=crop&crop=center&q=80",tag:"NEW LAUNCH",showTag:!0},{id:"st2",brand:"BLUECUT",title:"Blue Light Blockers",image:"https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=330&h=400&fit=crop&crop=center&q=80",tag:"FEATURED",showTag:!0},{id:"st3",brand:"LUXE",title:"Designer Collection",image:"https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=330&h=400&fit=crop&crop=center&q=80",tag:"PREMIUM",showTag:!0},{id:"st4",brand:"ACTIVE",title:"Performance Sunglasses",image:"https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=330&h=400&fit=crop&crop=center&q=80",tag:"SPORT",showTag:!0},{id:"st5",brand:"JUNIOR",title:"Kids Safety Glasses",image:"https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=330&h=400&fit=crop&crop=center&q=80",tag:"KIDS",showTag:!0}];function ce(){const[c,p]=n.useState(B),[S,f]=n.useState("As Seen on Shark Tank India"),[b,T]=n.useState("Style it like the Sharks!"),[j,k]=n.useState(!0),[w,N]=n.useState(0),[s,r]=n.useState(null),[D,u]=n.useState(!1),[L,m]=n.useState(!1),[R,v]=n.useState("");n.useEffect(()=>{U()},[]);const U=async()=>{try{const t=await fetch("/api/shark-tank-settings");if(t.ok){const a=await t.json();a.success&&a.data&&(p(a.data.products||B),f(a.data.title||"As Seen on Shark Tank India"),T(a.data.subtitle||"Style it like the Sharks!"),k(a.data.enabled!==!1))}}catch(t){console.error("Error loading shark tank settings:",t)}},F=async()=>{try{if((await fetch("/api/shark-tank-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:S,subtitle:b,enabled:j,products:c})})).ok)v("Shark Tank section settings saved successfully!"),m(!0);else throw new Error("Failed to save settings")}catch(t){console.error("Error saving shark tank settings:",t),v("Error saving settings. Please try again."),m(!0)}},q=t=>{r(t),u(!0)},O=()=>{const t={id:Date.now().toString(),brand:"NEW BRAND",title:"New Product",image:"https://images.unsplash.com/photo-1556306535-38febf6782e7?w=330&h=400&fit=crop&crop=center&q=80",tag:"NEW",showTag:!0};r(t),u(!0)},W=()=>{if(!s)return;const t=c.findIndex(a=>a.id===s.id);if(t>=0){const a=[...c];a[t]=s,p(a)}else p([...c,s]);u(!1),r(null)},z=t=>{p(c.filter(a=>a.id!==t))},C=()=>e.jsx(o,{children:e.jsx(o.Section,{children:e.jsx(g,{children:e.jsxs(l,{gap:"400",children:[e.jsxs(d,{align:"space-between",children:[e.jsx(i,{variant:"headingMd",as:"h2",children:"Shark Tank Products"}),e.jsx(x,{onClick:O,children:"Add Product"})]}),e.jsx(l,{gap:"300",children:c.map(t=>e.jsx(g,{padding:"300",children:e.jsxs(d,{align:"space-between",children:[e.jsxs(d,{gap:"300",children:[e.jsx(y,{source:t.image,alt:t.brand,size:"small"}),e.jsxs(l,{gap:"100",children:[e.jsx(i,{variant:"bodyMd",fontWeight:"semibold",as:"p",children:t.brand}),e.jsx(i,{variant:"bodySm",tone:"subdued",as:"p",children:t.title}),t.showTag&&e.jsx(I,{tone:"info",children:t.tag})]})]}),e.jsxs(d,{gap:"200",children:[e.jsx(x,{icon:Y,onClick:()=>q(t),children:"Edit"}),e.jsx(x,{icon:Z,variant:"primary",tone:"critical",onClick:()=>z(t.id),children:"Delete"})]})]})},t.id))})]})})})}),G=()=>e.jsx(o,{children:e.jsx(o.Section,{children:e.jsx(g,{children:e.jsxs(l,{gap:"400",children:[e.jsx(i,{variant:"headingMd",as:"h2",children:"Section Settings"}),e.jsxs(A,{children:[e.jsx(h,{label:"Section Title",value:S,onChange:f,placeholder:"Enter section title",autoComplete:"off"}),e.jsx(h,{label:"Section Subtitle",value:b,onChange:T,placeholder:"Enter section subtitle",autoComplete:"off"}),e.jsx(E,{label:"Enable Shark Tank Section",checked:j,onChange:k})]})]})})})}),H=()=>e.jsx(o,{children:e.jsx(o.Section,{children:e.jsx(g,{children:e.jsxs(l,{gap:"400",children:[e.jsx(i,{variant:"headingMd",as:"h2",children:"Section Preview"}),e.jsx(i,{variant:"bodyMd",as:"p",children:"Preview how the Shark Tank section will appear in the mobile app:"}),e.jsx(M,{background:"bg-surface-secondary",padding:"400",borderRadius:"200",children:e.jsxs(l,{gap:"300",children:[e.jsx(i,{variant:"headingLg",as:"h3",children:S}),e.jsx(i,{variant:"bodyMd",tone:"subdued",as:"p",children:b}),e.jsx(d,{gap:"200",children:c.slice(0,3).map(t=>e.jsx(M,{background:"bg-surface",padding:"200",borderRadius:"100",children:e.jsxs(l,{gap:"100",children:[e.jsx(y,{source:t.image,alt:t.brand,size:"small"}),e.jsx(i,{variant:"bodySm",fontWeight:"semibold",as:"p",children:t.brand}),e.jsx(i,{variant:"bodySm",tone:"subdued",as:"p",children:t.title})]})},t.id))})]})})]})})})}),J=[{id:"products",content:"Products"},{id:"settings",content:"Settings"},{id:"preview",content:"Preview"}],K=()=>{switch(w){case 0:return C();case 1:return G();case 2:return H();default:return C()}};return e.jsx(V,{children:e.jsxs(_,{title:"Shark Tank Section",children:[e.jsx($,{title:"Shark Tank Section Management"}),e.jsxs(o,{children:[e.jsx(o.Section,{children:e.jsx(g,{children:e.jsx(X,{tabs:J,selected:w,onSelect:N})})}),e.jsx(o.Section,{children:K()}),e.jsx(o.Section,{children:e.jsx(g,{children:e.jsxs(d,{align:"space-between",children:[e.jsx(x,{onClick:F,variant:"primary",children:"Save Settings"}),e.jsx(I,{tone:"info",children:j?"Enabled":"Disabled"})]})})})]}),e.jsx(P,{open:D,onClose:()=>u(!1),title:"Edit Product",primaryAction:{content:"Save",onAction:W},secondaryActions:[{content:"Cancel",onAction:()=>u(!1)}],children:e.jsx(P.Section,{children:s&&e.jsxs(A,{children:[e.jsx(h,{label:"Brand Name",value:s.brand,onChange:t=>r({...s,brand:t}),autoComplete:"off"}),e.jsx(h,{label:"Product Title",value:s.title,onChange:t=>r({...s,title:t}),autoComplete:"off"}),e.jsx(h,{label:"Image URL",value:s.image,onChange:t=>r({...s,image:t}),autoComplete:"off"}),e.jsx(h,{label:"Tag Text",value:s.tag,onChange:t=>r({...s,tag:t}),autoComplete:"off"}),e.jsx(E,{label:"Show Tag",checked:s.showTag,onChange:t=>r({...s,showTag:t})})]})})}),L&&e.jsx(Q,{content:R,onDismiss:()=>m(!1)})]})})}export{ce as default};
