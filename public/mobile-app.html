<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>GoEye Store</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: white;
            color: #333;
            line-height: 1.6;
            padding-bottom: 80px; /* Space for bottom navigation */
            padding-top: env(safe-area-inset-top, 20px); /* Safe area for system status bar with fallback */
        }

        /* Announcement Bar Styles */
        .announcement-bar {
            background: var(--announcement-background-color, #1E1B4B);
            color: var(--announcement-text-color, #ffffff);
            padding: 8px 0;
            text-align: center;
            font-size: 14px;
            font-weight: 500;
            position: relative;
            z-index: 21;
            overflow: hidden;
            width: 100%;
        }

        .announcement-content {
            position: relative;
            display: inline-block;
            animation: scrollText var(--announcement-scroll-speed, 5000ms) infinite linear;
        }

        .announcement-text {
            white-space: nowrap;
            display: inline-block;
        }

        @keyframes scrollText {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        @media screen and (min-width: 768px) {
            .announcement-bar {
                display: none;
            }
        }

        /* Custom Header - Advanced Liquid Template Based */
        .custom-header {
            position: sticky;
            top: 0;
            z-index: 20;
            width: 100%;
            overflow: visible;
            display: block;
            background: var(--header-background-color, #fff);
        }

        @media screen and (min-width: 768px) {
            .custom-header {
                display: none;
            }
        }

        /* Hide header and categories on product and collection pages */
        body.hide-header .custom-header,
        body.hide-header .categories-section,
        body.hide-header #sunglasses-categories-section,
        body.hide-header .shark-tank-section {
            display: none;
        }

        .custom-header-wrapper {
            padding: 1rem;
            margin-bottom: -16px;
        }

        .custom-header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .custom-header-left {
            flex: 1;
            display: flex;
            justify-content: flex-start;
            gap: 1rem;
            align-items: center;
        }

        .custom-header-center {
            flex: 1;
            display: flex;
            justify-content: center;
        }

        .custom-header-right {
            flex: 1;
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }

        .custom-header-logo {
            flex-shrink: 0;
        }

        .custom-header-logo img {
            height: auto;
            max-height: 50px;
            width: auto;
            max-width: 50px;
            margin: 0 auto;
        }

        .custom-header-search {
            width: 100%;
            position: relative;
            margin-bottom: 1px;
        }

        .custom-header-search input {
            width: 100%;
            padding: 10px 2.5rem 10px 1rem;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 14px;
            background: #f5f5f5;
        }

        .custom-header-search input::placeholder {
            opacity: 0;
        }

        .search-placeholder-text {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 14px;
            color: #666;
            pointer-events: none;
            white-space: nowrap;
            animation: cycleText 4s linear infinite;
            opacity: 0;
        }

        .search-placeholder-text:nth-child(2) {
            animation-delay: 2s;
        }

        @keyframes cycleText {
            0%, 45% {
                opacity: 0;
                transform: translateY(-50%) translateX(10px);
            }
            50%, 95% {
                opacity: 1;
                transform: translateY(-50%) translateX(0);
            }
            100% {
                opacity: 0;
                transform: translateY(-50%) translateX(-10px);
            }
        }

        .custom-header-search button {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #666;
            padding: 0;
            display: flex;
            align-items: center;
        }

        .custom-header-icons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .custom-header-icons a,
        .custom-header-icons button,
        .custom-header-left button,
        .custom-header-right a {
            position: relative;
            background: none;
            border: none;
            font-size: 20px;
            padding: 0;
            display: flex;
            align-items: center;
            color: var(--icon-color, #ffffff);
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .custom-header-icons a:hover,
        .custom-header-icons button:hover,
        .custom-header-left button:hover,
        .custom-header-right a:hover {
            color: var(--icon-hover-color, #1E1B4B);
        }

        .custom-header-nav {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .custom-header-nav::-webkit-scrollbar {
            display: none;
        }

        .nav-tabs {
            display: flex;
            gap: 0;
            margin: 0;
            list-style: none;
            white-space: nowrap;
            background: var(--nav-background-color, #fff);
        }

        .nav-tabs li {
            display: inline-block;
            position: relative;
        }

        .nav-tabs a {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 16px;
            text-decoration: none;
            color: var(--nav-text-color, #6B7280);
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            background: transparent;
            border: none;
            position: relative;
        }

        .nav-tabs a.active {
            color: var(--nav-active-color, #1E1B4B);
            font-weight: 600;
            background: var(--nav-active-background, transparent);
        }

        .nav-tabs a.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--nav-active-color, #1E1B4B);
            border-radius: 2px 2px 0 0;
        }

        .nav-tabs a:hover:not(.active) {
            color: var(--nav-hover-color, #1E1B4B);
        }

        .nav-indicator {
            position: absolute;
            width: 4px;
            height: 4px;
            background-color: var(--nav-indicator-color, #F97316);
            border-radius: 50%;
            top: 8px;
            right: 8px;
        }

        .nav-tab-icon {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-tab-icon svg {
            width: 18px;
            height: 18px;
            stroke: currentColor;
        }

        /* Offer Button Styles */
        .offer-button {
            background: linear-gradient(135deg, var(--offer-button-color, #FF6B6B) 0%, var(--offer-button-color-end, #FF8E8E) 100%);
            border: none;
            border-radius: 50px;
            padding: 5px 12px;
            font-size: 12px;
            font-weight: 600;
            color: white;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(255, 107, 107, 0.2);
            position: relative;
            overflow: hidden;
            text-decoration: none;
            white-space: nowrap;
            margin-left: 8px;
        }

        .offer-button:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .offer-button:hover:before {
            left: 100%;
        }

        .offer-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
        }

        .offer-button svg {
            width: 14px;
            height: 14px;
            stroke: white;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .offer-button.pulse {
            animation: pulse 2s infinite;
        }

        /* Menu Drawer */
        .menu-drawer {
            position: fixed;
            top: 0;
            left: 0;
            width: 85%;
            max-width: 360px;
            height: 100vh;
            background: var(--drawer-background, #fff);
            z-index: 1000;
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
        }

        body.menu-open .menu-drawer {
            transform: translateX(0);
        }

        .menu-drawer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease-in-out;
            z-index: 999;
        }

        body.menu-open .menu-drawer-overlay {
            opacity: 1;
            visibility: visible;
        }

        .menu-drawer-header {
            padding: 20px;
            border-bottom: 1px solid var(--drawer-border-color, #e5e7eb);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .menu-drawer-close {
            background: none;
            border: none;
            padding: 5px;
            color: var(--drawer-text-color, #1f2937);
            cursor: pointer;
        }

        .menu-drawer-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--drawer-text-color, #1f2937);
            margin: 0;
        }

        .gender-selector {
            display: flex;
            padding: 12px 16px;
            gap: 1px;
            background: var(--drawer-border-color, #e5e7eb);
        }

        .gender-tab {
            flex: 1;
            padding: 12px 8px;
            text-align: center;
            background: var(--drawer-background, #fff);
            border: none;
            color: var(--drawer-text-color, #1f2937);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .gender-tab:first-child {
            border-radius: 6px 0 0 6px;
        }

        .gender-tab:last-child {
            border-radius: 0 6px 6px 0;
        }

        .gender-tab.active {
            background: var(--drawer-active-background, #1f2937);
            color: white;
        }

        /* Trending Section */
        .trending-section {
            background: var(--trending-background, #f8f9fa);
            padding-bottom: 16px;
            margin-top: -16px;
        }

        .trending-header {
            display: flex;
            align-items: center;
            padding: 16px;
        }

        .trending-title {
            font-size: 18px;
            font-weight: 600;
            color: #1E1B4B;
            margin: 0;
        }

        .trending-title span {
            color: var(--nav-active-color, #1E1B4B);
        }

        .trending-slider {
            position: relative;
            overflow: hidden;
        }

        .trending-items {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            scrollbar-width: none;
            -webkit-overflow-scrolling: touch;
            padding: 0 16px;
            margin-left: 15px;
        }

        .trending-items::-webkit-scrollbar {
            display: none;
        }

        .trending-item:first-child {
            margin-left: 8px;
        }

        .trending-item {
            flex: 0 0 auto;
            width: 220px;
            height: 270px;
            scroll-snap-align: start;
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .trending-item img,
        .trending-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .trending-item-link {
            position: absolute;
            inset: 0;
            z-index: 1;
        }

        .trending-item-title {
            position: absolute;
            bottom: 12px;
            left: 12px;
            right: 12px;
            font-size: 14px;
            font-weight: 500;
            color: white;
            margin: 0;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
            z-index: 2;
        }

        /* Cart Count Bubble */
        .cart-count-bubble {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--cart-count-background, #EF4444);
            color: white;
            font-size: 10px;
            font-weight: 600;
            min-width: 16px;
            height: 16px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
            transform-origin: center;
            animation: cartBounce 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            line-height: 1;
            z-index: 1;
        }

        @keyframes cartBounce {
            0% { transform: scale(0); }
            80% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* Categories Section */
        .categories-section {
            padding: 0 0px;
            margin: 0 0 12px 0;
        }

        .category-block {
            margin-bottom: 0px;
        }

        .category-header {
            margin-bottom: 12px;
        }

        .category-title {
            font-size: 18px;
            font-weight: 600;
            color: #02003D;
            margin: 0 0 12px 16px;
            display: flex;
            align-items: center;
        }

        .subcategories {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0px;
            padding: 0 16px;
        }

        .subcategory-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: inherit;
            
            border-radius: 12px;
            background: white;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
        }

        .subcategory-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .subcategory-image {
            width: 85px;
            height: 85px;
            border-radius: 10%;
            overflow: hidden;
            margin-bottom: 8px;
            border: 2px solid #f0f0f0;
        }

        .subcategory-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .subcategory-title {
            font-size: 12px;
            font-weight: 500;
            color: #02003D;
            text-align: center;
        }



        /* Category Drawer Styles */
        .category-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 998;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .category-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .category-drawer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 75vh;
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 24px 24px 0 0;
            z-index: 999;
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            overflow: hidden;
            box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.12);
            backdrop-filter: blur(10px);
        }

        .category-drawer.active {
            transform: translateY(0);
        }

        .drawer-header {
            padding: 24px 20px;
            border-bottom: 1px solid #e8ecf0;
            background: #000000;
            position: sticky;
            top: 0;
            z-index: 10;
            backdrop-filter: blur(20px);
        }

        .drawer-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .drawer-title span {
            font-size: 22px;
            font-weight: 700;
            color: white;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .close-drawer {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            padding: 12px;
            cursor: pointer;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            color: white;
            width: 44px;
            height: 44px;
        }

        .close-drawer:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .drawer-content {
            padding: 20px;
            height: calc(70vh - 80px);
            overflow-y: auto;
        }

        .category-product-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
            padding: 20px;
            max-height: calc(75vh - 100px);
            overflow-y: auto;
        }

        .category-product-grid.show-all {
            /* Keep same layout */
        }





        .category-product-card {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: inherit;
            background: white;
            border-radius: 12px;
            padding: 16px;
            border: 1px solid #e8ecf0;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            position: relative;
            overflow: hidden;
        }

        .category-product-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }

        .category-product-card::before {
            display: none;
        }

        .category-product-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            overflow: hidden;
            margin-right: 16px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            flex-shrink: 0;
        }

        .category-product-image::after {
            display: none;
        }

        .category-product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .category-product-card:hover .category-product-image img {
            transform: scale(1.05);
        }

        .category-product-info {
            display: flex;
            flex-direction: column;
            gap: 6px;
            flex: 1;
            position: relative;
        }

        .category-product-brand {
            font-size: 16px;
            font-weight: 600;
            color: #1a1a1a;
            line-height: 1.3;
            margin-bottom: 4px;
        }

        .category-product-price {
            font-size: 18px;
            font-weight: 700;
            color: #1a1a1a;
            margin: 2px 0;
        }

        .category-product-offer {
            font-size: 14px;
            color: #667eea;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .category-product-offer::before {
            content: '✓';
            background: #667eea;
            color: white;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }

        .category-product-card::after {
            content: '›';
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            color: #9ca3af;
            font-weight: 300;
        }

        .category-product-badge {
            position: absolute;
            top: 8px;
            left: 8px;
            background: #1a1a1a;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .category-product-badge.premium {
            background: #fbbf24;
            color: #1a1a1a;
        }

        .category-product-badge.shark-tank {
            background: #ef4444;
            color: white;
        }

        /* Sale banner styles */
        .sale-banner {
            background: #dc2626; /* fallback color */
            color: white;
            text-align: center;
            padding: 15px 0;
            margin: 0;
            position: sticky;
            top: 0;
            width: 100vw;
            margin-left: calc(-50vw + 50%);
            z-index: 1001;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            border: none;
            overflow: visible;
            display: block !important;
            visibility: visible !important;
        }
        
        /* Ensure dynamic background color always applies */
        .sale-banner[style] {
            background: inherit !important;
        }

        .sale-banner .sale-text-1 {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
            opacity: 0.9;
        }

        .sale-banner .sale-text-2 {
            font-size: 24px;
            font-weight: 800;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        /* Shark Tank Section */
        .shark-tank-section {
            padding: 0 16px;
            margin: 0 0 12px 0;
        }

        .section-header {
            margin-bottom: 12px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #02003D;
            margin: 0;
            display: flex;
            align-items: center;
        }

        .section-subtitle {
            font-size: 12px;
            color: #666B7A;
            margin: 2px 0 0;
            font-weight: 500;
        }

        .shark-tank-slider {
            position: relative;
            margin: 0 -16px;
            padding: 0 16px 8px;
        }

        .shark-tank-slider__track {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scroll-snap-type: x mandatory;
            padding: 0 0 8px;
        }

        .shark-tank-slider__track::-webkit-scrollbar {
            display: none;
        }

        .shark-tank-slide {
            flex: 0 0 calc(30% - 6px);
            scroll-snap-align: start;
        }

        .shark-tank-card {
            position: relative;
            width: 200px;
            height: 250px;
            border-radius: 12px;
            overflow: hidden;
            aspect-ratio: 1/1;
            background: #000;
        }

        .shark-tank-card__media {
            width: 100%;
            height: 100%;
        }

        .shark-tank-card__media img,
        .shark-tank-card__media video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .shark-tank-card__overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0) 50%, rgba(0,0,0,0.7) 100%);
        }

        .shark-tank-card__tag {
            position: absolute;
            top: 16px;
            left: 16px;
            background: #00FF47;
            padding: 4px 12px;
            border-radius: 4px;
            color: #000;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .shark-tank-card__content {
            position: absolute;
            bottom: 16px;
            left: 16px;
            right: 16px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .shark-tank-card__brand {
            color: #fff;
            font-size: 24px;
            font-weight: 600;
            margin: 0;
            text-transform: uppercase;
        }

        .shark-tank-card__brand.phonic {
            font-family: 'SF Pro Display', -apple-system, sans-serif;
            color: #4AFF73;
            letter-spacing: -0.5px;
        }

        .shark-tank-card__title {
            color: rgba(255,255,255,0.9);
            font-size: 16px;
            font-weight: 500;
            margin: 0;
        }

        .shark-tank-card__button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #fff;
            font-size: 14px;
            font-weight: 500;
            text-decoration: none;
        }

        .shark-tank-card__button svg {
            width: 16px;
            height: 16px;
            margin-left: -4px;
            fill: currentColor;
        }

        /* New Drops Section Styles */
        .new-drops-section {
            padding: 0 16px;
            margin-bottom: 16px;
            margin-top: -8px;
            background: #FFFFFF;
            max-width: 800px;
            margin: 0 auto;
        }

        .new-drops-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            margin-top: 15px;
        }

        .new-drops-title {
            font-size: 18px;
            font-weight: 600;
            color: #141C57;
            margin: 0;
            padding: 0;
        }

        .new-drops-subtitle {
            font-size: 13px;
            color: #666666;
            margin: 4px 0 12px;
            line-height: 1.4;
            opacity: 0.85;
        }

        .banner-card {
            border-radius: 24px;
            overflow: hidden;
            position: relative;
            text-decoration: none;
            display: block;
            background: #000000;
        }

        .banner-slideshow {
            position: relative;
            width: 100%;
            margin: 0;
            overflow: hidden;
        }

        .banner-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
            text-decoration: none;
            display: block;
        }

        .banner-slide.active {
            opacity: 1;
            visibility: visible;
            position: relative;
        }

        .banner-image {
            width: 100%;
            aspect-ratio: 358/480;
            object-fit: cover;
            display: block;
        }

        .banner-progress-container {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            padding: 24px 16px;
            z-index: 2;
        }

        .progress-dash {
            width: 24px;
            height: 2px;
            background: rgba(255, 255, 255, 0.5);
            transition: background-color 0.3s ease;
            box-shadow: 0 0 1px 1px rgba(0, 0, 0, 0.3);
        }

        .progress-dash.active {
            background: #FFFFFF;
            box-shadow: 0 0 1px 1px rgba(0, 0, 0, 0.5);
        }

        .banner-image-container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .banner-logo {
            position: absolute;
            z-index: 2;
            border-radius: 4px;
            overflow: hidden;
            display: flex;
            align-items: center;
        }

        .banner-logo.position-top-left {
            top: 12px;
            left: 12px;
        }

        .banner-logo.position-top-center {
            top: 12px;
            left: 50%;
            transform: translateX(-50%);
        }

        .banner-logo.position-top-right {
            top: 12px;
            right: 12px;
        }

        .banner-logo.position-bottom-left {
            bottom: 12px;
            left: 12px;
        }

        .banner-logo.position-bottom-right {
            bottom: 12px;
            right: 12px;
        }

        .banner-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .logo-divider {
            margin: 0 8px;
            color: #FFFFFF;
            font-size: 20px;
            font-weight: 300;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .logo-container {
            position: absolute;
            top: 12px;
            left: 12px;
            right: 12px;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 8px;
        }

        .banner-content-overlay {
            position: absolute;
            bottom: 36px;
            left: 24px;
            right: 24px;
            z-index: 2;
            text-align: center;
        }

        .banner-slide-heading {
            font-size: 22px;
            font-weight: 700;
            color: #FFFFFF;
            margin: 0 0 8px;
            line-height: 1.2;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            text-align: center;
        }

        .banner-slide-subheading {
            font-size: 12px;
            color: #FFFFFF;
            line-height: 1.4;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            text-align: center;
        }

        .shop-now-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 6px 12px;
            background: #FFFFFF;
            color: #000000;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            transition: transform 0.2s ease, background 0.2s ease;
        }

        .shop-now-button:hover {
            transform: translateY(-2px);
            background: #F5F5F5;
        }

        /* Looks Section Styles */
        .looks-section {
            padding: 16px 0;
            background: #ffffff;
            margin: 16px 0;
        }

        .looks-header {
            margin-bottom: 16px;
            text-align: left;
            padding: 0 16px;
        }

        .looks-title {
            display: flex;
            align-items: center;
            gap: 4px;
            margin-bottom: 2px;
        }

        .looks-title-cursive {
            font-family: 'Satisfy', cursive;
            font-size: 28px;
            font-style: italic;
            color: #000;
        }

        .looks-title-bold {
           
            color: #000;
            padding: 3px 10px;
            border-radius: 6px;
            font-family: sans-serif;
            font-size: 20px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .looks-subtitle {
            font-size: 16px;
            color: #666B7E;
            margin: 0;
            font-weight: 400;
        }

        .looks-content {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .looks-row {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding: 4px 0;
            margin: 0 -16px;
        }

        .looks-row::-webkit-scrollbar {
            display: none;
        }

        .looks-grid {
            display: flex;
            gap: 8px;
            min-width: max-content;
            padding: 0 26px;
        }

        .looks-card {
            position: relative;
            border-radius: 28px;
            overflow: hidden;
            width: 100px;
            height: 120px;
            text-decoration: none;
            color: inherit;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
            scroll-snap-align: start;
            flex-shrink: 0;
        }

        .looks-card.explore {
            padding: 16px;
            text-align: left;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            padding-top: 20px;
            height: 120px;
            min-width: 100px;
        }

        .looks-card.explore.men {
            background: #F0F1FF;
        }

        .looks-card.explore.women {
            background: #FFF0F0;
        }

        .looks-explore-title {
            font-size: 24px;
            font-weight: 700;
            color: #1B224B;
            margin: 0 0 2px;
            line-height: 1;
            white-space: nowrap;
        }

        .looks-explore-subtitle {
            font-size: 13px;
            color: #1B224B;
            margin: 0;
            font-weight: 500;
            opacity: 0.8;
        }

        .looks-explore-arrow {
            width: 28px;
            height: 28px;
            background: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: auto;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .looks-card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: top center;
        }

        .looks-card-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 32px 12px 12px;
            color: #fff;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 100%);
        }

        .looks-card-title {
            font-size: 12px;
            font-weight: 900;
            margin: 0;
            text-align: center;
            line-height: 1.2;
        }

        /* Collections Section */
        .collections-section {
            padding: 0px;
            background: white;
        }

        .collections-title {
            font-size: 18px;
            font-weight: 600;
            color: #02003D;
            margin: 0 0 12px 16px;
            display: flex;
            align-items: center;
        }

        .collections-grid {
            display: flex;
            overflow-x: auto;
            scroll-behavior: smooth;
            gap: 16px;
            padding: 0 16px;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
        }

        .collections-grid::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        .collection-card {
            display: block;
            text-decoration: none;
            color: inherit;
            border-radius: 12px;
            overflow: hidden;
            background: white;
            transition: transform 0.2s ease;
            text-align: center;
            padding: 16px;
            min-width: 120px;
            flex-shrink: 0;
        }

        .collection-card:hover {
            transform: translateY(-2px);
        }

        .collection-image {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            overflow: hidden;
            margin: 0 auto 12px;
            border: 3px solid #f0f0f0;
        }

        .collection-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .collection-title {
            font-size: 16px;
            font-weight: 600;
            color: #02003D;
            margin: 0;
        }

        /* Products Section */
        .products-section {
            padding: 0px;
            background: white;
        }

        .products-title {
            font-size: 18px;
            font-weight: 600;
            color: #02003D;
            margin: 0 0 12px 16px;
            display: flex;
            align-items: center;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            padding: 0 16px;
        }

        @media (max-width: 320px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
        }

        .product-card {
            display: block;
            text-decoration: none;
            color: inherit;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.2s ease;
            border: 1px solid #f0f0f0;
        }

        .product-card:hover {
            transform: translateY(-2px);
        }

        .product-image {
            width: 100%;
            height: 200px;
            overflow: hidden;
            background: #f8f8f8;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-info {
            padding: 12px;
        }

        .product-title {
            font-size: 14px;
            font-weight: 600;
            color: #02003D;
            margin: 0 0 4px 0;
            line-height: 1.3;
        }

        .product-price {
            font-size: 16px;
            font-weight: 700;
            color: #007C89;
            margin: 4px 0;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #e5e5e5;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 12px 0 8px;
            z-index: 1000;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #666;
            transition: color 0.2s ease;
            cursor: pointer;
            position: relative;
        }

        .nav-item.active {
            color: #1E1B4B;
        }

        .nav-item:hover {
            color: #1E1B4B;
        }

        .nav-icon {
            width: 24px;
            height: 24px;
            margin-bottom: 4px;
            fill: currentColor;
        }

        .nav-label {
            font-size: 12px;
            font-weight: 500;
        }

        .cart-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            background: #ff4444;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 18px;
        }

        /* Cart Sidebar */
        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 998;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .cart-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .cart-sidebar {
            position: fixed;
            top: 0;
            right: 0;
            width: 350px;
            max-width: 90vw;
            height: 100%;
            background: white;
            z-index: 999;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .cart-sidebar.active {
            transform: translateX(0);
        }

        .cart-header {
            padding: 20px;
            border-bottom: 1px solid #e5e5e5;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-header h2 {
            margin: 0;
            font-size: 18px;
            color: #02003D;
        }

        .cart-close {
            background: none;
            border: none;
            padding: 8px;
            cursor: pointer;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-items {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .empty-cart {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        .cart-total {
            padding: 20px;
            border-top: 1px solid #e5e5e5;
            background: #f8f8f8;
        }

        .cart-total-amount {
            font-size: 18px;
            font-weight: 600;
            color: #02003D;
            margin-bottom: 16px;
        }

        .checkout-btn {
            width: 100%;
            padding: 16px;
            background: #1E1B4B;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .checkout-btn:hover {
            background: #2D2A5A;
        }

        /* Loading States */
        .loading {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        .loading::after {
            content: "";
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #1E1B4B;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive adjustments */
        @media (max-width: 375px) {
            .custom-header-wrapper {
                padding: 0.75rem;
            }
            
            .category-title,
            .collections-title,
            .products-title,
            .section-title {
                font-size: 18px;
                
                font-weight: 600;
            }
            
            .subcategories,
            .collections-grid,
            .products-grid {
                padding: 0 12px;
            }
            
            .product-title {
                font-size: 13px;
            }
            
            .product-price {
                font-size: 15px;
            }
        }

        @media (max-width: 320px) {
            .custom-header-wrapper {
                padding: 0.5rem;
            }
            
            .category-title,
            .collections-title,
            .products-title,
            .section-title {
                font-size: 15px;
                margin-left: 8px;
            }
            
            .subcategories,
            .collections-grid,
            .products-grid {
                padding: 0 8px;
                gap: 8px;
            }
            
            .product-title {
                font-size: 12px;
            }
            
            .product-price {
                font-size: 14px;
            }
            
            .nav-label {
                font-size: 11px;
            }
        }

        /* Image slider (hidden by default) */
        .image-slider {
            display: none;
        }

        /* Error handling */
        .error-message {
            text-align: center;
            padding: 20px;
            color: #ff4444;
            background: #fff5f5;
            border: 1px solid #ffebee;
            border-radius: 8px;
            margin: 16px;
        }

        /* Success message */
        .success-message {
            text-align: center;
            padding: 20px;
            color: #00aa44;
            background: #f0fff4;
            border: 1px solid #c6f6d5;
            border-radius: 8px;
            margin: 16px;
        }

        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 24px;
            border-radius: 24px;
            font-size: 14px;
            z-index: 10000;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        /* Hide elements when needed */
        .hidden {
            display: none !important;
        }

        /* Ensure proper spacing */
        .main-content {
            padding-bottom: 100px;
        }

        /* Smooth transitions */
        * {
            transition: color 0.2s ease, background-color 0.2s ease, transform 0.2s ease;
        }

        /* Fix any overflow issues */
        html, body {
            overflow-x: hidden;
        }

        /* Ensure grids are properly aligned */
        .products-grid,
        .collections-grid {
            align-items: start;
        }

        /* Make sure all clickable elements have proper touch targets */
        .nav-item,
        .product-card,
        .collection-card,
        .subcategory-card,
        .category-product-card,
        .shark-tank-card {
            min-height: 44px;
            min-width: 44px;
        }

        /* Improved focus states for accessibility */
        .nav-item:focus,
        .product-card:focus,
        .collection-card:focus,
        .subcategory-card:focus,
        .category-product-card:focus {
            outline: 2px solid #1E1B4B;
            outline-offset: 2px;
        }

        /* Ensure proper contrast */
        .product-title,
        .collection-title,
        .category-title,
        .products-title,
        .collections-title,
            .section-title {
            color: #02003D;
        }

        /* Fix any z-index issues */
        .bottom-nav {
            z-index: 1000;
        }

        .cart-sidebar {
            z-index: 1001;
        }

        .cart-overlay {
            z-index: 1000;
        }

        .category-drawer {
            z-index: 1001;
        }

        .category-overlay {
            z-index: 1000;
        }

        /* Responsive Design for Category Drawer */
        @media (max-width: 480px) {
            .category-drawer {
                height: 80vh;
            }
            
            .category-product-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
                padding: 20px 16px;
            }
            
            .drawer-header {
                padding: 20px 16px;
            }
            
            .drawer-title span {
                font-size: 20px;
            }
            
            .shark-tank-card {
                width: 160px;
                height: 200px;
            }
            
            .shark-tank-card__brand {
                font-size: 20px;
            }
            
            .shark-tank-card__title {
                font-size: 14px;
            }
        }

        @media (max-width: 360px) {
            .category-product-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .category-product-card {
                max-width: 280px;
                margin: 0 auto;
            }
        }
        /* Smooth Scrollbar for Category Drawer */
        .category-drawer::-webkit-scrollbar {
            width: 6px;
        }

        .category-drawer::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
        }

        .category-drawer::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 3px;
        }

        .category-drawer::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
        }

        .category-product-grid::-webkit-scrollbar {
            width: 4px;
        }

        .category-product-grid::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
        }

        .category-product-grid::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
        }

        /* Product Modal Styles */
        .product-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        .product-modal-content {
            background: white;
            border-radius: 16px;
            max-width: 400px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .product-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }

        .product-modal-header h2 {
            margin: 0;
            font-size: 18px;
            color: #333;
        }

        .close-button {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #999;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s ease;
        }

        .close-button:hover {
            background: #f0f0f0;
        }

        .product-modal-body {
            padding: 20px;
        }

        .product-modal-image {
            text-align: center;
            margin-bottom: 20px;
        }

        .product-modal-image img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .product-modal-info h3 {
            margin: 0 0 10px 0;
            font-size: 20px;
            color: #333;
        }

        .product-modal-price {
            font-size: 24px;
            font-weight: bold;
            color: #1E1B4B;
            margin: 10px 0;
        }

        .product-modal-offer {
            color: #666;
            margin: 10px 0 20px 0;
            font-size: 14px;
        }

        .add-to-cart-btn {
            background: #1E1B4B;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: background 0.2s ease;
        }

        .add-to-cart-btn:hover {
            background: #2D2A5B;
        }

        .add-to-cart-btn:active {
            transform: translateY(1px);
        }
    </style>
</head>
<body>
    <!-- Custom Header - Advanced Liquid Template Based -->
    <header class="custom-header" style="
      --header-background-color: #FFFFFF;
      --nav-background-color: #FFFFFF;
      --nav-text-color: #6B7280;
      --nav-active-color: #1E1B4B;
      --nav-hover-color: #1E1B4B;
      --nav-indicator-color: #F97316;
      --icon-color: #000000;
      --icon-hover-color: #1E1B4B;
      --drawer-background: #FFFFFF;
      --drawer-text-color: #1f2937;
      --drawer-border-color: #e5e7eb;
      --cart-count-background: #EF4444;
      --offer-button-color: #FF6B6B;
      --offer-button-color-end: #FF8E8E;">

      <!-- Menu Drawer -->
      <div class="menu-drawer">
        <div class="menu-drawer-header">
          <h2 class="menu-drawer-title">Menu</h2>
          <button type="button" class="menu-drawer-close" onclick="document.querySelector('body').classList.remove('menu-open')">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
            </button>
        </div>

        <div class="gender-selector">
          <button class="gender-tab active" data-gender="men">
            <span>Men</span>
          </button>
          <button class="gender-tab" data-gender="women">
            <span>Women</span>
          </button>
            </div>
      </div>
      <div class="menu-drawer-overlay" onclick="document.querySelector('body').classList.remove('menu-open')"></div>
      
      <!-- Announcement Bar -->
      <div class="announcement-bar" id="announcement-bar" style="display: block;">
        <div class="announcement-content">
          <span class="announcement-text" id="announcement-text">Free shipping on orders over $50! 🚚</span>
        </div>
      </div>
      
      <div class="custom-header-wrapper">
        <div class="custom-header-top">
          <div class="custom-header-left">
            <button type="button" onclick="document.querySelector('body').classList.toggle('menu-open')" title="Menu">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
            
            <a href="#" class="offer-button pulse">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7" />
              </svg>
              <span>50% OFF</span>
            </a>
        </div>
        
          <div class="custom-header-center">
            <div class="custom-header-logo">
              <img src="https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=100&h=50&fit=crop&q=80" alt="GoEye Logo" loading="lazy">
            </div>
          </div>

          <div class="custom-header-right">
            <a href="/pages/wishlist" title="Wishlist">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                </svg>
            </a>

            <a href="/account" title="Account">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
            </a>

            <a href="#" class="header-cart-link" title="Cart" onclick="toggleCart()">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
              </svg>
              <span class="cart-count-bubble" style="display: none;">0</span>
            </a>
            </div>
        </div>

        <div class="custom-header-search">
          <form action="/search" method="get">
            <input type="text" name="q" value="">
            <span class="search-placeholder-text">Search products...</span>
            <span class="search-placeholder-text">Free Cash on Delivery</span>
            <button type="submit">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z" />
                </svg>
            </button>
          </form>
        </div>

        <nav class="custom-header-nav">
          <ul class="nav-tabs" id="nav-tabs">
            <li>
              <a href="#" class="active">
                <span class="nav-tab-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                </svg>
                </span>
                All
              </a>
            </li>
            <li>
              <a href="#">
                <span class="nav-tab-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                </svg>
                </span>
                Classic
                <span class="nav-indicator"></span>
              </a>
            </li>
            <li>
              <a href="#">
                <span class="nav-tab-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                </svg>
                </span>
                Premium
              </a>
            </li>
          </ul>
        </nav>
      </div>

      <div class="trending-section" style="--trending-background: #f8f9fa;">
        <div class="trending-header">
          <h2 class="trending-title">#Trending On <span>GoEye</span></h2>
        </div>
        
        <div class="trending-slider">
          <div class="trending-items">
            <!-- Trending slides will be loaded dynamically from admin settings -->
          </div>
        </div>
      </div>
    </header>

    <!-- Product Categories Section -->
    <div class="categories-section" id="categories-section">
        <div class="category-block">
            <div class="category-header">
                <h2 class="category-title">Eyeglasses</h2>
            </div>
            
            <div class="subcategories">
                <a href="#" class="subcategory-card" data-category="men">
                    <div class="subcategory-image">
                        <img src="https://goeye.in/cdn/shop/files/men.jpg?v=1750675041" alt="Men Eyeglasses">
                    </div>
                    <div class="subcategory-title">Men</div>
                </a>
                
                <a href="#" class="subcategory-card" data-category="women">
                    <div class="subcategory-image">
                        <img src="https://goeye.in/cdn/shop/files/women.jpg?v=1750675041" alt="Women Eyeglasses">
                    </div>
                    <div class="subcategory-title">Women</div>
                </a>
                
                <a href="#" class="subcategory-card" data-category="kids">
                    <div class="subcategory-image">
                        <img src="https://goeye.in/cdn/shop/files/kid-1.jpg?v=1750675041" alt="Kids Eyeglasses">
                    </div>
                    <div class="subcategory-title">Kids</div>
                </a>
                
                <a href="#" class="subcategory-card essentials-card" data-category="essentials">
                    <div class="subcategory-image">
                        <img src="https://goeye.in/cdn/shop/files/kid_copy_2.jpg?v=1750675041" alt="Essentials Eyeglasses">
                    </div>
                    <div class="subcategory-title">Essentials</div>
                </a>
            </div>
        </div>
    </div>

    <!-- Overlay -->
    <div class="category-overlay" id="category-overlay"></div>

    <!-- Category Drawer -->
    <div class="category-drawer" id="category-drawer">
        <div class="drawer-header">
            <div class="drawer-title">
                <span id="drawer-category-title">Category Title</span>
                <button class="close-drawer" type="button" onclick="closeCategoryDrawer()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                </button>
            </div>
        </div>
        <div class="drawer-content">
            <!-- Men's Products -->
            <div class="category-product-grid" id="men-products" style="display: none;">
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=100&h=100&fit=crop&crop=center&q=80" alt="John Jacobs">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">John Jacobs</div>
                        <div class="category-product-price">Starts at ₹3500</div>
                        <div class="category-product-offer">Free lenses + Extra ₹333 Off</div>
                    </div>
                </a>
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=100&h=100&fit=crop&crop=center&q=80" alt="Vincent Chase">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">Vincent Chase</div>
                        <div class="category-product-price">Starts at ₹1500</div>
                        <div class="category-product-offer">Free lenses + Extra ₹333 Off</div>
                    </div>
                </a>
            </div>

            <!-- Women's Products -->
            <div class="category-product-grid" id="women-products" style="display: none;">
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=100&h=100&fit=crop&crop=center&q=80" alt="Vincent Chase">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">Vincent Chase</div>
                        <div class="category-product-price">Starts at ₹1500</div>
                        <div class="category-product-offer">Free lenses + Extra ₹333 Off</div>
                    </div>
                </a>
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=100&h=100&fit=crop&crop=center&q=80" alt="Lenskart Air">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">Lenskart Air</div>
                        <div class="category-product-price">Starts at ₹2000</div>
                        <div class="category-product-offer">Free lenses + Extra ₹333 Off</div>
                    </div>
                </a>
            </div>

            <!-- Kids' Products -->
            <div class="category-product-grid" id="kids-products" style="display: none;">
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=100&h=100&fit=crop&crop=center&q=80" alt="Hustlr">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">Hustlr</div>
                        <div class="category-product-price">Starts at ₹1500</div>
                        <div class="category-product-offer">Free lenses + Extra ₹333 Off</div>
                    </div>
                </a>
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1508296695146-257a814070b4?w=100&h=100&fit=crop&crop=center&q=80" alt="Kids Special">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">Kids Special</div>
                        <div class="category-product-price">Starts at ₹1200</div>
                        <div class="category-product-offer">Free lenses + Extra ₹333 Off</div>
                    </div>
                </a>
            </div>

            <!-- Essentials Products -->
            <div class="category-product-grid" id="essentials-products" style="display: none;">
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1508296695146-257a814070b4?w=100&h=100&fit=crop&crop=center&q=80" alt="Essentials">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">Essentials</div>
                        <div class="category-product-price">Starts at ₹800</div>
                        <div class="category-product-offer">60% Off + Free lenses</div>
                    </div>
                </a>
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=100&h=100&fit=crop&crop=center&q=80" alt="Budget Frames">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">Budget Frames</div>
                        <div class="category-product-price">Starts at ₹600</div>
                        <div class="category-product-offer">60% Off + Free lenses</div>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <!-- Sunglasses Categories Section -->
    <div class="categories-section" id="sunglasses-categories-section">
        <div class="category-block">
            <div class="category-header">
                <h2 class="category-title">Sunglasses</h2>
            </div>
            
            <div class="subcategories">
                <a href="#" class="subcategory-card" data-category="men-sunglasses">
                    <div class="subcategory-image">
                        <img src="https://goeye.in/cdn/shop/files/men_copy.jpg?v=1750675042" alt="Men Sunglasses">
                    </div>
                    <div class="subcategory-title">Men</div>
                </a>
                
                <a href="#" class="subcategory-card" data-category="women-sunglasses">
                    <div class="subcategory-image">
                        <img src="https://goeye.in/cdn/shop/files/women_copy_2.jpg?v=1750675041" alt="Women Sunglasses">
                    </div>
                    <div class="subcategory-title">Women</div>
                </a>
                
                <a href="#" class="subcategory-card" data-category="kids-sunglasses">
                    <div class="subcategory-image">
                        <img src="https://goeye.in/cdn/shop/files/kid.jpg?v=1750675041" alt="Kids Sunglasses">
                    </div>
                    <div class="subcategory-title">Kids</div>
                </a>
                
                <a href="#" class="subcategory-card essentials-card" data-category="essentials-sunglasses">
                    <div class="subcategory-image">
                        <img src="https://goeye.in/cdn/shop/files/kid_copy_3.jpg?v=1750675040" alt="Essentials Sunglasses">
                    </div>
                    <div class="subcategory-title">Essentials</div>
                </a>
            </div>
        </div>
    </div>

    <!-- Sunglasses Overlay -->
    <div class="category-overlay" id="sunglasses-category-overlay"></div>

    <!-- Sunglasses Category Drawer -->
    <div class="category-drawer" id="sunglasses-category-drawer">
        <div class="drawer-header">
            <div class="drawer-title">
                <span id="sunglasses-drawer-category-title">Category Title</span>
                <button class="close-drawer" type="button" onclick="closeSunglassesCategoryDrawer()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                </button>
            </div>
        </div>
        <div class="drawer-content">
            <!-- Men's Sunglasses Products -->
            <div class="category-product-grid" id="men-sunglasses-products" style="display: none;">
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=100&h=100&fit=crop&crop=center&q=80" alt="Ray-Ban">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">Ray-Ban</div>
                        <div class="category-product-price">Starts at ₹4500</div>
                        <div class="category-product-offer">Free case + Extra ₹500 Off</div>
                    </div>
                </a>
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1508296695146-257a814070b4?w=100&h=100&fit=crop&crop=center&q=80" alt="Oakley">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">Oakley</div>
                        <div class="category-product-price">Starts at ₹3200</div>
                        <div class="category-product-offer">Free case + Extra ₹500 Off</div>
                    </div>
                </a>
            </div>

            <!-- Women's Sunglasses Products -->
            <div class="category-product-grid" id="women-sunglasses-products" style="display: none;">
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1508296695146-257a814070b4?w=100&h=100&fit=crop&crop=center&q=80" alt="Vincent Chase">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">Vincent Chase</div>
                        <div class="category-product-price">Starts at ₹2500</div>
                        <div class="category-product-offer">Free case + Extra ₹500 Off</div>
                    </div>
                </a>
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=100&h=100&fit=crop&crop=center&q=80" alt="Lenskart Air">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">Lenskart Air</div>
                        <div class="category-product-price">Starts at ₹2800</div>
                        <div class="category-product-offer">Free case + Extra ₹500 Off</div>
                    </div>
                </a>
            </div>

            <!-- Kids' Sunglasses Products -->
            <div class="category-product-grid" id="kids-sunglasses-products" style="display: none;">
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=100&h=100&fit=crop&crop=center&q=80" alt="Kids Fun">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">Kids Fun</div>
                        <div class="category-product-price">Starts at ₹1800</div>
                        <div class="category-product-offer">Free case + Extra ₹400 Off</div>
                    </div>
                </a>
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1583394838336-acd977736f90?w=100&h=100&fit=crop&crop=center&q=80" alt="Junior Shades">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">Junior Shades</div>
                        <div class="category-product-price">Starts at ₹1500</div>
                        <div class="category-product-offer">Free case + Extra ₹400 Off</div>
                    </div>
                </a>
            </div>

            <!-- Essentials Sunglasses Products -->
            <div class="category-product-grid" id="essentials-sunglasses-products" style="display: none;">
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1583394838336-acd977736f90?w=100&h=100&fit=crop&crop=center&q=80" alt="Budget Sunglasses">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">Budget Sunglasses</div>
                        <div class="category-product-price">Starts at ₹1200</div>
                        <div class="category-product-offer">70% Off + Free case</div>
                    </div>
                </a>
                <a href="#" class="category-product-card">
                    <div class="category-product-image">
                        <img src="https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=100&h=100&fit=crop&crop=center&q=80" alt="Summer Shades">
                    </div>
                    <div class="category-product-info">
                        <div class="category-product-brand">Summer Shades</div>
                        <div class="category-product-price">Starts at ₹900</div>
                        <div class="category-product-offer">70% Off + Free case</div>
                    </div>
                </a>
            </div>
        </div>
    </div>

            <!-- Shark Tank Products Section -->
        <div class="shark-tank-section" id="shark-tank-section">
            <div class="section-header">
                <h2 class="section-title" id="shark-tank-title">As Seen on Shark Tank India</h2>
                <p class="section-subtitle" id="shark-tank-subtitle">Style it like the Sharks!</p>
            </div>
            
            <div class="shark-tank-slider">
                <div class="shark-tank-slider__track" id="shark-tank-track">
                    <!-- Dynamic Shark Tank products will be loaded here -->
                    <div class="loading">Loading Shark Tank products...</div>
                </div>
            </div>
        </div>

        <!-- Looks Section -->
        <div class="looks-section" id="looks-section">
            <div class="looks-header" id="looks-header">
                <h2 class="looks-title">
                    <span class="looks-title-cursive" id="looks-title-cursive">Style</span>
                    <strong class="looks-title-bold" id="looks-title-bold">FINDER</strong>
                </h2>
                <p class="looks-subtitle" id="looks-subtitle">Discover every look, for every you</p>
            </div>

            <div class="looks-content">
                <!-- Men's Row -->
                <div class="looks-row">
                    <div class="looks-grid" id="men-looks-grid">
                        <!-- Men's explore card and style cards will be loaded here -->
                        <div class="loading">Loading men's looks...</div>
                    </div>
                </div>

                <!-- Women's Row -->
                <div class="looks-row">
                    <div class="looks-grid" id="women-looks-grid">
                        <!-- Women's explore card and style cards will be loaded here -->
                        <div class="loading">Loading women's looks...</div>
                    </div>
                </div>
            </div>
        </div>

    <!-- Collections Section -->
    <div class="collections-section">
        <h2 class="collections-title">Collections</h2>
        <div class="collections-grid" id="collections-grid">
            <div class="loading">Loading collections...</div>
        </div>
    </div>

    <!-- Products Section -->
    <div class="products-section">
        <h2 class="products-title">Featured Products</h2>
        <div class="products-grid" id="products-grid">
            <div class="loading">Loading products...</div>
        </div>
    </div>

    <!-- Cart Sidebar -->
    <div class="cart-overlay" id="cart-overlay" onclick="toggleCart()"></div>
    <div class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header">
            <h2>Shopping Cart</h2>
            <button class="cart-close" onclick="toggleCart()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <line x1="18" y1="6" x2="6" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <line x1="6" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        <div class="cart-items" id="cart-items">
            <div class="empty-cart">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="opacity: 0.3; margin-bottom: 16px;">
                    <circle cx="9" cy="21" r="1" stroke="currentColor" stroke-width="2"/>
                    <circle cx="20" cy="21" r="1" stroke="currentColor" stroke-width="2"/>
                    <path d="M1 1H5L7.68 14.39A2 2 0 009.65 16H19.4A2 2 0 0021.36 14.39L23 6H6" stroke="currentColor" stroke-width="2"/>
                </svg>
                <p>Your cart is empty</p>
                <p style="font-size: 0.9em; opacity: 0.7;">Add some eyewear to get started</p>
            </div>
        </div>
        <div class="cart-total" id="cart-total" style="display: none;">
            <div class="cart-total-amount">Total: ₹<span id="total-amount">0</span></div>
            <button class="checkout-btn" onclick="checkout()">Proceed to Checkout</button>
        </div>
    </div>

    <!-- Image Slider -->
    <div class="image-slider" id="image-slider">
        <div class="slider-container">
            <div class="slider-track" id="slider-track">
                <!-- Slides will be generated by JavaScript -->
            </div>
            
            <!-- Navigation arrows -->
            <button class="slider-nav slider-prev" id="slider-prev" onclick="previousSlide()" style="display: none;">
                ‹
            </button>
            <button class="slider-nav slider-next" id="slider-next" onclick="nextSlide()" style="display: none;">
                ›
            </button>
            
            <!-- Dots indicator -->
            <div class="slider-dots" id="slider-dots" style="display: none;">
                <!-- Dots will be generated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- New Drops Section -->
    <div class="new-drops-section" id="new-drops-section">
        <div class="new-drops-header">
            <h2 class="new-drops-title" id="new-drops-title">New Drops</h2>
            <p class="new-drops-subtitle" id="new-drops-subtitle">Fresh collections every 15 days</p>
        </div>
        
        <div class="banner-card" id="banner-card">
            <div class="banner-slideshow" id="banner-slideshow">
                <!-- Slides will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="#" class="nav-item active" data-page="home" onclick="showPage('home')">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 9.5L12 3L21 9.5V20.5A1 1 0 0120 21.5H4A1 1 0 013 20.5V9.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <polyline points="9,22 9,12 15,12 15,22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="nav-label">Home</span>
        </a>
        <a href="#" class="nav-item" data-page="collections" onclick="showPage('collections')">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                <rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                <rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                <rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
            </svg>
            <span class="nav-label">Collections</span>
        </a>
        <a href="#" class="nav-item" data-page="cart" onclick="toggleCart()">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="9" cy="21" r="1" stroke="currentColor" stroke-width="2"/>
                <circle cx="20" cy="21" r="1" stroke="currentColor" stroke-width="2"/>
                <path d="M1 1H5L7.68 14.39A2 2 0 009.65 16H19.4A2 2 0 0021.36 14.39L23 6H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="nav-label">Cart</span>
            <span class="cart-badge" id="cart-badge" style="display: none;">0</span>
        </a>
        <a href="#" class="nav-item" data-page="account" onclick="showPage('account')">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 21V19A4 4 0 0016 15H8A4 4 0 004 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
            </svg>
            <span class="nav-label">Account</span>
        </a>
    </nav>

    <script>
        // Global variables
        let currentView = 'home';
        let collections = [];
        let products = [];
        let cart = [];
        let sliderSettings = {
            enabled: false,
            slides: [],
            autoPlay: false,
            autoPlaySpeed: 5000,
            showArrows: false,
            showDots: false
        };

        // API Configuration - Updated Vercel URL for APK
        const API_BASE = 'https://app-banao-fboiv57y7-voyageeyewears-projects.vercel.app';
        const STOREFRONT_ACCESS_TOKEN = 'your-storefront-access-token';
        const SHOP_DOMAIN = 'your-shop.myshopify.com';
        
        // Debug API_BASE
        console.log('API_BASE:', API_BASE);
        console.log('Protocol:', window.location.protocol);
        console.log('Location origin:', window.location.origin);

        // Utility Functions
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.style.cssText = `
                position: fixed;
                bottom: 100px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 12px 24px;
                border-radius: 24px;
                font-size: 14px;
                z-index: 10000;
                animation: slideUp 0.3s ease;
                backdrop-filter: blur(10px);
                box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            `;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            // Remove toast after 3 seconds
            setTimeout(() => {
                toast.style.animation = 'slideUp 0.3s ease';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }


        // Category Drawer Functions
        function openCategoryDrawer(category) {
            console.log('Opening eyeglass category drawer for:', category);
            const drawer = document.getElementById('category-drawer');
            const overlay = document.getElementById('category-overlay');
            const categoryTitle = document.getElementById('drawer-category-title');
            
            if (!drawer || !overlay || !categoryTitle) {
                console.error('Missing drawer elements');
                return;
            }
            
            // Hide all product grids
            drawer.querySelectorAll('.category-product-grid').forEach(function(grid) {
                grid.style.display = 'none';
            });
            
            // Show the selected category's products
            const gridId = category + '-products';
            const productGrid = document.getElementById(gridId);
            console.log('Looking for grid:', gridId, 'Found:', !!productGrid);
            
            if (productGrid) {
                // If we have global products data, dynamically populate the grid
                if (window.eyeglassProducts && window.eyeglassProducts.length > 0) {
                    const categoryProducts = window.eyeglassProducts.filter(product => 
                        product.category === category || 
                        product.category === category.toLowerCase() ||
                        product.id.includes(category)
                    );
                    
                    if (categoryProducts.length > 0) {
                        const initialProducts = categoryProducts.slice(0, 2);
                        const remainingProducts = categoryProducts.slice(2);
                        
                        // Add dynamic sale banner using helper function
                        let productHTML = createSaleBannerHTML(window.eyeglassesSaleBanner, '#d32f2f');
                        
                        // Add initial products
                        productHTML += initialProducts.map((product, index) => {
                            const getBadge = (product, index) => {
                                if (product.brand?.toLowerCase().includes('premium') || index === 0) {
                                    return '<div class="category-product-badge premium">PREMIUM</div>';
                                }
                                if (product.brand?.toLowerCase().includes('shark') || index === 2) {
                                    return '<div class="category-product-badge shark-tank">AS SEEN ON SHARK TANK</div>';
                                }
                                return '';
                            };
                            
                            return `
                                <a href="#" class="category-product-card">
                                    <div class="category-product-image">
                                        ${getBadge(product, index)}
                                        <img src="${product.image || 'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=100&h=100&fit=crop'}" alt="${product.brand || product.title}">
                                    </div>
                                    <div class="category-product-info">
                                        <div class="category-product-brand">${product.brand || product.title}</div>
                                        <div class="category-product-price">Starts at ₹${product.price}</div>
                                        <div class="category-product-offer">${product.offer || 'with premium designs'}</div>
                                    </div>
                                </a>
                            `;
                        }).join('');
                        
                        // Add hidden products
                        if (remainingProducts.length > 0) {
                            productHTML += remainingProducts.map((product, index) => {
                                const getBadge = (product, index) => {
                                    const actualIndex = index + 2; // Offset by initial products
                                    if (product.brand?.toLowerCase().includes('premium') || actualIndex === 0) {
                                        return '<div class="category-product-badge premium">PREMIUM</div>';
                                    }
                                    if (product.brand?.toLowerCase().includes('shark') || actualIndex === 2) {
                                        return '<div class="category-product-badge shark-tank">AS SEEN ON SHARK TANK</div>';
                                    }
                                    return '';
                                };
                                
                                return `
                                    <a href="#" class="category-product-card hidden-product" style="display: none;">
                                        <div class="category-product-image">
                                            ${getBadge(product, index)}
                                            <img src="${product.image || 'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=100&h=100&fit=crop'}" alt="${product.brand || product.title}">
                                        </div>
                                        <div class="category-product-info">
                                            <div class="category-product-brand">${product.brand || product.title}</div>
                                            <div class="category-product-price">Starts at ₹${product.price}</div>
                                            <div class="category-product-offer">${product.offer || 'with premium designs'}</div>
                                        </div>
                                    </a>
                                `;
                            }).join('');
                            
                            // Show all products directly - no "View More" button needed
                        }
                        
                        productGrid.innerHTML = productHTML;
                        console.log(`✅ Dynamically loaded ${categoryProducts.length} products for ${category}`);
                    }
                }
                
                productGrid.style.display = 'flex';
            }
            
            // Set category title
            categoryTitle.textContent = category.charAt(0).toUpperCase() + category.slice(1);
            
            // Show drawer and overlay
            drawer.classList.add('active');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Add sale banner using new system
            setTimeout(() => {
                showBannerInDrawer(category, 'eyeglasses');
            }, 100);
            
            console.log('✅ Eyeglass drawer opened for:', category);
        }

        function closeCategoryDrawer() {
            const drawer = document.getElementById('category-drawer');
            const overlay = document.getElementById('category-overlay');
            
            drawer.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Sunglasses Category Drawer Functions
        function openSunglassesCategoryDrawer(category) {
            console.log('Opening sunglasses category drawer for:', category);
            const drawer = document.getElementById('sunglasses-category-drawer');
            const overlay = document.getElementById('sunglasses-category-overlay');
            const categoryTitle = document.getElementById('sunglasses-drawer-category-title');
            
            if (!drawer || !overlay || !categoryTitle) {
                console.error('Missing sunglasses drawer elements');
                return;
            }
            
            // Hide all product grids
            drawer.querySelectorAll('.category-product-grid').forEach(function(grid) {
                grid.style.display = 'none';
            });
            
            // Show the selected category's products
            const gridId = category + '-products';
            const productGrid = document.getElementById(gridId);
            console.log('Looking for sunglasses grid:', gridId, 'Found:', !!productGrid);
            
            if (productGrid) {
                // If we have global products data, dynamically populate the grid
                if (window.sunglassProducts && window.sunglassProducts.length > 0) {
                    const categoryProducts = window.sunglassProducts.filter(product => 
                        product.category === category || 
                        product.category === category.toLowerCase() ||
                        product.id.includes(category)
                    );
                    
                    if (categoryProducts.length > 0) {
                        // Add dynamic sale banner using helper function
                        let productHTML = createSaleBannerHTML(window.sunglassesSaleBanner, '#ff6b35');
                        
                        // Add all products
                        productHTML += categoryProducts.map((product, index) => {
                            const getBadge = (product, index) => {
                                if (product.brand?.toLowerCase().includes('premium') || index === 0) {
                                    return '<div class="category-product-badge premium">PREMIUM</div>';
                                }
                                if (product.brand?.toLowerCase().includes('shark') || index === 2) {
                                    return '<div class="category-product-badge shark-tank">AS SEEN ON SHARK TANK</div>';
                                }
                                return '';
                            };
                            
                            const getOffer = (product, index) => {
                                const offers = [
                                    'with premium designs',
                                    'with 100% UV protection', 
                                    'with flexible material',
                                    '60% Off | limited range'
                                ];
                                return offers[index] || product.offer || 'with premium designs';
                            };
                            
                            return `
                                <a href="#" class="category-product-card">
                                    <div class="category-product-image">
                                        ${getBadge(product, index)}
                                        <img src="${product.image || 'https://images.unsplash.com/photo-1556306535-38febf6782e7?w=100&h=100&fit=crop'}" alt="${product.brand || product.title}">
                                    </div>
                                    <div class="category-product-info">
                                        <div class="category-product-brand">${product.brand || product.title}</div>
                                        <div class="category-product-price">Starts at ₹${product.price}</div>
                                        <div class="category-product-offer">${getOffer(product, index)}</div>
                                    </div>
                                </a>
                            `;
                        }).join('');
                        
                        productGrid.innerHTML = productHTML;
                        console.log(`✅ Dynamically loaded ${categoryProducts.length} sunglasses products for ${category}`);
                    }
                }
                
                productGrid.style.display = 'flex';
            }
            
            // Set category title
            const categoryName = category.replace('-sunglasses', '');
            categoryTitle.textContent = categoryName.charAt(0).toUpperCase() + categoryName.slice(1) + ' Sunglasses';
            
            // Show drawer and overlay
            drawer.classList.add('active');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Add sale banner using new system
            setTimeout(() => {
                showBannerInDrawer(category, 'sunglasses');
            }, 100);
            
            console.log('✅ Sunglasses drawer opened for:', category);
        }

        function closeSunglassesCategoryDrawer() {
            const drawer = document.getElementById('sunglasses-category-drawer');
            const overlay = document.getElementById('sunglasses-category-overlay');
            
            drawer.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        }



        // Initialize Category Section with Robust Event Delegation
        function initializeCategorySection() {
            console.log('🔧 Initializing category section...');
            
            const overlay = document.getElementById('category-overlay');
            const sunglassesOverlay = document.getElementById('sunglasses-category-overlay');
            
            // Close drawer when overlay is clicked
            if (overlay) {
                overlay.addEventListener('click', closeCategoryDrawer);
                console.log('✅ Eyeglasses overlay event listener added');
            } else {
                console.error('❌ Eyeglasses overlay not found');
            }
            
            if (sunglassesOverlay) {
                sunglassesOverlay.addEventListener('click', closeSunglassesCategoryDrawer);
                console.log('✅ Sunglasses overlay event listener added');
            } else {
                console.error('❌ Sunglasses overlay not found');
            }
            
            // Remove any existing event listeners to prevent duplicates
            document.body.removeEventListener('click', handleCategoryClick);
            
            // Add fresh event listener with proper delegation
            document.body.addEventListener('click', handleCategoryClick);
            
            console.log('✅ Category section initialized with event delegation for', document.querySelectorAll('.subcategory-card').length, 'cards');
        }

        // Separate click handler function for better debugging
        function handleCategoryClick(e) {
            // Check if clicked element or its parent is a subcategory card
            const subcategoryCard = e.target.closest('.subcategory-card');
            
            if (subcategoryCard) {
                e.preventDefault();
                e.stopPropagation();
                
                const category = subcategoryCard.getAttribute('data-category');
                console.log('🔥 Category card clicked:', category);
                console.log('📍 Card element:', subcategoryCard);
                
                if (category) {
                    if (category.includes('sunglasses')) {
                        console.log('🕶️ Opening sunglasses drawer for:', category);
                        openSunglassesCategoryDrawer(category);
                    } else {
                        console.log('👓 Opening eyeglasses drawer for:', category);
                        openCategoryDrawer(category);
                    }
                } else {
                    console.error('⚠️ No category data found for clicked card');
                    console.log('Card HTML:', subcategoryCard.outerHTML);
                }
            }
        }

        // Initialize Sunglasses Category Section (handled by main initializeCategorySection)
        function initializeSunglassesCategorySection() {
            console.log('✅ Sunglasses category section initialized (handled by main function)');
        }

        // Initialize Shark Tank Section
        function initializeSharkTankSection() {
            console.log('🦈 Initializing Shark Tank section...');
            
            // Load shark tank data from API
            loadSharkTankData();
        }

        // Load Shark Tank data from live API
        async function loadSharkTankData(silent = false) {
            const sharkTankTrack = document.getElementById('shark-tank-track');
            const sharkTankTitle = document.getElementById('shark-tank-title');
            const sharkTankSubtitle = document.getElementById('shark-tank-subtitle');
            
            if (!sharkTankTrack) {
                console.log('⚠️ Shark Tank track element not found');
                return;
            }

            try {
                console.log(`🦈 Loading Shark Tank data from API... ${silent ? '(silent)' : ''}`);
                
                // Only show loading message if not silent refresh
                if (!silent) {
                sharkTankTrack.innerHTML = '<div class="loading">Loading Shark Tank products...</div>';
                }

                const endpoints = [
                    `${API_BASE}/api/live-shark-tank`,
                    'https://app-banao-er3xnzjwt-voyageeyewears-projects.vercel.app/api/live-shark-tank',
                    'https://app-banao-er3xnzjwt-voyageeyewears-projects.vercel.app/api/live-shark-tank',
                    'https://app-banao-er3xnzjwt-voyageeyewears-projects.vercel.app/api/live-shark-tank',
                    'https://app-banao-er3xnzjwt-voyageeyewears-projects.vercel.app/api/live-shark-tank',
                    'https://app-banao-er3xnzjwt-voyageeyewears-projects.vercel.app/api/live-shark-tank'
                ];

                let response = null;
                let lastError = null;

                for (const endpoint of endpoints) {
                    try {
                        console.log(`🦈 Trying endpoint: ${endpoint}`);
                        const res = await fetch(endpoint, {
                            method: 'GET',
                            headers: {
                                'Accept': 'application/json',
                                'Cache-Control': 'no-cache'
                            }
                        });

                        if (res.ok) {
                            response = res;
                            console.log(`✅ Shark Tank API connected: ${endpoint}`);
                            break;
                        } else {
                            console.log(`❌ Failed: ${endpoint} (${res.status})`);
                        }
                    } catch (error) {
                        console.log(`❌ Error with ${endpoint}:`, error.message);
                        lastError = error;
                    }
                }

                if (!response) {
                    throw new Error(lastError?.message || 'All API endpoints failed');
                }

                const data = await response.json();
                console.log('🦈 Shark Tank data received:', data);

                // Update titles if provided
                if (data.section?.title && sharkTankTitle) {
                    sharkTankTitle.textContent = data.section.title;
                }
                if (data.section?.subtitle && sharkTankSubtitle) {
                    sharkTankSubtitle.textContent = data.section.subtitle;
                }

                // Check if section should be hidden or disabled
                if (data.isHidden || !data.enabled) {
                    const sharkTankSection = document.getElementById('shark-tank-section');
                    if (sharkTankSection) {
                        sharkTankSection.style.display = 'none';
                    }
                    return;
                }

                // Render shark tank products
                if (data.section?.products && data.section.products.length > 0) {
                    renderSharkTankProducts(data.section.products);
                } else {
                    sharkTankTrack.innerHTML = '<div class="loading">No Shark Tank products available</div>';
                }

            } catch (error) {
                console.error('❌ Failed to load Shark Tank data:', error);
                
                // Only show error message if not silent refresh
                if (!silent) {
                sharkTankTrack.innerHTML = `
                    <div class="loading" style="color: #dc2626;">
                        Unable to load Shark Tank products
                        <br><button onclick="loadSharkTankData()" style="
                            margin-top: 10px; 
                            padding: 8px 16px; 
                            background: #667eea; 
                            color: white; 
                            border: none; 
                            border-radius: 6px; 
                            cursor: pointer;
                        ">Retry</button>
                    </div>
                `;
                }
            }
        }

        // Render Shark Tank products with video support
        function renderSharkTankProducts(products) {
            const sharkTankTrack = document.getElementById('shark-tank-track');
            
            if (!sharkTankTrack) return;

            const productsHTML = products.map(product => {
                // Determine media element (video or image)
                let mediaElement = '';
                if (product.video && product.video.trim()) {
                    // MP4 video with autoplay, loop, muted
                    mediaElement = `
                        <video 
                            src="${product.video}" 
                            autoplay 
                            loop 
                            muted 
                            playsinline
                            poster="${product.image || ''}"
                            style="
                                width: 100%; 
                                height: 100%; 
                                object-fit: cover;
                                object-position: center;
                            "
                            onloadstart="console.log('🎥 Video loading:', '${product.brand} - ${product.title}')"
                            onplay="console.log('▶️ Video playing:', '${product.brand} - ${product.title}')"
                            onerror="console.error('❌ Video error:', '${product.brand} - ${product.title}'); this.style.display='none'; this.nextElementSibling.style.display='block';"
                        ></video>
                        <img 
                            src="${product.image}" 
                            alt="${product.brand} - ${product.title}"
                            style="
                                width: 100%; 
                                height: 100%; 
                                object-fit: cover; 
                                object-position: center;
                                display: none;
                            "
                        />
                    `;
                } else {
                    // Regular image
                    mediaElement = `
                        <img 
                            src="${product.image}" 
                            alt="${product.brand} - ${product.title}"
                            style="
                                width: 100%; 
                                height: 100%; 
                                object-fit: cover; 
                                object-position: center;
                            "
                        />
                    `;
                }

                return `
                    <div class="shark-tank-slide">
                        <div class="shark-tank-card" onclick="handleSharkTankCardClick('${product.brand}', '${product.title}')">
                            <div class="shark-tank-card__media">
                                ${mediaElement}
                                <div class="shark-tank-card__overlay"></div>
                                ${product.showTag && product.tag ? `<span class="shark-tank-card__tag">${product.tag}</span>` : ''}
                                <div class="shark-tank-card__content">
                                    <h3 class="shark-tank-card__brand ${product.brand.toLowerCase()}">${product.brand}</h3>
                                    <p class="shark-tank-card__title">${product.title}</p>
                                    <div class="shark-tank-card__button">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            sharkTankTrack.innerHTML = productsHTML;

            // Initialize click handlers for new cards
            const sharkTankCards = document.querySelectorAll('.shark-tank-card');
            console.log(`✅ Rendered ${products.length} Shark Tank products with video support`);
        }

        // Handle Shark Tank card clicks
        function handleSharkTankCardClick(brand, title) {
            console.log('🦈 Shark Tank card clicked:', brand, '-', title);
            showToast(`${brand} - ${title}`);
        }

        // Initialize Looks Section
        function initializeLooksSection() {
            console.log('👗 Initializing Looks section...');
            loadLooksData();
        }

        // Load Looks data from live API
        async function loadLooksData(silent = false) {
            const menGrid = document.getElementById('men-looks-grid');
            const womenGrid = document.getElementById('women-looks-grid');
            const looksTitle = document.getElementById('looks-title-cursive');
            const looksBold = document.getElementById('looks-title-bold');
            const looksSubtitle = document.getElementById('looks-subtitle');
            
            console.log(`🔍 DEBUG: loadLooksData called with silent=${silent}`);
            console.log(`🔍 DEBUG: Elements found - menGrid:${!!menGrid}, womenGrid:${!!womenGrid}`);
            
            if (!menGrid || !womenGrid) {
                console.error('❌ CRITICAL: Looks grid elements not found!');
                return;
            }

            try {
                console.log(`👗 Loading Looks data from API... ${silent ? '(silent)' : ''}`);
                
                // ALWAYS show loading message for better debugging
                menGrid.innerHTML = '<div class="loading">Loading men\'s looks...</div>';
                womenGrid.innerHTML = '<div class="loading">Loading women\'s looks...</div>';

                const endpoints = [
                    `${API_BASE}/api/live-looks`,
                    'https://app-banao-er3xnzjwt-voyageeyewears-projects.vercel.app/api/live-looks',
                    'https://app-banao-er3xnzjwt-voyageeyewears-projects.vercel.app/api/live-looks'
                ];

                let response = null;
                let lastError = null;

                for (const endpoint of endpoints) {
                    try {
                        console.log(`👗 Trying endpoint: ${endpoint}`);
                        const res = await fetch(endpoint, {
                            method: 'GET',
                            headers: {
                                'Accept': 'application/json',
                                'Cache-Control': 'no-cache'
                            }
                        });

                        if (res.ok) {
                            response = res;
                            console.log(`✅ Looks API connected: ${endpoint}`);
                            break;
                        } else {
                            console.log(`❌ Failed: ${endpoint} (${res.status})`);
                        }
                    } catch (error) {
                        console.log(`❌ Error with ${endpoint}:`, error.message);
                        lastError = error;
                    }
                }

                if (!response) {
                    throw new Error(lastError?.message || 'All API endpoints failed');
                }

                const data = await response.json();
                console.log('🔍 DEBUG: Full API response:', JSON.stringify(data, null, 2));

                // Update titles if provided
                if (data.config?.title_cursive && looksTitle) {
                    looksTitle.textContent = data.config.title_cursive;
                }
                if (data.config?.title_bold && looksBold) {
                    looksBold.textContent = data.config.title_bold;
                }
                if (data.config?.subtitle && looksSubtitle) {
                    looksSubtitle.textContent = data.config.subtitle;
                }

                // Check if section should be hidden
                console.log(`🔍 DEBUG: Section enabled check - data.config?.enabled: ${data.config?.enabled}`);
                if (!data.enabled) {
                    console.error('❌ CRITICAL: Looks section is DISABLED in config!');
                    const looksSection = document.getElementById('looks-section');
                    if (looksSection) {
                        looksSection.style.display = 'none';
                    }
                    return;
                }

                // Render looks cards
                console.log(`🔍 DEBUG: Cards check - data.cards exists: ${!!data.cards}, length: ${data.cards?.length}`);
                if (data.cards && data.cards.length > 0) {
                    console.log('✅ RENDERING LOOKS CARDS');
                    renderLooksCards(data.cards, data.config);
                } else {
                    console.error('❌ CRITICAL: No cards available to render!');
                    menGrid.innerHTML = '<div class="loading">No men\'s looks available</div>';
                    womenGrid.innerHTML = '<div class="loading">No women\'s looks available</div>';
                }

            } catch (error) {
                console.error('❌ Failed to load Looks data:', error);
                
                if (!silent) {
                    menGrid.innerHTML = `
                        <div class="loading" style="color: #dc2626;">
                            Unable to load men's looks
                            <br><button onclick="loadLooksData()" style="
                                margin-top: 10px; padding: 8px 16px; background: #667eea; 
                                color: white; border: none; border-radius: 6px; cursor: pointer;
                            ">Retry</button>
                        </div>
                    `;
                    womenGrid.innerHTML = `
                        <div class="loading" style="color: #dc2626;">
                            Unable to load women's looks
                            <br><button onclick="loadLooksData()" style="
                                margin-top: 10px; padding: 8px 16px; background: #667eea; 
                                color: white; border: none; border-radius: 6px; cursor: pointer;
                            ">Retry</button>
                        </div>
                    `;
                }
            }
        }

        // Render Looks cards
        function renderLooksCards(cards, config) {
            console.log('🔍 DEBUG: renderLooksCards called with:', cards, config);
            
            const menGrid = document.getElementById('men-looks-grid');
            const womenGrid = document.getElementById('women-looks-grid');
            
            console.log(`🔍 DEBUG: Grid elements in render - menGrid:${!!menGrid}, womenGrid:${!!womenGrid}`);
            
            if (!menGrid || !womenGrid) {
                console.error('❌ CRITICAL: Grid elements not found in render function!');
                return;
            }

            // Filter cards by type
            const menCards = cards.filter(card => card.type === 'men_style' && card.enabled);
            const womenCards = cards.filter(card => card.type === 'women_style' && card.enabled);
            
            console.log(`🔍 DEBUG: Filtered cards - men: ${menCards.length}, women: ${womenCards.length}`);

            // Render men's section
            const menHTML = `
                <a href="${config.men_explore_link || '#'}" class="looks-card explore men">
                    <h3 class="looks-explore-title">${config.men_explore_title || 'Men'}</h3>
                    <p class="looks-explore-subtitle">${config.men_explore_subtitle || 'Explore All'}</p>
                    <div class="looks-explore-arrow">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M12 4L10.59 5.41L16.17 11H4V13H16.17L10.59 18.59L12 20L20 12L12 4Z" fill="#1B224B"/>
                        </svg>
                    </div>
                </a>
                ${menCards.map(card => `
                    <a href="${card.link || '#'}" class="looks-card" onclick="handleLooksCardClick('${card.title}')">
                        <img src="${card.image || 'https://via.placeholder.com/100x120'}" alt="${card.title}" class="looks-card-image" loading="lazy">
                        <div class="looks-card-overlay">
                            <h3 class="looks-card-title">${card.title}</h3>
                        </div>
                    </a>
                `).join('')}
            `;

            // Render women's section
            const womenHTML = `
                <a href="${config.women_explore_link || '#'}" class="looks-card explore women">
                    <h3 class="looks-explore-title">${config.women_explore_title || 'Women'}</h3>
                    <p class="looks-explore-subtitle">${config.women_explore_subtitle || 'Explore All'}</p>
                    <div class="looks-explore-arrow">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M12 4L10.59 5.41L16.17 11H4V13H16.17L10.59 18.59L12 20L20 12L12 4Z" fill="#1B224B"/>
                        </svg>
                    </div>
                </a>
                ${womenCards.map(card => `
                    <a href="${card.link || '#'}" class="looks-card" onclick="handleLooksCardClick('${card.title}')">
                        <img src="${card.image || 'https://via.placeholder.com/100x120'}" alt="${card.title}" class="looks-card-image" loading="lazy">
                        <div class="looks-card-overlay">
                            <h3 class="looks-card-title">${card.title}</h3>
                        </div>
                    </a>
                `).join('')}
            `;

            console.log('🔍 DEBUG: Setting HTML for grids...');
            console.log('🔍 DEBUG: Men HTML length:', menHTML.length);
            console.log('🔍 DEBUG: Women HTML length:', womenHTML.length);
            
            menGrid.innerHTML = menHTML;
            womenGrid.innerHTML = womenHTML;

            console.log(`✅ FINAL: Rendered ${menCards.length} men's looks and ${womenCards.length} women's looks`);
            console.log('🔍 DEBUG: Final grid contents - men:', menGrid.innerHTML.substring(0, 100));
            console.log('🔍 DEBUG: Final grid contents - women:', womenGrid.innerHTML.substring(0, 100));
        }

        // Handle Looks card clicks
        function handleLooksCardClick(title) {
            console.log('👗 Looks card clicked:', title);
            showToast(`${title} - Coming soon!`);
        }

        // Sale Banner Management - Place Inside Category Sections
        function updateGlobalSaleBanner() {
            console.log('🎯 Sale banner data updated - banners will show inside category sections');
            
            // Don't add global banners - they will be added inside category sections
            // This function just ensures the banner data is available globally
            
            if (window.eyeglassesSaleBanner && window.eyeglassesSaleBanner.enabled === true) {
                console.log('✅ Eyeglasses sale banner ready:', window.eyeglassesSaleBanner);
            }
            
            if (window.sunglassesSaleBanner && window.sunglassesSaleBanner.enabled === true) {
                console.log('✅ Sunglasses sale banner ready:', window.sunglassesSaleBanner);
            }
        }

        // Helper function to create sale banner HTML
        function createSaleBannerHTML(bannerData, defaultColor = '#d32f2f') {
            if (!bannerData || !bannerData.enabled || !bannerData.line1 || !bannerData.line2) {
                return '';
            }
            
            return `
                <div class="sale-banner" style="
                    background-color: ${bannerData.backgroundColor || defaultColor};
                    color: white;
                    text-align: center;
                    padding: 12px 0;
                    margin: 0;
                    position: relative;
                    overflow: hidden;
                    width: 100vw;
                    margin-left: calc(-50vw + 50%);
                    font-weight: bold;
                    font-size: 14px;
                    line-height: 1.2;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                ">
                    <div style="margin-bottom: 2px;">${bannerData.line1}</div>
                    <div>${bannerData.line2}</div>
                </div>
            `;
        }

        // Navigation Functions
        function showPage(page) {
            currentView = page;
            
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.page === page) {
                    item.classList.add('active');
                }
            });
            
            // Handle page-specific logic
            switch (page) {
                case 'home':
                    document.body.classList.remove('hide-header');
                    loadHomePage();
                    break;
                case 'collections':
                    document.body.classList.add('hide-header');
                    loadCollectionsPage();
                    break;
                case 'account':
                    document.body.classList.add('hide-header');
                    loadAccountPage();
                    break;
            }
        }

        function loadHomePage() {
            console.log('Loading home page...');
            // Home content is already loaded
        }

        function loadCollectionsPage() {
            console.log('Loading collections page...');
            // Show all collections
            if (collections.length > 0) {
                renderCollections(collections);
            }
        }

        function loadAccountPage() {
            console.log('Loading account page...');
            showToast('Account page - Coming soon!');
        }

        // Cart Functions
        function toggleCart() {
            const cartSidebar = document.getElementById('cart-sidebar');
            const cartOverlay = document.getElementById('cart-overlay');
            
            cartSidebar.classList.toggle('active');
            cartOverlay.classList.toggle('active');
            
            if (cartSidebar.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }

        function updateCartDisplay() {
            const cartBadge = document.getElementById('cart-badge');
            const cartItems = document.getElementById('cart-items');
            const cartTotal = document.getElementById('cart-total');
            
            if (cart.length === 0) {
                cartBadge.style.display = 'none';
                cartItems.innerHTML = `
                    <div class="empty-cart">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="opacity: 0.3; margin-bottom: 16px;">
                            <circle cx="9" cy="21" r="1" stroke="currentColor" stroke-width="2"/>
                            <circle cx="20" cy="21" r="1" stroke="currentColor" stroke-width="2"/>
                            <path d="M1 1H5L7.68 14.39A2 2 0 009.65 16H19.4A2 2 0 0021.36 14.39L23 6H6" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <p>Your cart is empty</p>
                        <p style="font-size: 0.9em; opacity: 0.7;">Add some eyewear to get started</p>
                    </div>
                `;
                cartTotal.style.display = 'none';
            } else {
                cartBadge.style.display = 'flex';
                cartBadge.textContent = cart.length;
            cartTotal.style.display = 'block';
                
                // Calculate total
                const total = cart.reduce((sum, item) => sum + (parseFloat(item.price) * item.quantity), 0);
                document.getElementById('total-amount').textContent = total.toFixed(2);
            }
        }

        function checkout() {
            showToast('Redirecting to checkout...');
            // Implement checkout logic
        }

        // Slider Functions (disabled by default)
        function loadSliderSettings() {
            console.log('🎠 Slider disabled - showing clean layout');
            return Promise.resolve();
        }

        // Menu Functions
        function toggleMenu() {
            showToast('Menu opened');
        }

        function openSearch() {
            showToast('Search opened');
        }

        // Data Loading Functions
        async function loadCollections(retryCount = 0) {
            const maxRetries = 3;
            const retryDelay = 2000; // 2 seconds
            
            try {
                console.log(`📚 Loading collections... (attempt ${retryCount + 1}/${maxRetries + 1})`);
                
                // Try multiple API endpoints in order of preference
                const endpoints = [
                    `${API_BASE}/api/mobile-products`,
                    `${API_BASE}/api/storefront-data?type=collections`,
                    `${API_BASE}/api/public-products?type=collections`
                ];
                
                for (const apiUrl of endpoints) {
                    try {
                        console.log(`🔄 Trying endpoint: ${apiUrl}`);
                        const controller = new AbortController();
                        const timeoutId = setTimeout(() => controller.abort(), 5000); // 5 second timeout
                        
                        const response = await fetch(apiUrl, {
                            signal: controller.signal
                        });
                        clearTimeout(timeoutId);
                        
                        console.log(`Collections API Response status: ${response.status}`);
                        
                        if (response.ok) {
                            const data = await response.json();
                            console.log('Collections API Data:', data);
                            
                            if (data.success && data.collections && data.collections.length > 0) {
                                collections = data.collections;
                                renderCollections(collections);
                                console.log(`✅ Loaded ${collections.length} real collections from ${apiUrl}`);
                                return;
                            }
                        }
                    } catch (endpointError) {
                        console.log(`⚠️ Endpoint ${apiUrl} failed:`, endpointError);
                        continue; // Try next endpoint
                    }
                }
                
                // If all endpoints fail, retry after delay
                if (retryCount < maxRetries) {
                    console.log(`🔄 All endpoints failed, retrying in ${retryDelay}ms...`);
                    setTimeout(() => loadCollections(retryCount + 1), retryDelay);
                    return;
                }
                
                // Show error message after all retries exhausted
                console.log('⚠️ All API attempts failed, showing error message');
                const collectionsGrid = document.getElementById('collections-grid');
                if (collectionsGrid) {
                    collectionsGrid.innerHTML = `
                        <div class="error-message" style="text-align: center; padding: 2rem; color: #666;">
                            <p>Unable to load collections</p>
                            <p style="font-size: 0.9em;">Please check your internet connection</p>
                            <button onclick="loadCollections(0)" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                Retry
                            </button>
                        </div>
                    `;
                }
                return;
                
                // DISABLED Fallback to static collections - real API data should be used
                console.log('⚠️ Skipping fallback collections - using real API data');
                /*
                collections = [
                    {
                        id: 'eyeglasses',
                        title: 'Eyeglasses',
                        image: 'https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=400&h=400&fit=crop',
                        handle: 'eyeglasses'
                    },
                    {
                        id: 'sunglasses',
                        title: 'Sunglasses',
                        image: 'https://images.unsplash.com/photo-1556306535-38febf6782e7?w=400&h=400&fit=crop',
                        handle: 'sunglasses'
                    },
                    {
                        id: 'blue-light',
                        title: 'Blue Light',
                        image: 'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=400&h=400&fit=crop',
                        handle: 'blue-light'
                    },
                    {
                        id: 'reading',
                        title: 'Reading Glasses',
                        image: 'https://images.unsplash.com/photo-1508296695146-257a814070b4?w=400&h=400&fit=crop',
                        handle: 'reading'
                    }
                ];
                
                renderCollections(collections);
                */
                console.log('✅ DISABLED default collections - using real API data');
                
            } catch (error) {
                console.error('❌ Error loading collections:', error);
                document.getElementById('collections-grid').innerHTML = `
                    <div class="error-message">
                        <p>Unable to load collections</p>
                        <p style="font-size: 0.9em; opacity: 0.7;">Please check your connection and try again</p>
                    </div>
                `;
            }
        }

        async function loadProducts(retryCount = 0) {
            const maxRetries = 3;
            const retryDelay = 2000; // 2 seconds
            
            try {
                console.log(`🛍️ Loading products... (attempt ${retryCount + 1}/${maxRetries + 1})`);
                
                // Try multiple API endpoints in order of preference
                const endpoints = [
                    `${API_BASE}/api/mobile-products`,
                    `${API_BASE}/api/storefront-data?type=products`,
                    `${API_BASE}/api/public-products?type=products`
                ];
                
                for (const apiUrl of endpoints) {
                    try {
                        console.log(`🔄 Trying endpoint: ${apiUrl}`);
                        const controller = new AbortController();
                        const timeoutId = setTimeout(() => controller.abort(), 5000); // 5 second timeout
                        
                        const response = await fetch(apiUrl, {
                            signal: controller.signal
                        });
                        clearTimeout(timeoutId);
                        
                        console.log(`Products API Response status: ${response.status}`);
                        
                        if (response.ok) {
                            const data = await response.json();
                            console.log('Products API Data:', data);
                            
                            if (data.success && data.products && data.products.length > 0) {
                                products = data.products;
                                renderProducts(products);
                                console.log(`✅ Loaded ${products.length} real products from ${apiUrl}`);
                    return;
                }
                        }
                    } catch (endpointError) {
                        console.log(`⚠️ Endpoint ${apiUrl} failed:`, endpointError);
                        continue; // Try next endpoint
                    }
                }
                
                // If all endpoints fail, retry after delay
                if (retryCount < maxRetries) {
                    console.log(`🔄 All endpoints failed, retrying in ${retryDelay}ms...`);
                    setTimeout(() => loadProducts(retryCount + 1), retryDelay);
                    return;
                }
                
                // Show error message after all retries exhausted
                console.log('⚠️ All API attempts failed, showing error message');
                const productsGrid = document.getElementById('products-grid');
                if (productsGrid) {
                    productsGrid.innerHTML = `
                        <div class="error-message" style="text-align: center; padding: 2rem; color: #666;">
                            <p>Unable to load products</p>
                            <p style="font-size: 0.9em;">Please check your internet connection</p>
                            <button onclick="loadProducts(0)" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                Retry
                            </button>
                        </div>
                    `;
                }
                return;
                
                // DISABLED Fallback to static products - real API data should be used
                console.log('⚠️ Skipping fallback products - using real API data');
                /*
                products = [
                        {
                            id: '1',
                        title: 'Classic Aviator Sunglasses',
                        price: '₹2,499',
                        image: 'https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=400&h=400&fit=crop',
                        handle: 'classic-aviator'
                        },
                        {
                            id: '2',
                        title: 'Modern Square Frames',
                        price: '₹1,899',
                        image: 'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=400&h=400&fit=crop',
                        handle: 'modern-square'
                    },
                    {
                        id: '3',
                        title: 'Vintage Round Glasses',
                        price: '₹1,699',
                        image: 'https://images.unsplash.com/photo-1556306535-38febf6782e7?w=400&h=400&fit=crop',
                        handle: 'vintage-round'
                    },
                    {
                        id: '4',
                        title: 'Blue Light Blockers',
                        price: '₹1,299',
                        image: 'https://images.unsplash.com/photo-1508296695146-257a814070b4?w=400&h=400&fit=crop',
                        handle: 'blue-light-blockers'
                    },
                    {
                        id: '5',
                        title: 'Designer Cat Eye',
                        price: '₹2,199',
                        image: 'https://images.unsplash.com/photo-1583394838336-acd977736f90?w=400&h=400&fit=crop',
                        handle: 'designer-cat-eye'
                    },
                    {
                        id: '6',
                        title: 'Sport Sunglasses',
                        price: '₹1,799',
                        image: 'https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=400&h=400&fit=crop',
                        handle: 'sport-sunglasses'
                    }
                ];
                
                renderProducts(products);
                */
                console.log('✅ DISABLED default products - using real API data');

            } catch (error) {
                console.error('❌ Error loading products:', error);
                document.getElementById('products-grid').innerHTML = `
                    <div class="error-message">
                        <p>Unable to load products</p>
                        <p style="font-size: 0.9em; opacity: 0.7;">Please check your connection and try again</p>
                    </div>
                `;
            }
        }

        // Live Eyeglasses Data Loading - DISABLED to prevent 500 errors
        async function loadLiveEyeglasses() {
            try {
                console.log('👓 Live eyeglasses loading disabled to prevent 500 errors');
                // API call disabled temporarily to fix 500 errors
                // const apiUrl = `${API_BASE}/api/live-eyeglasses`;
                return; // Skip API call
            } catch (apiError) {
                console.log('⚠️ Eyeglasses API failed:', apiError);
                // Keep existing hardcoded data as fallback
            }
        }

                // Live Sunglasses Data Loading - DISABLED to prevent 500 errors
        async function loadLiveSunglasses() {
            try {
                console.log('🕶️ Live sunglasses loading disabled to prevent 500 errors');
                // API call disabled temporarily to fix 500 errors
                // const apiUrl = `${API_BASE}/api/live-sunglasses`;
                return; // Skip API call
            } catch (apiError) {
                console.log('⚠️ Sunglasses API failed:', apiError);
                // Keep existing hardcoded data as fallback
            }
        }

        // Render Functions
        function renderCollections(collectionsData) {
            const collectionsGrid = document.getElementById('collections-grid');
            
            if (!collectionsData || collectionsData.length === 0) {
                collectionsGrid.innerHTML = `
                    <div class="empty-cart">
                        <p>No collections available</p>
                    </div>
                `;
                return;
            }
            
            collectionsGrid.innerHTML = collectionsData.map(collection => `
                <a href="#" class="collection-card" onclick="showCollection('${collection.handle}')">
                    <div class="collection-image">
                        <img src="${collection.image}" alt="${collection.title}" loading="lazy">
                    </div>
                    <h3 class="collection-title">${collection.title}</h3>
                </a>
            `).join('');
        }

        function renderProducts(productsData) {
            const productsGrid = document.getElementById('products-grid');
            
            if (!productsData || productsData.length === 0) {
                productsGrid.innerHTML = `
                    <div class="empty-cart">
                        <p>No products available</p>
                    </div>
                `;
                return;
            }
            
            productsGrid.innerHTML = productsData.map(product => `
                <a href="#" class="product-card" onclick="showProduct('${product.handle}')">
                    <div class="product-image">
                        <img src="${product.image}" alt="${product.title}" loading="lazy">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">${product.title}</h3>
                        <p class="product-price">${product.price}</p>
                    </div>
                </a>
            `).join('');
        }

        // Live Eyeglasses Render Function
        function renderLiveEyeglasses(data) {
            const categoriesSection = document.getElementById('categories-section');
            if (!categoriesSection) return;

            const categoryHeader = categoriesSection.querySelector('.category-title');
            if (categoryHeader && data.title) {
                categoryHeader.textContent = data.title;
            }

            const subcategoriesContainer = categoriesSection.querySelector('.subcategories');
            if (!subcategoriesContainer) return;

            if (!data.categories || data.categories.length === 0) {
                // Keep existing hardcoded categories as fallback
                return;
            }

            subcategoriesContainer.innerHTML = data.categories.map(category => `
                <a href="#" class="subcategory-card" data-category="${category.id}">
                    <div class="subcategory-image">
                        <img src="${category.image}" alt="${category.id}">
                    </div>
                    <div class="subcategory-title">${category.id.charAt(0).toUpperCase() + category.id.slice(1).replace(/-/g, ' ')}</div>
                </a>
            `).join('');

            // Update products for each category if products data is available
            if (data.products && data.products.length > 0) {
                // Store products globally for use in drawer
                window.eyeglassProducts = data.products;
            }
            
            // Store sale banner data globally
            if (data.saleBanner) {
                window.eyeglassesSaleBanner = data.saleBanner;
                updateGlobalSaleBanner(); // Update global banner immediately
                
                data.categories.forEach(category => {
                    const categoryProducts = data.products.filter(product => 
                        product.category === category.id || 
                        product.category === category.title?.toLowerCase() ||
                        product.id.includes(category.id)
                    );
                    
                    const productGrid = document.getElementById(`${category.id}-products`);
                    if (productGrid && categoryProducts.length > 0) {
                        productGrid.innerHTML = categoryProducts.map(product => `
                            <a href="#" class="category-product-card" onclick="handleProductClick('${product.id}', '${product.linkType || 'none'}', '${product.link || ''}', '${product.brand || product.title}', '${product.price}', '${product.image || ''}', '${product.offer || ''}')">
                                <div class="category-product-image">
                                    <img src="${product.image || product.image_url || 'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=100&h=100&fit=crop'}" alt="${product.brand || product.title}">
                                </div>
                                <div class="category-product-info">
                                    <div class="category-product-brand">${product.brand || product.title}</div>
                                    <div class="category-product-price">Starts at ₹${product.price}</div>
                                    <div class="category-product-offer">${product.offer || 'Free shipping'}</div>
                                </div>
                            </a>
                        `).join('');
                        console.log(`✅ Loaded ${categoryProducts.length} products for ${category.id}`);
                    }
                });
            }

            console.log(`✅ Rendered ${data.categories.length} eyeglasses categories`);
            
            // Re-initialize event handlers after dynamic content is loaded
            setTimeout(() => {
                initializeCategorySection();
                console.log('🔄 Re-initialized category section after eyeglasses render');
            }, 100);
        }

        // Live Sunglasses Render Function
        function renderLiveSunglasses(data) {
            const sunglassesSection = document.getElementById('sunglasses-categories-section');
            if (!sunglassesSection) return;

            const categoryHeader = sunglassesSection.querySelector('.category-title');
            if (categoryHeader && data.title) {
                categoryHeader.textContent = data.title;
            }

            const subcategoriesContainer = sunglassesSection.querySelector('.subcategories');
            if (!subcategoriesContainer) return;

            if (!data.categories || data.categories.length === 0) {
                // Keep existing hardcoded categories as fallback
                    return;
                }
                
            subcategoriesContainer.innerHTML = data.categories.map(category => `
                <a href="#" class="subcategory-card" data-category="${category.id}">
                    <div class="subcategory-image">
                        <img src="${category.image}" alt="${category.id}">
                    </div>
                    <div class="subcategory-title">${category.id.charAt(0).toUpperCase() + category.id.slice(1).replace(/-sunglasses/g, '').replace(/-/g, ' ')}</div>
                </a>
            `).join('');

            // Update products for each category if products data is available
            if (data.products && data.products.length > 0) {
                // Store products globally for use in drawer
                window.sunglassProducts = data.products;
            }
            
            // Store sale banner data globally
            if (data.saleBanner) {
                window.sunglassesSaleBanner = data.saleBanner;
                updateGlobalSaleBanner(); // Update global banner immediately
                
                data.categories.forEach(category => {
                    const categoryProducts = data.products.filter(product => 
                        product.category === category.id || 
                        product.category === category.title?.toLowerCase() ||
                        product.id.includes(category.id)
                    );
                    
                    const productGrid = document.getElementById(`${category.id}-products`);
                    if (productGrid && categoryProducts.length > 0) {
                        productGrid.innerHTML = categoryProducts.map(product => `
                            <a href="#" class="category-product-card" onclick="handleProductClick('${product.id}', '${product.linkType || 'none'}', '${product.link || ''}', '${product.brand || product.title}', '${product.price}', '${product.image || ''}', '${product.offer || ''}')">
                                <div class="category-product-image">
                                    <img src="${product.image || product.image_url || 'https://images.unsplash.com/photo-1556306535-38febf6782e7?w=100&h=100&fit=crop'}" alt="${product.brand || product.title}">
                                </div>
                                <div class="category-product-info">
                                    <div class="category-product-brand">${product.brand || product.title}</div>
                                    <div class="category-product-price">Starts at ₹${product.price}</div>
                                    <div class="category-product-offer">${product.offer || 'Free shipping'}</div>
                                </div>
                            </a>
                        `).join('');
                        console.log(`✅ Loaded ${categoryProducts.length} products for ${category.id}`);
                    }
                });
            }

            console.log(`✅ Rendered ${data.categories.length} sunglasses categories`);
            
            // Re-initialize event handlers after dynamic content is loaded
            setTimeout(() => {
                initializeCategorySection();
                console.log('🔄 Re-initialized category section after sunglasses render');
            }, 100);
        }

        // Product/Collection Navigation
        function showProduct(handle) {
            console.log('Showing product:', handle);
            document.body.classList.add('hide-header');
            showToast(`Opening ${handle}...`);
            // Implement product page navigation
        }

        function showCollection(handle) {
            console.log('Showing collection:', handle);
            document.body.classList.add('hide-header');
            showToast(`Opening ${handle} collection...`);
            // Implement collection page navigation
        }

        // Cart Functions
        function getShopifyCart() {
            try {
                return JSON.parse(localStorage.getItem('shopify-cart')) || null;
            } catch (e) {
                return null;
            }
        }

        function convertShopifyCartToLocal(shopifyCart) {
            if (!shopifyCart || !shopifyCart.items) return [];
            
            return shopifyCart.items.map(item => ({
                id: item.id,
                title: item.product_title,
                price: (item.price / 100).toFixed(2),
                quantity: item.quantity,
                image: item.image,
                variant_id: item.variant_id
            }));
        }

        async function validateShopifyCart() {
            const shopifyCart = getShopifyCart();
            if (!shopifyCart) return;
            
            try {
                const response = await fetch(`${API_BASE}/api/cart`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ action: 'validate', cart: shopifyCart })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success && data.cart) {
                        localStorage.setItem('shopify-cart', JSON.stringify(data.cart));
                        cart = convertShopifyCartToLocal(data.cart);
                        updateCartDisplay();
                    }
                }
            } catch (error) {
                console.error('Cart validation error:', error);
            }
        }

        // Load Header Settings for Icon Colors, Navigation, and Announcement Bar
        async function loadHeaderSettings() {
            try {
                console.log('🎨 Loading header settings for icon colors, navigation, and announcement bar...');
                const response = await fetch(`${API_BASE}/api/header-settings`);
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success && data.header) {
                        applyHeaderColors(data.header);
                        console.log('✅ Header colors applied successfully');
                    }
                    
                    // Load navigation items
                    if (data.nav_items) {
                        loadNavigationItems(data.nav_items);
                        console.log('✅ Navigation items loaded successfully');
                    }
                    
                    // Load announcement bar
                    if (data.announcement_bar) {
                        loadAnnouncementBar(data.announcement_bar);
                        console.log('✅ Announcement bar loaded successfully');
                    }
                }
            } catch (error) {
                console.log('⚠️ Header settings failed:', error);
                // Load default navigation items on error
                loadDefaultNavigationItems();
            }
        }

        // Load Navigation Items (replaces existing navigation)
        function loadNavigationItems(navItems) {
            const navTabs = document.getElementById('nav-tabs');
            if (!navTabs) return;

            console.log('🎯 Loading dynamic navigation items:', navItems);

            // Always replace if we have items from API
            if (navItems && navItems.length > 0) {
                console.log('📱 Replacing static navigation with dynamic items');
                navTabs.innerHTML = '';

                // Filter enabled items and sort by order
                const enabledItems = navItems.filter(item => item.enabled).sort((a, b) => a.order - b.order);

                if (enabledItems.length > 0) {
                    enabledItems.forEach((item, index) => {
                        const li = document.createElement('li');
                        const a = document.createElement('a');
                        
                        a.href = item.link || '#';
                        a.className = index === 0 ? 'active' : '';
                        
                        // Create icon span
                        const iconSpan = document.createElement('span');
                        iconSpan.className = 'nav-tab-icon';
                        
                        // Get appropriate icon for each tab
                        const iconSVG = getNavIcon(item.title.toLowerCase());
                        iconSpan.innerHTML = iconSVG;
                        
                        a.appendChild(iconSpan);
                        a.appendChild(document.createTextNode(' ' + item.title));
                        
                        // Add click event
                        a.addEventListener('click', function(e) {
                            e.preventDefault();
                            // Remove active class from all tabs
                            navTabs.querySelectorAll('a').forEach(tab => tab.classList.remove('active'));
                            // Add active class to clicked tab
                            a.classList.add('active');
                        });
                        
                        li.appendChild(a);
                        navTabs.appendChild(li);
                    });

                    console.log('✅ Dynamic navigation loaded successfully with', enabledItems.length, 'items');
            } else {
                    console.log('⚠️ No enabled dynamic items, keeping static navigation');
                }
            } else {
                console.log('⚠️ No dynamic items provided, keeping static navigation');
            }
        }

        // Load default navigation items if API fails
        function loadDefaultNavigationItems() {
            console.log('📍 Using default hardcoded navigation (API failed)');
            // Default navigation is already hardcoded in HTML, no need to replace it
        }

        // Get navigation icon SVG based on title
        function getNavIcon(title) {
            const icons = {
                'all': '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg>',
                'classic': '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" /></svg>',
                'premium': '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>',
                'default': '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>'
            };
            return icons[title] || icons['default'];
        }

        // Load Announcement Bar
        function loadAnnouncementBar(announcementData) {
            const announcementBar = document.getElementById('announcement-bar');
            const announcementText = document.getElementById('announcement-text');
            
            if (!announcementBar || !announcementText) return;

            if (announcementData.enabled) {
                // Set announcement text
                announcementText.textContent = announcementData.text || 'Free shipping on orders over $50! 🚚';
                
                // Set CSS variables for colors and animation speed
                const root = document.documentElement;
                root.style.setProperty('--announcement-background-color', announcementData.background_color || '#1E1B4B');
                root.style.setProperty('--announcement-text-color', announcementData.text_color || '#ffffff');
                root.style.setProperty('--announcement-scroll-speed', `${announcementData.scroll_speed || 5000}ms`);
                
                // Show announcement bar
                announcementBar.style.display = 'block';
            } else {
                // Hide announcement bar
                announcementBar.style.display = 'none';
            }
        }

        // Apply Header Colors to Icons
        function applyHeaderColors(settings) {
            const root = document.documentElement;
            
            // Set CSS custom properties for icon colors with proper fallbacks
            root.style.setProperty('--icon-color', settings.icon_color || '#ffffff');
            root.style.setProperty('--icon-hover-color', settings.icon_hover_color || '#ffffff');
            root.style.setProperty('--nav-text-color', settings.nav_text_color || '#6B7280');
            root.style.setProperty('--nav-active-color', settings.nav_active_color || '#1E1B4B');
            
            // Apply specific icon colors with fallbacks
            const menuButton = document.querySelector('.custom-header-left button[title="Menu"]');
            if (menuButton) {
                menuButton.style.color = settings.menu_icon_color || settings.icon_color || '#ffffff';
            }
            
            const cartIcon = document.querySelector('.header-cart-link');
            if (cartIcon) {
                cartIcon.style.color = settings.cart_icon_color || settings.icon_color || '#ffffff';
            }
            
            const wishlistIcon = document.querySelector('a[title="Wishlist"]');
            if (wishlistIcon) {
                wishlistIcon.style.color = settings.wishlist_icon_color || settings.icon_color || '#ffffff';
            }
            
            const accountIcon = document.querySelector('a[title="Account"]');
            if (accountIcon) {
                accountIcon.style.color = settings.account_icon_color || settings.icon_color || '#ffffff';
            }

            // Apply colors to search icon
            const searchIcon = document.querySelector('.custom-header-search button');
            if (searchIcon) {
                searchIcon.style.color = settings.icon_color || '#ffffff';
            }

            // Apply hover effects
            const allIcons = document.querySelectorAll('.custom-header-icons a, .custom-header-icons button, .custom-header-left button, .custom-header-right a');
            allIcons.forEach(icon => {
                icon.addEventListener('mouseenter', () => {
                    icon.style.color = settings.icon_hover_color || '#ffffff';
                });
                icon.addEventListener('mouseleave', () => {
                    // Reset to specific color or default
                    if (icon.title === 'Menu') {
                        icon.style.color = settings.menu_icon_color || settings.icon_color || '#ffffff';
                    } else if (icon.title === 'Cart') {
                        icon.style.color = settings.cart_icon_color || settings.icon_color || '#ffffff';
                    } else if (icon.title === 'Wishlist') {
                        icon.style.color = settings.wishlist_icon_color || settings.icon_color || '#ffffff';
                    } else if (icon.title === 'Account') {
                        icon.style.color = settings.account_icon_color || settings.icon_color || '#ffffff';
                    } else {
                        icon.style.color = settings.icon_color || '#ffffff';
                    }
                });
            });
            
            console.log('🎨 Applied header colors:', {
                icon_color: settings.icon_color || '#ffffff',
                cart_icon_color: settings.cart_icon_color || '#ffffff',
                menu_icon_color: settings.menu_icon_color || '#ffffff'
            });
        }

        // Auto-refresh Eyeglasses and Sunglasses with Image Preloading
        async function autoRefreshCategories() {
            let refreshCount = 0;
            const maxRefreshes = 3;
            const refreshInterval = 5000; // 5 seconds
            
            async function refreshCategorySections() {
                if (refreshCount >= maxRefreshes) return;
                
                try {
                    console.log(`🔄 Auto-refresh categories (${refreshCount + 1}/${maxRefreshes})`);
                    
                    // Refresh both sections in parallel
                    await Promise.all([
                        loadLiveEyeglasses(),
                        loadLiveSunglasses()
                    ]);
                    
                    // Preload category images
                    preloadCategoryImages();
                    
                    refreshCount++;
                    
                    if (refreshCount < maxRefreshes) {
                        setTimeout(refreshCategorySections, refreshInterval);
                    }
            } catch (error) {
                    console.log('⚠️ Auto-refresh failed:', error);
                }
            }
            
            // Start auto-refresh after initial load
            setTimeout(refreshCategorySections, 2000);
        }

        // Preload Category Images for Instant Display
        function preloadCategoryImages() {
            const imageUrls = [
                "https://goeye.in/cdn/shop/files/men.jpg",
                "https://goeye.in/cdn/shop/files/women.jpg", 
                "https://goeye.in/cdn/shop/files/kid-1.jpg",
                "https://goeye.in/cdn/shop/files/kid_copy_2.jpg",
                "https://goeye.in/cdn/shop/files/men_copy.jpg",
                "https://goeye.in/cdn/shop/files/women_copy_2.jpg",
                "https://goeye.in/cdn/shop/files/kid.jpg",
                "https://goeye.in/cdn/shop/files/kid_copy_3.jpg"
            ];
            
            imageUrls.forEach(url => {
                const img = new Image();
                img.src = url;
                console.log('🖼️ Preloaded:', url);
            });
        }

        // Initialize Collections Carousel Auto-Scroll
        function initializeCollectionsCarousel() {
            const collectionsGrid = document.getElementById('collections-grid');
            if (!collectionsGrid) return;
            
            let currentIndex = 0;
            const scrollInterval = 2000; // 2 seconds
            
            function autoScroll() {
                const cards = collectionsGrid.querySelectorAll('.collection-card');
                if (cards.length === 0) return;
                
                const cardWidth = cards[0].offsetWidth + 16; // card width + gap
                const maxScroll = collectionsGrid.scrollWidth - collectionsGrid.clientWidth;
                
                if (currentIndex >= cards.length) {
                    currentIndex = 0;
                    collectionsGrid.scrollTo({ left: 0, behavior: 'smooth' });
                } else {
                    const scrollLeft = currentIndex * cardWidth;
                    if (scrollLeft >= maxScroll) {
                        currentIndex = 0;
                        collectionsGrid.scrollTo({ left: 0, behavior: 'smooth' });
                    } else {
                        collectionsGrid.scrollTo({ left: scrollLeft, behavior: 'smooth' });
                    }
                }
                
                currentIndex++;
            }
            
            // Start auto-scroll
            const intervalId = setInterval(autoScroll, scrollInterval);
            
            // Pause auto-scroll on hover
            collectionsGrid.addEventListener('mouseenter', () => {
                clearInterval(intervalId);
            });
            
            // Resume auto-scroll when mouse leaves
            collectionsGrid.addEventListener('mouseleave', () => {
                setInterval(autoScroll, scrollInterval);
            });
            
            // Pause auto-scroll on touch
            collectionsGrid.addEventListener('touchstart', () => {
                clearInterval(intervalId);
            });
        }

        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('🚀 GoEye Store Mobile App Started');
            
            // Ensure we start on home page with header visible
            currentView = 'home';
            document.body.classList.remove('hide-header');
            
            // Initialize slider first (disabled)
            console.log('🎠 Slider disabled - showing clean layout');
            await loadSliderSettings();
            // Skip slider initialization since it's disabled
            
            // Initialize cart from localStorage
            const shopifyCart = getShopifyCart();
            if (shopifyCart) {
                cart = convertShopifyCartToLocal(shopifyCart);
                updateCartDisplay();
                console.log('🛒 Restored Shopify cart from localStorage');
            }
            
            // Validate cart on startup
            await validateShopifyCart();
            
            // Load collections and products in parallel
            await Promise.all([
                loadCollections(),
                loadProducts(),
                loadLiveEyeglasses(),
                loadLiveSunglasses()
            ]);
            
            // Initialize sections
            initializeSharkTankSection();
            initializeLooksSection();
            initializeNewDropsSection();
            
            // Initialize collections carousel auto-scroll
            initializeCollectionsCarousel();
            
            // Load header settings for icon colors
            await loadHeaderSettings();
            
            // Start auto-refresh for categories
            autoRefreshCategories();
            
            console.log('✅ App initialization complete');
            
            // Initialize new header functionality
            initializeCustomHeader();
            
            // Initialize advanced header features from liquid template
            initializeAdvancedHeader();
            
            // Initialize category section
            initializeCategorySection();
            
            // Initialize sunglasses category section
            initializeSunglassesCategorySection();
            
            // Initialize Shark Tank section
            initializeSharkTankSection();
        });

        // Custom Header JavaScript Functionality (from Liquid Template)
        function initializeCustomHeader() {
            // Gender tabs functionality
            const genderTabs = document.querySelectorAll('.gender-tab');
            genderTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs
                    genderTabs.forEach(t => t.classList.remove('active'));
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    const gender = this.dataset.gender;
                    console.log('Gender tab clicked:', gender);
                    showToast(`Filtering by: ${gender}`);
                });
            });
            
            console.log('✅ Custom header initialized');
        }

        // Advanced Header Functionality from Liquid Template
        function initializeAdvancedHeader() {
            // Menu drawer functionality
            const genderTabs = document.querySelectorAll('.gender-tab');
            
            // Navigation tabs functionality
            const navTabs = document.querySelectorAll('.nav-tabs a');
            navTabs.forEach(tab => {
                tab.addEventListener('click', function(e) {
                    e.preventDefault();
                    // Remove active class from all tabs
                    navTabs.forEach(t => t.classList.remove('active'));
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    const tabText = this.textContent.trim();
                    console.log('Navigation tab clicked:', tabText);
                    showToast(`Switched to: ${tabText}`);
                });
            });

            // Gender tabs in drawer
            genderTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs
                    genderTabs.forEach(t => t.classList.remove('active'));
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    const gender = this.dataset.gender;
                    console.log('Drawer gender tab clicked:', gender);
                    showToast(`Gender filter: ${gender}`);
                });
            });

            // Load trending slides from header settings
            loadTrendingSlides();

            // Cart refresh functionality
            function updateCartIcon(cart) {
                const cartCountBubble = document.querySelector('.cart-count-bubble');
                const cartCount = cart.item_count || 0;
                
                if (cartCount > 0) {
                    cartCountBubble.style.display = 'flex';
                    cartCountBubble.textContent = cartCount < 100 ? cartCount : '99+';
                } else {
                    cartCountBubble.style.display = 'none';
                }
            }

            // Function to fetch cart data
            async function fetchCartData() {
                try {
                    // For demo purposes, we'll use localStorage
                    const localCart = JSON.parse(localStorage.getItem('mobile-cart') || '[]');
                    updateCartIcon({ item_count: localCart.length });
                    return { item_count: localCart.length, items: localCart };
            } catch (error) {
                    console.error('Error fetching cart:', error);
                    return { item_count: 0, items: [] };
                }
            }

            // Listen for cart changes
            document.addEventListener('cart:refresh', function() {
                fetchCartData();
            });

            // Search functionality
            const searchForm = document.querySelector('.custom-header-search form');
            if (searchForm) {
                searchForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const searchTerm = this.querySelector('input').value;
                    if (searchTerm.trim()) {
                        console.log('Search for:', searchTerm);
                        showToast(`Searching for: ${searchTerm}`);
                    }
                });
            }

            // Start auto-refresh and focus refresh
            startAutoRefresh();
            setupFocusRefresh();

            // Initial cart fetch
            fetchCartData();
            
            console.log('✅ Advanced header initialized with auto-refresh capabilities');
            
            // Add double-tap to refresh functionality
            let lastTap = 0;
            const trendingTitle = document.querySelector('.trending-title');
            if (trendingTitle) {
                trendingTitle.addEventListener('click', function(e) {
                    const currentTime = new Date().getTime();
                    const tapLength = currentTime - lastTap;
                    if (tapLength < 500 && tapLength > 0) {
                        // Double tap detected on header title
                        refreshHeaderSettings();
                        e.preventDefault();
                    }
                    lastTap = currentTime;
                });
            }
        }

        // Load trending slides from header settings with cache busting
        async function loadTrendingSlides() {
            try {
                // Add cache busting parameter to always get fresh data
                const cacheBuster = Date.now();
                const response = await fetch(`${API_BASE}/api/header-settings?t=${cacheBuster}`);
                if (response.ok) {
                    const data = await response.json();
                    if (data.trending_slides && data.trending_slides.length > 0) {
                        updateTrendingSlides(data.trending_slides.filter(slide => slide.enabled));
            } else {
                        // Fallback to default slides if none found
                        updateTrendingSlides(getDefaultSlides());
                    }
                    if (data.header) {
                        updateHeaderSettings(data.header);
                    }
                    
                    console.log('🔄 Header settings refreshed from API');
                } else {
                    console.warn('Failed to load trending slides, using defaults');
                    updateTrendingSlides(getDefaultSlides());
                }
            } catch (error) {
                console.error('Error loading trending slides:', error);
                // Fallback to default slides on error
                updateTrendingSlides(getDefaultSlides());
            }
        }

        // Auto-refresh header settings every 15 seconds
        function startAutoRefresh() {
            setInterval(() => {
                console.log('🔄 Auto-refreshing header settings...');
                loadTrendingSlides();
                loadHeaderSettings(); // Also refresh navigation and announcement bar
                loadCollections(0); // Auto-refresh collections
                loadProducts(0); // Auto-refresh products
                loadSharkTankData(true); // Auto-refresh Shark Tank section (silent)
            }, 15000); // 15 seconds
        }

        // Refresh when app comes back into focus
        function setupFocusRefresh() {
            let isHidden = false;
            
            document.addEventListener('visibilitychange', function() {
                if (document.hidden) {
                    isHidden = true;
                } else if (isHidden) {
                    // App came back into focus, refresh settings
                    console.log('🔄 App focus restored, refreshing all data...');
                    loadTrendingSlides();
                    loadHeaderSettings(); // Also refresh navigation and announcement bar
                    loadCollections(0); // Refresh collections
                    loadProducts(0); // Refresh products
                    loadSharkTankData(true); // Refresh Shark Tank section (silent)
                    loadLooksData(true); // Refresh Looks section (silent)
                loadNewDropsData(true); // Refresh New Drops section (silent)
                    isHidden = false;
                }
            });
        }

        // Manual refresh function (you can trigger this with a gesture)
        function refreshHeaderSettings() {
            console.log('🔄 Manual refresh triggered');
            loadTrendingSlides();
            loadHeaderSettings(); // Also refresh navigation and announcement bar
            loadSharkTankData(true); // Refresh Shark Tank section (silent)
            loadLooksData(true); // Refresh Looks section (silent)
            loadNewDropsData(true); // Refresh New Drops section (silent)
            loadCollections(0); // Refresh collections
            loadProducts(0); // Refresh products
        }

        // Default slides as fallback
        function getDefaultSlides() {
            return [
                {
                    id: "1",
                    title: "Premium Eyeglasses",
                    image_url: "https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=440&h=540&fit=crop&crop=center&q=80",
                    link_url: "/collections/eyeglasses",
                    enabled: true,
                    order: 1,
                },
                {
                    id: "2",
                    title: "Blue Light Blockers",
                    image_url: "https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=440&h=540&fit=crop&crop=center&q=80",
                    link_url: "/collections/blue-light",
                    enabled: true,
                    order: 2,
                },
                {
                    id: "3",
                    title: "Designer Sunglasses",
                    image_url: "https://images.unsplash.com/photo-1556306535-38febf6782e7?w=440&h=540&fit=crop&crop=center&q=80",
                    link_url: "/collections/sunglasses",
                    enabled: true,
                    order: 3,
                },
                {
                    id: "4",
                    title: "Reading Glasses",
                    image_url: "https://images.unsplash.com/photo-1508296695146-257a814070b4?w=440&h=540&fit=crop&crop=center&q=80",
                    link_url: "/collections/reading",
                    enabled: true,
                    order: 4,
                },
                {
                    id: "5",
                    title: "Sports Eyewear",
                    image_url: "https://images.unsplash.com/photo-1583394838336-acd977736f90?w=440&h=540&fit=crop&crop=center&q=80",
                    link_url: "/collections/sports",
                    enabled: true,
                    order: 5,
                },
            ];
        }

        // Update trending slides in the UI
        function updateTrendingSlides(slides) {
            const trendingContainer = document.querySelector('.trending-items');
            if (!trendingContainer || slides.length === 0) return;

            trendingContainer.innerHTML = '';

            slides.sort((a, b) => a.order - b.order).forEach(slide => {
                const slideElement = document.createElement('div');
                slideElement.className = 'trending-item';
                slideElement.innerHTML = `
                    <a href="${slide.link_url || '#'}" class="trending-item-link"></a>
                    <img 
                        src="${slide.image_url}" 
                        alt="${slide.title}"
                        loading="lazy"
                        width="220"
                        height="270"
                        onerror="this.src='https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=440&h=540&fit=crop&q=80'"
                    >
                    <h3 class="trending-item-title">${slide.title}</h3>
                `;

                // Add click handler
                slideElement.addEventListener('click', function() {
                    console.log('Trending item clicked:', slide.title);
                    showToast(`Viewing: ${slide.title}`);
                    if (slide.link_url && slide.link_url !== '#') {
                        window.location.href = slide.link_url;
                    }
                });

                trendingContainer.appendChild(slideElement);
            });
        }

        // Update header settings
        function updateHeaderSettings(settings) {
            // Update trending title and subtitle
            const trendingTitle = document.querySelector('.trending-title');
            if (trendingTitle && settings.trending_title && settings.trending_subtitle) {
                trendingTitle.innerHTML = `${settings.trending_title} <span>${settings.trending_subtitle}</span>`;
            }

            // Update logo if provided
            const logo = document.querySelector('.custom-header-logo img');
            if (logo && settings.logo_url) {
                logo.src = settings.logo_url;
            }

            // Update offer button
            const offerButton = document.querySelector('.offer-button span');
            if (offerButton && settings.offer_button_text) {
                offerButton.textContent = settings.offer_button_text;
            }

            const offerButtonLink = document.querySelector('.offer-button');
            if (offerButtonLink && settings.offer_button_link) {
                offerButtonLink.href = settings.offer_button_link;
            }

            if (offerButtonLink && !settings.enable_offer_button) {
                offerButtonLink.style.display = 'none';
            }

            // Apply color settings from Colors & Design tab
            const headerElement = document.querySelector('.custom-header');
            if (headerElement && settings) {
                // Apply CSS custom properties for colors
                if (settings.header_background_color) {
                    headerElement.style.setProperty('--header-background-color', settings.header_background_color);
                    headerElement.style.backgroundColor = settings.header_background_color;
                }
                
                if (settings.nav_text_color) {
                    headerElement.style.setProperty('--nav-text-color', settings.nav_text_color);
                }
                
                if (settings.nav_active_color) {
                    headerElement.style.setProperty('--nav-active-color', settings.nav_active_color);
                }

                console.log('🎨 Applied color settings:', {
                    background: settings.header_background_color,
                    navText: settings.nav_text_color,
                    navActive: settings.nav_active_color
                });
            }

            // Apply colors to specific elements for immediate effect
            if (settings.header_background_color) {
                const headerWrapper = document.querySelector('.custom-header-wrapper');
                const trendingSection = document.querySelector('.trending-section');
                
                if (headerWrapper) {
                    headerWrapper.style.backgroundColor = settings.header_background_color;
                }
                
                // Update navigation background
                const navTabs = document.querySelector('.nav-tabs');
                if (navTabs && settings.header_background_color) {
                    navTabs.style.backgroundColor = settings.header_background_color;
                }
            }

            // Update navigation text colors
            if (settings.nav_text_color) {
                const navLinks = document.querySelectorAll('.nav-tabs a');
                navLinks.forEach(link => {
                    if (!link.classList.contains('active')) {
                        link.style.color = settings.nav_text_color;
                    }
                });
            }

            // Update active navigation color
            if (settings.nav_active_color) {
                const activeNavLinks = document.querySelectorAll('.nav-tabs a.active');
                activeNavLinks.forEach(link => {
                    link.style.color = settings.nav_active_color;
                });
            }

            console.log('✅ Header settings and colors updated from admin interface');
        }

        // Error handling
        window.addEventListener('error', function(e) {
            console.error('App error:', e.error);
        });

        // Prevent zoom on double tap (iOS Safari)
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);

        // Service Worker Registration (optional, for offline support)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                // Uncomment when you have a service worker file
                // navigator.serviceWorker.register('/sw.js')
                //     .then(registration => console.log('SW registered'))
                //     .catch(error => console.log('SW registration failed'));
            });
        }

        console.log('📱 GoEye Store Mobile App - All scripts loaded');
        
        // Load header settings on page load
        loadHeaderSettings();
        
        // Load collections and products on page load
        loadCollections(0);
        loadProducts(0);
        
        // Initialize sale banner system
        initializeSaleBannerSystem();
        
        // Start auto-refresh system
        startAutoRefresh();
        setupFocusRefresh();
        
        // Handle product link clicks
        function handleProductClick(productId, linkType, link, brand, price, image, offer) {
            console.log('🔍 Product clicked:', { productId, linkType, link, brand });
            
            // Prevent default action
            event.preventDefault();
            
            if (linkType === 'none' || !link) {
                // Show product details modal
                showProductModal(productId, brand, price, image, offer);
            } else if (linkType === 'product') {
                // Navigate to another product
                console.log('🔗 Navigating to product:', link);
                // You can implement product navigation here
                showToast(`Navigating to product: ${link}`);
            } else if (linkType === 'collection') {
                // Navigate to collection
                console.log('🔗 Navigating to collection:', link);
                // You can implement collection navigation here
                showToast(`Navigating to collection: ${link}`);
            } else if (linkType === 'external') {
                // Open external link
                console.log('🔗 Opening external link:', link);
                if (link.startsWith('http://') || link.startsWith('https://')) {
                    window.open(link, '_blank');
                } else {
                    showToast('Invalid external link');
                }
            }
        }
        
        // Show product details modal
        function showProductModal(productId, brand, price, image, offer) {
            // Create modal
            const modal = document.createElement('div');
            modal.className = 'product-modal';
            modal.innerHTML = `
                <div class="product-modal-overlay" onclick="closeProductModal()"></div>
                <div class="product-modal-content">
                    <div class="product-modal-header">
                        <h2>${brand}</h2>
                        <button class="close-button" onclick="closeProductModal()">×</button>
                    </div>
                    <div class="product-modal-body">
                        <div class="product-modal-image">
                            <img src="${image || 'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=300&h=300&fit=crop'}" alt="${brand}">
                        </div>
                        <div class="product-modal-info">
                            <h3>${brand}</h3>
                            <p class="product-modal-price">₹${price}</p>
                            <p class="product-modal-offer">${offer || 'Free shipping'}</p>
                            <button class="add-to-cart-btn" onclick="addToCart('${productId}', '${brand}', '${price}', '${image}')">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            // Add styles
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 1000;
                display: flex;
                align-items: center;
                justify-content: center;
            `;
            
            document.body.appendChild(modal);
        }
        
        // Close product modal
        function closeProductModal() {
            const modal = document.querySelector('.product-modal');
            if (modal) {
                modal.remove();
            }
        }
        
        // Add to cart functionality
        function addToCart(productId, brand, price, image) {
            console.log('🛒 Adding to cart:', { productId, brand, price });
            
            // Get existing cart or create new one
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            
            // Check if product already exists in cart
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: productId,
                    brand: brand,
                    price: price,
                    image: image,
                    quantity: 1
                });
            }
            
            // Save to localStorage
            localStorage.setItem('cart', JSON.stringify(cart));
            
            // Show success message
            showToast(`${brand} added to cart!`);
            
            // Close modal
            closeProductModal();
        }
        
        // Show toast notification
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: #333;
                color: white;
                padding: 12px 24px;
                border-radius: 6px;
                z-index: 1001;
                opacity: 0;
                transition: opacity 0.3s ease;
            `;
            
            document.body.appendChild(toast);
            
            // Show toast
            setTimeout(() => {
                toast.style.opacity = '1';
            }, 100);
            
            // Hide toast after 3 seconds
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => {
                    toast.remove();
                }, 300);
            }, 3000);
        }
        
        console.log('🔄 Auto-refresh system activated for navigation, announcement bar, collections and products');

        // ====================
        // SALE BANNER SYSTEM - REBUILT FROM SCRATCH  
        // ====================
        
        // Global banner data storage
        window.saleBannerData = {
            eyeglasses: null,
            sunglasses: null
        };
        
        // Create sale banner HTML element
        function createSaleBannerElement(bannerData, sectionType = 'eyeglasses') {
            if (!bannerData || !bannerData.enabled || !bannerData.line1 || !bannerData.line2) {
                console.log('❌ Banner data invalid or disabled:', bannerData);
                return null;
            }
            
            console.log('✅ Creating sale banner element:', bannerData);
            
            const bannerElement = document.createElement('div');
            bannerElement.className = 'sale-banner-new';
            bannerElement.setAttribute('data-section', sectionType);
            
            bannerElement.style.cssText = `
                background-color: ${bannerData.backgroundColor || '#000000'};
                color: white;
                text-align: center;
                padding: 16px 20px;
                margin: 0 0 20px 0;
                width: 100%;
                font-family: Arial, sans-serif;
                font-weight: bold;
                border-radius: 8px;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                position: relative;
                overflow: hidden;
                display: block;
                z-index: 10;
            `;
            
            bannerElement.innerHTML = `
                <div style="font-size: 14px; margin-bottom: 4px; letter-spacing: 0.5px;">
                    ${bannerData.line1}
                </div>
                <div style="font-size: 22px; font-weight: 900; letter-spacing: 1px; text-transform: uppercase;">
                    ${bannerData.line2}
                </div>
            `;
            
            return bannerElement;
        }
        
        // Show banner in drawer when category is opened
        function showBannerInDrawer(categoryType, sectionType = 'eyeglasses') {
            console.log(`🎯 Showing banner in drawer for ${categoryType} (${sectionType})`);
            
            const bannerData = window.saleBannerData[sectionType];
            if (!bannerData || !bannerData.enabled) {
                console.log('❌ No banner data available for section:', sectionType);
                return;
            }
            
            // Find the drawer content area
            const drawer = sectionType === 'eyeglasses' 
                ? document.querySelector('#category-drawer')
                : document.querySelector('#sunglasses-category-drawer');
            const drawerContent = drawer?.querySelector('.drawer-content');
            
            if (!drawerContent) {
                console.log('❌ Drawer content not found');
                return;
            }
            
            // Remove any existing banners
            const existingBanners = drawerContent.querySelectorAll('.sale-banner-new');
            existingBanners.forEach(banner => banner.remove());
            
            // Create and insert the banner at the top of drawer content
            const bannerElement = createSaleBannerElement(bannerData, sectionType);
            if (bannerElement) {
                drawerContent.insertBefore(bannerElement, drawerContent.firstChild);
                console.log('✅ Banner added to drawer:', categoryType);
            }
        }
        
        // Load banner data from API
        async function loadSaleBannerData() {
            console.log('🔄 Loading sale banner data from APIs...');
            
            try {
                // Load eyeglasses banner data
                const eyeglassesResponse = await fetch(`${API_BASE}/api/live-eyeglasses`);
                if (eyeglassesResponse.ok) {
                    const eyeglassesData = await eyeglassesResponse.json();
                    if (eyeglassesData.success && eyeglassesData.saleBanner) {
                        // Parse if it's a JSON string
                        const bannerData = typeof eyeglassesData.saleBanner === 'string' 
                            ? JSON.parse(eyeglassesData.saleBanner) 
                            : eyeglassesData.saleBanner;
                        
                        window.saleBannerData.eyeglasses = bannerData;
                        console.log('✅ Eyeglasses banner data loaded:', bannerData);
                    }
                }
                
                // Load sunglasses banner data
                const sunglassesResponse = await fetch(`${API_BASE}/api/live-sunglasses`);
                if (sunglassesResponse.ok) {
                    const sunglassesData = await sunglassesResponse.json();
                    if (sunglassesData.success && sunglassesData.saleBanner) {
                        // Parse if it's a JSON string
                        const bannerData = typeof sunglassesData.saleBanner === 'string' 
                            ? JSON.parse(sunglassesData.saleBanner) 
                            : sunglassesData.saleBanner;
                            
                        window.saleBannerData.sunglasses = bannerData;
                        console.log('✅ Sunglasses banner data loaded:', bannerData);
                    }
                }
                
                console.log('🎉 Sale banner data loading completed');
                return true;
                
            } catch (error) {
                console.error('❌ Error loading sale banner data:', error);
                return false;
            }
        }
        
        // Initialize sale banner system
        async function initializeSaleBannerSystem() {
            console.log('🚀 Initializing sale banner system...');
            
            // Load banner data from APIs
            const loaded = await loadSaleBannerData();
            if (!loaded) {
                console.log('❌ Failed to load banner data');
                return;
            }
            
            console.log('✅ Sale banner system initialized successfully');
        }

        // New Drops Functions
        async function loadNewDropsData(silent = false) {
            try {
                const response = await fetch(`${API_BASE}/api/live-new-drops`);
                const data = await response.json();
                
                if (data.enabled) {
                    renderNewDropsSection(data);
                    
                    if (!silent) {
                        console.log('New Drops data loaded successfully');
                    }
                } else {
                    hideNewDropsSection();
                }
            } catch (error) {
                console.error('Error loading new drops data:', error);
                if (!silent) {
                    hideNewDropsSection();
                }
            }
        }

        function renderNewDropsSection(data) {
            const section = document.getElementById('new-drops-section');
            const title = document.getElementById('new-drops-title');
            const subtitle = document.getElementById('new-drops-subtitle');
            const slideshow = document.getElementById('banner-slideshow');
            
            if (!section || !title || !subtitle || !slideshow) return;
            
            // Update header
            title.textContent = data.title || 'New Drops';
            subtitle.textContent = data.subtitle || 'Fresh collections every 15 days';
            
            // Show section
            section.style.display = 'block';
            
            // Render slides
            if (data.slides && data.slides.length > 0) {
                let slidesHTML = '';
                let progressHTML = '';
                
                data.slides.forEach((slide, index) => {
                    const isActive = index === 0 ? ' active' : '';
                    const logos = [];
                    
                    // Add logos
                    if (slide.logo_1) {
                        logos.push(`<div class="banner-logo position-${slide.logo_1_position}" style="max-width: ${slide.logo_1_size}px; max-height: ${slide.logo_1_size}px;">
                            <img src="${slide.logo_1}" alt="Logo 1" loading="lazy">
                        </div>`);
                    }
                    if (slide.logo_2) {
                        logos.push(`<div class="banner-logo position-${slide.logo_2_position}" style="max-width: ${slide.logo_2_size}px; max-height: ${slide.logo_2_size}px;">
                            <img src="${slide.logo_2}" alt="Logo 2" loading="lazy">
                        </div>`);
                    }
                    if (slide.logo_3) {
                        logos.push(`<div class="banner-logo position-${slide.logo_3_position}" style="max-width: ${slide.logo_3_size}px; max-height: ${slide.logo_3_size}px;">
                            <img src="${slide.logo_3}" alt="Logo 3" loading="lazy">
                        </div>`);
                    }
                    
                    const logoHTML = logos.length > 0 ? `<div class="logo-container">${logos.join('<div class="logo-divider">|</div>')}</div>` : '';
                    
                    const contentOverlay = (slide.slide_heading || slide.slide_subheading || slide.button_text) ? `
                        <div class="banner-content-overlay">
                            ${slide.slide_heading ? `<h3 class="banner-slide-heading">${slide.slide_heading}</h3>` : ''}
                            ${slide.slide_subheading ? `<p class="banner-slide-subheading">${slide.slide_subheading}</p>` : ''}
                            ${slide.button_text ? `<div class="shop-now-button">${slide.button_text}</div>` : ''}
                        </div>
                    ` : '';
                    
                    slidesHTML += `
                        <a href="${slide.slide_link || '#'}" class="banner-slide${isActive}">
                            <div class="banner-image-container">
                                ${logoHTML}
                                ${contentOverlay}
                                <img src="${slide.slide_image}" 
                                     alt="${slide.slide_heading || 'New Drop'}" 
                                     loading="${index === 0 ? 'eager' : 'lazy'}" 
                                     class="banner-image">
                            </div>
                        </a>
                    `;
                    
                    progressHTML += `<div class="progress-dash${isActive}" data-index="${index}"></div>`;
                });
                
                slideshow.innerHTML = `
                    ${slidesHTML}
                    <div class="banner-progress-container">
                        ${progressHTML}
                    </div>
                `;
                
                // Initialize slideshow
                initializeNewDropsSlideshow(data.slide_interval || 3);
            }
        }

        function hideNewDropsSection() {
            const section = document.getElementById('new-drops-section');
            if (section) {
                section.style.display = 'none';
            }
        }

        function initializeNewDropsSlideshow(intervalSeconds) {
            const slideshow = document.getElementById('banner-slideshow');
            if (!slideshow) return;

            const slides = slideshow.querySelectorAll('.banner-slide');
            const progressDashes = slideshow.querySelectorAll('.progress-dash');
            
            if (slides.length <= 1) return;

            let currentIndex = 0;
            const intervalDuration = intervalSeconds * 1000;

            function showSlide(index) {
                currentIndex = (index + slides.length) % slides.length;

                slides.forEach((slide, i) => {
                    if (i === currentIndex) {
                        slide.classList.add('active');
                    } else {
                        slide.classList.remove('active');
                    }
                });

                progressDashes.forEach((dash, i) => {
                    if (i === currentIndex) {
                        dash.classList.add('active');
                    } else {
                        dash.classList.remove('active');
                    }
                });
            }

            function startSlideshow() {
                showSlide(currentIndex);
                return setInterval(() => {
                    showSlide(currentIndex + 1);
                }, intervalDuration);
            }

            let slideInterval = startSlideshow();

            // Handle visibility change
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    clearInterval(slideInterval);
                } else {
                    slideInterval = startSlideshow();
                }
            });
        }

        async function initializeNewDropsSection() {
            await loadNewDropsData();
        }

    </script>
</body>
</html> 