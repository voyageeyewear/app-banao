import{r as g,j as e}from"./index-Cd5tM5Cw.js";import{F as P,T as U,a as W,C as p,b as $}from"./Toast-uop3fvrM.js";import{P as J,c as C,b as d,T as r,a as c,I as b,B as f,d as K}from"./Page-Bs3Yy5l8.js";import{T as Q,L as F}from"./TitleBar-BcpaBvsu.js";import{C as h}from"./Card-Vxxgx_Dr.js";import{F as _}from"./FormLayout-DnJHHvdP.js";import"./context-DL2GIqZU.js";import"./context-D8WZWu7V.js";function se(){const[w,B]=g.useState(0),[t,l]=g.useState({logo_url:"",trending_title:"#Trending On",trending_subtitle:"GoEye",header_background_color:"#FFFFFF",nav_text_color:"#6B7280",nav_active_color:"#1E1B4B",enable_menu_drawer:!0,enable_wishlist_icon:!0,enable_account_icon:!0,enable_cart_icon:!0,enable_offer_button:!0,offer_button_text:"50% OFF",offer_button_link:""}),[i,x]=g.useState([{id:"1",title:"Premium Eyeglasses",image_url:"https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=440&h=540&fit=crop&crop=center&q=80",link_url:"/collections/eyeglasses",enabled:!0,order:1},{id:"2",title:"Blue Light Blockers",image_url:"https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=440&h=540&fit=crop&crop=center&q=80",link_url:"/collections/blue-light",enabled:!0,order:2},{id:"3",title:"Designer Sunglasses",image_url:"https://images.unsplash.com/photo-1556306535-38febf6782e7?w=440&h=540&fit=crop&crop=center&q=80",link_url:"/collections/sunglasses",enabled:!0,order:3},{id:"4",title:"Reading Glasses",image_url:"https://images.unsplash.com/photo-1508296695146-257a814070b4?w=440&h=540&fit=crop&crop=center&q=80",link_url:"/collections/reading",enabled:!0,order:4},{id:"5",title:"Sports Eyewear",image_url:"https://images.unsplash.com/photo-1583394838336-acd977736f90?w=440&h=540&fit=crop&crop=center&q=80",link_url:"/collections/sports",enabled:!0,order:5}]),[E,m]=g.useState(!1),[I,S]=g.useState(""),[L,y]=g.useState(!1),D=[{id:"general",content:"General Settings",accessibilityLabel:"General header settings",panelID:"general-settings-panel"},{id:"trending",content:"Trending Slider",accessibilityLabel:"Trending slider management",panelID:"trending-slider-panel"},{id:"colors",content:"Colors & Design",accessibilityLabel:"Colors and design settings",panelID:"colors-settings-panel"}],A=async()=>{y(!0);try{console.log("🚀 Starting header settings save...");const n={header:t,trending_slides:i};console.log("📤 Sending data:",JSON.stringify(n,null,2));const s=await fetch("/api/header-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});console.log("📡 Response status:",s.status);const a=await s.json();if(console.log("📥 Response data:",a),s.ok&&a.success)S("Header settings and trending slides saved successfully!"),m(!0),console.log("✅ Save successful!");else{const o=a.details?`${a.error}: ${a.details}`:a.error||"Unknown error occurred";throw console.error("❌ Save failed:",o),S(`Error: ${o}`),m(!0),new Error(o)}}catch(n){console.error("❌ Error saving header settings:",n);const s=n instanceof Error?n.message:"Unknown error occurred";S(`Error saving settings: ${s}`),m(!0)}finally{y(!1)}},H=async()=>{try{const n=await fetch("/api/header-settings");if(n.ok){const s=await n.json();s.header&&l(s.header),s.trending_slides&&x(s.trending_slides)}}catch(n){console.error("Error loading header settings:",n)}};g.useEffect(()=>{H()},[]);const k=()=>{const n={id:Date.now().toString(),title:"New Trending Item",image_url:"",link_url:"",enabled:!0,order:i.length+1};x([...i,n])},j=(n,s,a)=>{x(o=>o.map(u=>u.id===n?{...u,[s]:a}:u))},O=n=>{x(s=>s.filter(a=>a.id!==n))},T=(n,s)=>{const a=i.findIndex(v=>v.id===n);if(s==="up"&&a===0||s==="down"&&a===i.length-1)return;const o=[...i],u=s==="up"?a-1:a+1;[o[a],o[u]]=[o[u],o[a]],o.forEach((v,G)=>{v.order=G+1}),x(o)},M=()=>e.jsxs(d,{gap:"400",children:[e.jsx(h,{children:e.jsxs(d,{gap:"400",children:[e.jsx(r,{variant:"headingMd",as:"h3",children:"Basic Settings"}),e.jsxs(_,{children:[e.jsx(c,{label:"Logo Image URL",value:t.logo_url,onChange:n=>l({...t,logo_url:n}),placeholder:"https://example.com/logo.png",autoComplete:"off"}),e.jsx(c,{label:"Trending Title",value:t.trending_title,onChange:n=>l({...t,trending_title:n}),placeholder:"#Trending On",autoComplete:"off"}),e.jsx(c,{label:"Trending Subtitle",value:t.trending_subtitle,onChange:n=>l({...t,trending_subtitle:n}),placeholder:"GoEye",autoComplete:"off"})]})]})}),e.jsx(h,{children:e.jsxs(d,{gap:"400",children:[e.jsx(r,{variant:"headingMd",as:"h3",children:"Feature Settings"}),e.jsxs(_,{children:[e.jsx(p,{label:"Show Menu Drawer",checked:t.enable_menu_drawer,onChange:n=>l({...t,enable_menu_drawer:n})}),e.jsx(p,{label:"Show Wishlist Icon",checked:t.enable_wishlist_icon,onChange:n=>l({...t,enable_wishlist_icon:n})}),e.jsx(p,{label:"Show Account Icon",checked:t.enable_account_icon,onChange:n=>l({...t,enable_account_icon:n})}),e.jsx(p,{label:"Show Cart Icon",checked:t.enable_cart_icon,onChange:n=>l({...t,enable_cart_icon:n})})]})]})}),e.jsx(h,{children:e.jsxs(d,{gap:"400",children:[e.jsx(r,{variant:"headingMd",as:"h3",children:"Offer Button"}),e.jsxs(_,{children:[e.jsx(p,{label:"Enable Offer Button",checked:t.enable_offer_button,onChange:n=>l({...t,enable_offer_button:n})}),t.enable_offer_button&&e.jsxs(e.Fragment,{children:[e.jsx(c,{label:"Button Text",value:t.offer_button_text,onChange:n=>l({...t,offer_button_text:n}),placeholder:"50% OFF",autoComplete:"off"}),e.jsx(c,{label:"Button Link",value:t.offer_button_link,onChange:n=>l({...t,offer_button_link:n}),placeholder:"/collections/sale",autoComplete:"off"})]})]})]})})]}),R=()=>e.jsxs(d,{gap:"400",children:[e.jsx(h,{children:e.jsxs(d,{gap:"400",children:[e.jsxs(b,{align:"space-between",children:[e.jsx(r,{variant:"headingMd",as:"h3",children:"Trending Slides Management"}),e.jsx(f,{onClick:k,variant:"primary",children:"Add New Slide"})]}),e.jsx(r,{variant:"bodyMd",tone:"subdued",as:"p",children:"Manage the trending slides displayed in your mobile header. Drag to reorder or use the controls below."})]})}),i.length===0?e.jsx(h,{children:e.jsxs(d,{gap:"400",align:"center",children:[e.jsx(r,{variant:"headingMd",as:"h3",children:"No Slides Added"}),e.jsx(r,{variant:"bodyMd",tone:"subdued",as:"p",children:"Add your first trending slide to get started."}),e.jsx(f,{onClick:k,variant:"primary",children:"Add First Slide"})]})}):i.sort((n,s)=>n.order-s.order).map((n,s)=>e.jsx(h,{children:e.jsxs(d,{gap:"400",children:[e.jsxs(b,{align:"space-between",children:[e.jsxs(r,{variant:"headingSm",as:"h4",children:["Slide #",n.order,": ",n.title||"Untitled"]}),e.jsxs(b,{gap:"200",children:[e.jsx(K,{tone:n.enabled?"success":"critical",children:n.enabled?"Active":"Inactive"}),e.jsx(f,{size:"slim",onClick:()=>T(n.id,"up"),disabled:s===0,children:"↑"}),e.jsx(f,{size:"slim",onClick:()=>T(n.id,"down"),disabled:s===i.length-1,children:"↓"}),e.jsx(f,{size:"slim",tone:"critical",onClick:()=>O(n.id),children:"Delete"})]})]}),e.jsxs(_,{children:[e.jsxs(b,{gap:"400",children:[e.jsx("div",{style:{flex:2},children:e.jsx(c,{label:"Slide Title",value:n.title,onChange:a=>j(n.id,"title",a),placeholder:"Premium Eyeglasses",autoComplete:"off"})}),e.jsx("div",{style:{flex:1},children:e.jsx(p,{label:"Enable this slide",checked:n.enabled,onChange:a=>j(n.id,"enabled",a)})})]}),e.jsx(c,{label:"Image URL",value:n.image_url,onChange:a=>j(n.id,"image_url",a),placeholder:"https://images.unsplash.com/photo-xyz...",autoComplete:"off",helpText:"Recommended size: 440x540px for best quality"}),e.jsx(c,{label:"Link URL",value:n.link_url,onChange:a=>j(n.id,"link_url",a),placeholder:"/collections/eyeglasses",autoComplete:"off",helpText:"Where users will go when they click this slide"}),n.image_url&&e.jsxs(C,{children:[e.jsx(r,{variant:"bodyMd",as:"p",fontWeight:"semibold",children:"Preview:"}),e.jsx(C,{paddingBlockStart:"200",children:e.jsx($,{source:n.image_url,alt:n.title,size:"large"})})]})]})]})},n.id)),e.jsx(h,{children:e.jsxs(d,{gap:"300",children:[e.jsx(r,{variant:"headingSm",as:"h3",children:"Trending Slider Stats"}),e.jsxs(b,{gap:"400",children:[e.jsxs(r,{variant:"bodyMd",as:"p",children:["Total Slides: ",e.jsx(r,{variant:"bodyMd",as:"span",fontWeight:"semibold",children:i.length})]}),e.jsxs(r,{variant:"bodyMd",as:"p",children:["Active Slides: ",e.jsx(r,{variant:"bodyMd",as:"span",fontWeight:"semibold",children:i.filter(n=>n.enabled).length})]})]})]})})]}),N=()=>e.jsx(d,{gap:"400",children:e.jsx(h,{children:e.jsxs(d,{gap:"400",children:[e.jsx(r,{variant:"headingMd",as:"h3",children:"Header Colors"}),e.jsxs(_,{children:[e.jsx(c,{label:"Header Background Color",value:t.header_background_color,onChange:n=>l({...t,header_background_color:n}),placeholder:"#FFFFFF",autoComplete:"off"}),e.jsx(c,{label:"Navigation Text Color",value:t.nav_text_color,onChange:n=>l({...t,nav_text_color:n}),placeholder:"#6B7280",autoComplete:"off"}),e.jsx(c,{label:"Active Navigation Color",value:t.nav_active_color,onChange:n=>l({...t,nav_active_color:n}),placeholder:"#1E1B4B",autoComplete:"off"})]})]})})}),q=()=>{switch(w){case 0:return M();case 1:return R();case 2:return N();default:return M()}},z=E?e.jsx(W,{content:I,onDismiss:()=>m(!1)}):null;return e.jsxs(P,{children:[e.jsxs(J,{title:"Header Management",subtitle:"Manage your mobile header settings and trending slides",primaryAction:{content:"Save All Settings",loading:L,onAction:A},children:[e.jsx(Q,{title:"Header Management"}),e.jsx(F,{children:e.jsx(F.Section,{children:e.jsxs(h,{children:[e.jsx(U,{tabs:D,selected:w,onSelect:B}),e.jsx(C,{padding:"400",children:q()})]})})})]}),z]})}export{se as default};
