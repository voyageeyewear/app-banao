import{r as n,j as e}from"./index-Cd5tM5Cw.js";import{F as _,T as $,M as S,a as ee,b as M,S as A,C as se,c as te}from"./Toast-uop3fvrM.js";import{P as ae,I as c,B as f,d as ne,a as l,b as h,T as d}from"./Page-Bs3Yy5l8.js";import{T as oe,L as o}from"./TitleBar-BcpaBvsu.js";import{C as p}from"./Card-Vxxgx_Dr.js";import{F as w}from"./FormLayout-DnJHHvdP.js";import{S as ie}from"./Select-BoFAFRMh.js";import"./context-DL2GIqZU.js";import"./context-D8WZWu7V.js";const O=[{id:"men",name:"Men",image:"https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=200&h=200&fit=crop&crop=center&q=80"},{id:"women",name:"Women",image:"https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=200&h=200&fit=crop&crop=center&q=80"},{id:"kids",name:"Kids",image:"https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=200&h=200&fit=crop&crop=center&q=80"},{id:"essentials",name:"Essentials",image:"https://images.unsplash.com/photo-1508296695146-257a814070b4?w=200&h=200&fit=crop&crop=center&q=80"}],I=[{id:"p1",brand:"John Jacobs",price:"3500",offer:"Free lenses + Extra ₹333 Off",image:"https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=100&h=100&fit=crop&crop=center&q=80",category:"men"},{id:"p2",brand:"Vincent Chase",price:"1500",offer:"Free lenses + Extra ₹333 Off",image:"https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=100&h=100&fit=crop&crop=center&q=80",category:"men"},{id:"p3",brand:"Vincent Chase",price:"1500",offer:"Free lenses + Extra ₹333 Off",image:"https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=100&h=100&fit=crop&crop=center&q=80",category:"women"},{id:"p4",brand:"Lenskart Air",price:"2000",offer:"Free lenses + Extra ₹333 Off",image:"https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=100&h=100&fit=crop&crop=center&q=80",category:"women"},{id:"p5",brand:"Hustlr",price:"1500",offer:"Free lenses + Extra ₹333 Off",image:"https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=100&h=100&fit=crop&crop=center&q=80",category:"kids"},{id:"p6",brand:"Kids Special",price:"1200",offer:"Free lenses + Extra ₹333 Off",image:"https://images.unsplash.com/photo-1508296695146-257a814070b4?w=100&h=100&fit=crop&crop=center&q=80",category:"kids"},{id:"p7",brand:"Essentials",price:"800",offer:"60% Off + Free lenses",image:"https://images.unsplash.com/photo-1508296695146-257a814070b4?w=100&h=100&fit=crop&crop=center&q=80",category:"essentials"},{id:"p8",brand:"Budget Frames",price:"600",offer:"60% Off + Free lenses",image:"https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=100&h=100&fit=crop&crop=center&q=80",category:"essentials"}];function ue(){const[m,E]=n.useState(O),[g,x]=n.useState(I),[v,P]=n.useState("Eyeglasses"),[C,T]=n.useState(!0),[k,B]=n.useState(0),[i,j]=n.useState(null),[a,r]=n.useState(null),[L,b]=n.useState(!1),[D,u]=n.useState(!1),[N,y]=n.useState(!1),[J,F]=n.useState("");n.useEffect(()=>{R()},[]);const R=async()=>{try{const s=await fetch("/api/categories-settings");if(s.ok){const t=await s.json();t.success&&t.data&&(E(t.data.categories||O),x(t.data.products||I),P(t.data.title||"Eyeglasses"),T(t.data.enabled!==!1))}}catch(s){console.error("Error loading category settings:",s)}},W=async()=>{try{if((await fetch("/api/categories-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:v,enabled:C,categories:m,products:g})})).ok)F("Eyeglasses section settings saved successfully!"),y(!0);else throw new Error("Failed to save settings")}catch(s){console.error("Error saving category settings:",s),F("Error saving settings. Please try again."),y(!0)}},z=s=>{j(s),b(!0)},K=()=>{if(!i)return;const s=m.map(t=>t.id===i.id?i:t);E(s),b(!1),j(null)},U=s=>{r(s),u(!0)},V=s=>{const t={id:Date.now().toString(),brand:"New Brand",price:"1000",offer:"Special offer",image:"https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=100&h=100&fit=crop&crop=center&q=80",category:s};r(t),u(!0)},H=()=>{if(!a)return;const s=g.findIndex(t=>t.id===a.id);if(s>=0){const t=[...g];t[s]=a,x(t)}else x([...g,a]);u(!1),r(null)},G=s=>{x(g.filter(t=>t.id!==s))},q=()=>e.jsx(o,{children:e.jsx(o.Section,{children:e.jsx(p,{children:e.jsxs(h,{gap:"400",children:[e.jsxs(c,{align:"space-between",children:[e.jsx(d,{variant:"headingMd",as:"h2",children:"Categories"}),e.jsx(f,{disabled:!0,children:"Add Category"})]}),e.jsx(h,{gap:"300",children:m.map(s=>e.jsx(p,{padding:"300",children:e.jsxs(c,{align:"space-between",children:[e.jsxs(c,{gap:"300",children:[e.jsx(M,{source:s.image,alt:s.name,size:"small"}),e.jsxs(h,{gap:"100",children:[e.jsx(d,{variant:"bodyMd",fontWeight:"semibold",as:"p",children:s.name}),e.jsx(d,{variant:"bodySm",tone:"subdued",as:"p",children:"Category Image"})]})]}),e.jsx(f,{icon:A,onClick:()=>z(s),children:"Edit"})]})},s.id))})]})})})}),Q=()=>e.jsx(o,{children:e.jsx(o.Section,{children:m.map(s=>e.jsx(p,{padding:"400",children:e.jsxs(h,{gap:"400",children:[e.jsxs(c,{align:"space-between",children:[e.jsxs(d,{variant:"headingMd",as:"h2",children:[s.name," Products"]}),e.jsx(f,{onClick:()=>V(s.id),children:"Add Product"})]}),e.jsx(h,{gap:"300",children:g.filter(t=>t.category===s.id).map(t=>e.jsx(p,{padding:"300",children:e.jsxs(c,{align:"space-between",children:[e.jsxs(c,{gap:"300",children:[e.jsx(M,{source:t.image,alt:t.brand,size:"small"}),e.jsxs(h,{gap:"100",children:[e.jsx(d,{variant:"bodyMd",fontWeight:"semibold",as:"p",children:t.brand}),e.jsxs(d,{variant:"bodySm",tone:"subdued",as:"p",children:["₹",t.price]}),e.jsx(d,{variant:"bodySm",tone:"subdued",as:"p",children:t.offer})]})]}),e.jsxs(c,{gap:"200",children:[e.jsx(f,{icon:A,onClick:()=>U(t),children:"Edit"}),e.jsx(f,{icon:te,variant:"primary",tone:"critical",onClick:()=>G(t.id),children:"Delete"})]})]})},t.id))})]})},s.id))})}),X=()=>e.jsx(o,{children:e.jsx(o.Section,{children:e.jsx(p,{children:e.jsxs(h,{gap:"400",children:[e.jsx(d,{variant:"headingMd",as:"h2",children:"Section Settings"}),e.jsxs(w,{children:[e.jsx(l,{label:"Section Title",value:v,onChange:P,placeholder:"Enter section title",autoComplete:"off"}),e.jsx(se,{label:"Enable Eyeglasses Section",checked:C,onChange:T})]})]})})})}),Y=[{id:"categories",content:"Categories"},{id:"products",content:"Products"},{id:"settings",content:"Settings"}],Z=()=>{switch(k){case 0:return q();case 1:return Q();case 2:return X();default:return q()}};return e.jsx(_,{children:e.jsxs(ae,{title:"Eyeglasses Section",children:[e.jsx(oe,{title:"Eyeglasses Section Management"}),e.jsxs(o,{children:[e.jsx(o.Section,{children:e.jsx(p,{children:e.jsx($,{tabs:Y,selected:k,onSelect:B})})}),e.jsx(o.Section,{children:Z()}),e.jsx(o.Section,{children:e.jsx(p,{children:e.jsxs(c,{align:"space-between",children:[e.jsx(f,{onClick:W,variant:"primary",children:"Save Settings"}),e.jsx(ne,{tone:"info",children:C?"Enabled":"Disabled"})]})})})]}),e.jsx(S,{open:L,onClose:()=>b(!1),title:"Edit Category",primaryAction:{content:"Save",onAction:K},secondaryActions:[{content:"Cancel",onAction:()=>b(!1)}],children:e.jsx(S.Section,{children:i&&e.jsxs(w,{children:[e.jsx(l,{label:"Category Name",value:i.name,onChange:s=>j({...i,name:s})}),e.jsx(l,{label:"Image URL",value:i.image,onChange:s=>j({...i,image:s})})]})})}),e.jsx(S,{open:D,onClose:()=>u(!1),title:"Edit Product",primaryAction:{content:"Save",onAction:H},secondaryActions:[{content:"Cancel",onAction:()=>u(!1)}],children:e.jsx(S.Section,{children:a&&e.jsxs(w,{children:[e.jsx(l,{label:"Brand Name",value:a.brand,onChange:s=>r({...a,brand:s})}),e.jsx(l,{label:"Price",value:a.price,onChange:s=>r({...a,price:s})}),e.jsx(l,{label:"Offer",value:a.offer,onChange:s=>r({...a,offer:s})}),e.jsx(l,{label:"Image URL",value:a.image,onChange:s=>r({...a,image:s})}),e.jsx(ie,{label:"Category",options:m.map(s=>({label:s.name,value:s.id})),value:a.category,onChange:s=>r({...a,category:s})})]})})}),N&&e.jsx(ee,{content:J,onDismiss:()=>y(!1)})]})})}export{ue as default};
