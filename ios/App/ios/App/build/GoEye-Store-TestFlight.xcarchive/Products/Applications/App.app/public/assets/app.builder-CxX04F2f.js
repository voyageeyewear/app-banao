const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Cp51y_bg.js","assets/index-Cd5tM5Cw.js"])))=>i.map(i=>d[i]);
import{r as c,R as O,b as Ue,j as o}from"./index-Cd5tM5Cw.js";import{u as kn}from"./components-INdKWwZR.js";import{P as Tn}from"./Page-Bs3Yy5l8.js";import"./context-DL2GIqZU.js";const An="modulepreload",Nn=function(e){return"/"+e},Bt={},zt=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let a=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=a(n.map(f=>{if(f=Nn(f),f in Bt)return;Bt[f]=!0;const h=f.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":An,h||(y.as="script"),y.crossOrigin="",y.href=f,d&&y.setAttribute("nonce",d),document.head.appendChild(y),h)return new Promise((x,D)=>{y.addEventListener("load",x),y.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function On(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const dt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ne(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Ct(e){return"nodeType"in e}function X(e){var t,n;return e?Ne(e)?e:Ct(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Dt(e){const{Document:t}=X(e);return e instanceof t}function Ge(e){return Ne(e)?!1:e instanceof X(e).HTMLElement}function Zt(e){return e instanceof X(e).SVGElement}function Oe(e){return e?Ne(e)?e.document:Ct(e)?Dt(e)?e:Ge(e)||Zt(e)?e.ownerDocument:document:document:document}const ae=dt?c.useLayoutEffect:c.useEffect;function ut(e){const t=c.useRef(e);return ae(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function Mn(){const e=c.useRef(null),t=c.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ve(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return ae(()=>{n.current!==e&&(n.current=e)},t),n}function qe(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function ot(e){const t=ut(e),n=c.useRef(null),r=c.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function it(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let mt={};function Je(e,t){return c.useMemo(()=>{if(t)return t;const n=mt[e]==null?0:mt[e]+1;return mt[e]=n,e+"-"+n},[e,t])}function en(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,a)=>{const l=Object.entries(a);for(const[d,f]of l){const h=i[d];h!=null&&(i[d]=h+e*f)}return i},{...t})}}const Ae=en(1),st=en(-1);function Bn(e){return"clientX"in e&&"clientY"in e}function ft(e){if(!e)return!1;const{KeyboardEvent:t}=X(e.target);return t&&e instanceof t}function zn(e){if(!e)return!1;const{TouchEvent:t}=X(e.target);return t&&e instanceof t}function at(e){if(zn(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Bn(e)?{x:e.clientX,y:e.clientY}:null}const Re=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Re.Translate.toString(e),Re.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Lt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ln(e){return e.matches(Lt)?e:e.querySelector(Lt)}const Wn={display:"none"};function Fn(e){let{id:t,value:n}=e;return O.createElement("div",{id:t,style:Wn},n)}function $n(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return O.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Hn(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const tn=c.createContext(null);function Un(e){const t=c.useContext(tn);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Yn(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:s,event:i}=r;e.forEach(a=>{var l;return(l=a[s])==null?void 0:l.call(a,i)})},[e]),t]}const Xn={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},_n={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Vn(e){let{announcements:t=_n,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=Xn}=e;const{announce:i,announcement:a}=Hn(),l=Je("DndLiveRegion"),[d,f]=c.useState(!1);if(c.useEffect(()=>{f(!0)},[]),Un(c.useMemo(()=>({onDragStart(p){let{active:y}=p;i(t.onDragStart({active:y}))},onDragMove(p){let{active:y,over:x}=p;t.onDragMove&&i(t.onDragMove({active:y,over:x}))},onDragOver(p){let{active:y,over:x}=p;i(t.onDragOver({active:y,over:x}))},onDragEnd(p){let{active:y,over:x}=p;i(t.onDragEnd({active:y,over:x}))},onDragCancel(p){let{active:y,over:x}=p;i(t.onDragCancel({active:y,over:x}))}}),[i,t])),!d)return null;const h=O.createElement(O.Fragment,null,O.createElement(Fn,{id:r,value:s.draggable}),O.createElement($n,{id:l,announcement:a}));return n?Ue.createPortal(h,n):h}var B;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(B||(B={}));function lt(){}function Kn(e,t){return c.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Gn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const le=Object.freeze({x:0,y:0});function qn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Jn(e,t){const n=at(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function Qn(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Zn(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function er(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Wt(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const tr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=Wt(t,t.left,t.top),i=[];for(const a of r){const{id:l}=a,d=n.get(l);if(d){const f=qn(Wt(d),s);i.push({id:l,data:{droppableContainer:a,value:f}})}}return i.sort(Qn)};function nr(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=s-r,l=i-n;if(r<s&&n<i){const d=t.width*t.height,f=e.width*e.height,h=a*l,p=h/(d+f-h);return Number(p.toFixed(4))}return 0}const rr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const d=nr(l,t);d>0&&s.push({id:a,data:{droppableContainer:i,value:d}})}}return s.sort(Zn)};function or(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function nn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:le}function ir(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((a,l)=>({...a,top:a.top+e*l.y,bottom:a.bottom+e*l.y,left:a.left+e*l.x,right:a.right+e*l.x}),{...n})}}const sr=ir(1);function rn(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function ar(e,t,n){const r=rn(t);if(!r)return e;const{scaleX:s,scaleY:i,x:a,y:l}=r,d=e.left-a-(1-s)*parseFloat(n),f=e.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?e.width/s:e.width,p=i?e.height/i:e.height;return{width:h,height:p,top:f,right:d+h,bottom:f+p,left:d}}const lr={ignoreTransform:!1};function Me(e,t){t===void 0&&(t=lr);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:h}=X(e).getComputedStyle(e);f&&(n=ar(n,f,h))}const{top:r,left:s,width:i,height:a,bottom:l,right:d}=n;return{top:r,left:s,width:i,height:a,bottom:l,right:d}}function Ft(e){return Me(e,{ignoreTransform:!0})}function cr(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function dr(e,t){return t===void 0&&(t=X(e).getComputedStyle(e)),t.position==="fixed"}function ur(e,t){t===void 0&&(t=X(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=t[s];return typeof i=="string"?n.test(i):!1})}function Rt(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Dt(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Ge(s)||Zt(s)||n.includes(s))return n;const i=X(e).getComputedStyle(s);return s!==e&&ur(s,i)&&n.push(s),dr(s,i)?n:r(s.parentNode)}return e?r(e):n}function on(e){const[t]=Rt(e,1);return t??null}function xt(e){return!dt||!e?null:Ne(e)?e:Ct(e)?Dt(e)||e===Oe(e).scrollingElement?window:Ge(e)?e:null:null}function sn(e){return Ne(e)?e.scrollX:e.scrollLeft}function an(e){return Ne(e)?e.scrollY:e.scrollTop}function wt(e){return{x:sn(e),y:an(e)}}var z;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(z||(z={}));function ln(e){return!dt||!e?!1:e===document.scrollingElement}function cn(e){const t={x:0,y:0},n=ln(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:a,isRight:l,maxScroll:r,minScroll:t}}const fr={x:.2,y:.2};function hr(e,t,n,r,s){let{top:i,left:a,right:l,bottom:d}=n;r===void 0&&(r=10),s===void 0&&(s=fr);const{isTop:f,isBottom:h,isLeft:p,isRight:y}=cn(e),x={x:0,y:0},D={x:0,y:0},S={height:t.height*s.y,width:t.width*s.x};return!f&&i<=t.top+S.height?(x.y=z.Backward,D.y=r*Math.abs((t.top+S.height-i)/S.height)):!h&&d>=t.bottom-S.height&&(x.y=z.Forward,D.y=r*Math.abs((t.bottom-S.height-d)/S.height)),!y&&l>=t.right-S.width?(x.x=z.Forward,D.x=r*Math.abs((t.right-S.width-l)/S.width)):!p&&a<=t.left+S.width&&(x.x=z.Backward,D.x=r*Math.abs((t.left+S.width-a)/S.width)),{direction:x,speed:D}}function pr(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function dn(e){return e.reduce((t,n)=>Ae(t,wt(n)),le)}function gr(e){return e.reduce((t,n)=>t+sn(n),0)}function vr(e){return e.reduce((t,n)=>t+an(n),0)}function un(e,t){if(t===void 0&&(t=Me),!e)return;const{top:n,left:r,bottom:s,right:i}=t(e);on(e)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const mr=[["x",["left","right"],gr],["y",["top","bottom"],vr]];class Pt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Rt(n),s=dn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,a,l]of mr)for(const d of a)Object.defineProperty(this,d,{get:()=>{const f=l(r),h=s[i]-f;return this.rect[d]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ye{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function xr(e){const{EventTarget:t}=X(e);return e instanceof t?e:Oe(e)}function bt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var oe;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(oe||(oe={}));function $t(e){e.preventDefault()}function br(e){e.stopPropagation()}var T;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(T||(T={}));const fn={start:[T.Space,T.Enter],cancel:[T.Esc],end:[T.Space,T.Enter,T.Tab]},yr=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case T.Right:return{...n,x:n.x+25};case T.Left:return{...n,x:n.x-25};case T.Down:return{...n,y:n.y+25};case T.Up:return{...n,y:n.y-25}}};class hn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ye(Oe(n)),this.windowListeners=new Ye(X(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(oe.Resize,this.handleCancel),this.windowListeners.add(oe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(oe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&un(r),n(le)}handleKeyDown(t){if(ft(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=fn,coordinateGetter:a=yr,scrollBehavior:l="smooth"}=s,{code:d}=t;if(i.end.includes(d)){this.handleEnd(t);return}if(i.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:f}=r.current,h=f?{x:f.left,y:f.top}:le;this.referenceCoordinates||(this.referenceCoordinates=h);const p=a(t,{active:n,context:r.current,currentCoordinates:h});if(p){const y=st(p,h),x={x:0,y:0},{scrollableAncestors:D}=r.current;for(const S of D){const C=t.code,{isTop:m,isRight:u,isLeft:v,isBottom:E,maxScroll:I,minScroll:g}=cn(S),w=pr(S),j={x:Math.min(C===T.Right?w.right-w.width/2:w.right,Math.max(C===T.Right?w.left:w.left+w.width/2,p.x)),y:Math.min(C===T.Down?w.bottom-w.height/2:w.bottom,Math.max(C===T.Down?w.top:w.top+w.height/2,p.y))},k=C===T.Right&&!u||C===T.Left&&!v,M=C===T.Down&&!E||C===T.Up&&!m;if(k&&j.x!==p.x){const N=S.scrollLeft+y.x,ee=C===T.Right&&N<=I.x||C===T.Left&&N>=g.x;if(ee&&!y.y){S.scrollTo({left:N,behavior:l});return}ee?x.x=S.scrollLeft-N:x.x=C===T.Right?S.scrollLeft-I.x:S.scrollLeft-g.x,x.x&&S.scrollBy({left:-x.x,behavior:l});break}else if(M&&j.y!==p.y){const N=S.scrollTop+y.y,ee=C===T.Down&&N<=I.y||C===T.Up&&N>=g.y;if(ee&&!y.x){S.scrollTo({top:N,behavior:l});return}ee?x.y=S.scrollTop-N:x.y=C===T.Down?S.scrollTop-I.y:S.scrollTop-g.y,x.y&&S.scrollBy({top:-x.y,behavior:l});break}}this.handleMove(t,Ae(st(p,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}hn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=fn,onActivation:s}=t,{active:i}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function Ht(e){return!!(e&&"distance"in e)}function Ut(e){return!!(e&&"delay"in e)}class It{constructor(t,n,r){var s;r===void 0&&(r=xr(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:a}=i;this.props=t,this.events=n,this.document=Oe(a),this.documentListeners=new Ye(this.document),this.listeners=new Ye(r),this.windowListeners=new Ye(X(a)),this.initialCoordinates=(s=at(i))!=null?s:le,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(oe.Resize,this.handleCancel),this.windowListeners.add(oe.DragStart,$t),this.windowListeners.add(oe.VisibilityChange,this.handleCancel),this.windowListeners.add(oe.ContextMenu,$t),this.documentListeners.add(oe.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ut(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Ht(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(oe.Click,br,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(oe.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:a,options:{activationConstraint:l}}=i;if(!s)return;const d=(n=at(t))!=null?n:le,f=st(s,d);if(!r&&l){if(Ht(l)){if(l.tolerance!=null&&bt(f,l.tolerance))return this.handleCancel();if(bt(f,l.distance))return this.handleStart()}if(Ut(l)&&bt(f,l.tolerance))return this.handleCancel();this.handlePending(l,f);return}t.cancelable&&t.preventDefault(),a(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===T.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const wr={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Et extends It{constructor(t){const{event:n}=t,r=Oe(n.target);super(t,wr,r)}}Et.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Sr={move:{name:"mousemove"},end:{name:"mouseup"}};var St;(function(e){e[e.RightClick=2]="RightClick"})(St||(St={}));class jr extends It{constructor(t){super(t,Sr,Oe(t.event.target))}}jr.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===St.RightClick?!1:(r==null||r({event:n}),!0)}}];const yt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Cr extends It{constructor(t){super(t,yt)}static setup(){return window.addEventListener(yt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(yt.move.name,t)};function t(){}}}Cr.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Xe;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Xe||(Xe={}));var ct;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(ct||(ct={}));function Dr(e){let{acceleration:t,activator:n=Xe.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:a=5,order:l=ct.TreeOrder,pointerCoordinates:d,scrollableAncestors:f,scrollableAncestorRects:h,delta:p,threshold:y}=e;const x=Pr({delta:p,disabled:!i}),[D,S]=Mn(),C=c.useRef({x:0,y:0}),m=c.useRef({x:0,y:0}),u=c.useMemo(()=>{switch(n){case Xe.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Xe.DraggableRect:return s}},[n,s,d]),v=c.useRef(null),E=c.useCallback(()=>{const g=v.current;if(!g)return;const w=C.current.x*m.current.x,j=C.current.y*m.current.y;g.scrollBy(w,j)},[]),I=c.useMemo(()=>l===ct.TreeOrder?[...f].reverse():f,[l,f]);c.useEffect(()=>{if(!i||!f.length||!u){S();return}for(const g of I){if((r==null?void 0:r(g))===!1)continue;const w=f.indexOf(g),j=h[w];if(!j)continue;const{direction:k,speed:M}=hr(g,j,u,t,y);for(const N of["x","y"])x[N][k[N]]||(M[N]=0,k[N]=0);if(M.x>0||M.y>0){S(),v.current=g,D(E,a),C.current=M,m.current=k;return}}C.current={x:0,y:0},m.current={x:0,y:0},S()},[t,E,r,S,i,a,JSON.stringify(u),JSON.stringify(x),D,f,I,h,JSON.stringify(y)])}const Rr={x:{[z.Backward]:!1,[z.Forward]:!1},y:{[z.Backward]:!1,[z.Forward]:!1}};function Pr(e){let{delta:t,disabled:n}=e;const r=it(t);return qe(s=>{if(n||!r||!s)return Rr;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[z.Backward]:s.x[z.Backward]||i.x===-1,[z.Forward]:s.x[z.Forward]||i.x===1},y:{[z.Backward]:s.y[z.Backward]||i.y===-1,[z.Forward]:s.y[z.Forward]||i.y===1}}},[n,t,r])}function Ir(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return qe(s=>{var i;return t==null?null:(i=r??s)!=null?i:null},[r,t])}function Er(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...i]},[]),[e,t])}var Ke;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ke||(Ke={}));var jt;(function(e){e.Optimized="optimized"})(jt||(jt={}));const Yt=new Map;function kr(e,t){let{dragging:n,dependencies:r,config:s}=t;const[i,a]=c.useState(null),{frequency:l,measure:d,strategy:f}=s,h=c.useRef(e),p=C(),y=Ve(p),x=c.useCallback(function(m){m===void 0&&(m=[]),!y.current&&a(u=>u===null?m:u.concat(m.filter(v=>!u.includes(v))))},[y]),D=c.useRef(null),S=qe(m=>{if(p&&!n)return Yt;if(!m||m===Yt||h.current!==e||i!=null){const u=new Map;for(let v of e){if(!v)continue;if(i&&i.length>0&&!i.includes(v.id)&&v.rect.current){u.set(v.id,v.rect.current);continue}const E=v.node.current,I=E?new Pt(d(E),E):null;v.rect.current=I,I&&u.set(v.id,I)}return u}return m},[e,i,n,p,d]);return c.useEffect(()=>{h.current=e},[e]),c.useEffect(()=>{p||x()},[n,p]),c.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),c.useEffect(()=>{p||typeof l!="number"||D.current!==null||(D.current=setTimeout(()=>{x(),D.current=null},l))},[l,p,x,...r]),{droppableRects:S,measureDroppableContainers:x,measuringScheduled:i!=null};function C(){switch(f){case Ke.Always:return!1;case Ke.BeforeDragging:return n;default:return!n}}}function kt(e,t){return qe(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Tr(e,t){return kt(e,t)}function Ar(e){let{callback:t,disabled:n}=e;const r=ut(t),s=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return c.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function ht(e){let{callback:t,disabled:n}=e;const r=ut(t),s=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return c.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Nr(e){return new Pt(Me(e),e)}function Xt(e,t,n){t===void 0&&(t=Nr);const[r,s]=c.useState(null);function i(){s(d=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=d??n)!=null?f:null}const h=t(e);return JSON.stringify(d)===JSON.stringify(h)?d:h})}const a=Ar({callback(d){if(e)for(const f of d){const{type:h,target:p}=f;if(h==="childList"&&p instanceof HTMLElement&&p.contains(e)){i();break}}}}),l=ht({callback:i});return ae(()=>{i(),e?(l==null||l.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[e]),r}function Or(e){const t=kt(e);return nn(e,t)}const _t=[];function Mr(e){const t=c.useRef(e),n=qe(r=>e?r&&r!==_t&&e&&t.current&&e.parentNode===t.current.parentNode?r:Rt(e):_t,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function Br(e){const[t,n]=c.useState(null),r=c.useRef(e),s=c.useCallback(i=>{const a=xt(i.target);a&&n(l=>l?(l.set(a,wt(a)),new Map(l)):null)},[]);return c.useEffect(()=>{const i=r.current;if(e!==i){a(i);const l=e.map(d=>{const f=xt(d);return f?(f.addEventListener("scroll",s,{passive:!0}),[f,wt(f)]):null}).filter(d=>d!=null);n(l.length?new Map(l):null),r.current=e}return()=>{a(e),a(i)};function a(l){l.forEach(d=>{const f=xt(d);f==null||f.removeEventListener("scroll",s)})}},[s,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,a)=>Ae(i,a),le):dn(e):le,[e,t])}function Vt(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==le;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?st(e,n.current):le}function zr(e){c.useEffect(()=>{if(!dt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Lr(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=a=>{i(a,t)},n},{}),[e,t])}function pn(e){return c.useMemo(()=>e?cr(e):null,[e])}const Kt=[];function Wr(e,t){t===void 0&&(t=Me);const[n]=e,r=pn(n?X(n):null),[s,i]=c.useState(Kt);function a(){i(()=>e.length?e.map(d=>ln(d)?r:new Pt(t(d),d)):Kt)}const l=ht({callback:a});return ae(()=>{l==null||l.disconnect(),a(),e.forEach(d=>l==null?void 0:l.observe(d))},[e]),s}function gn(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ge(t)?t:e}function Fr(e){let{measure:t}=e;const[n,r]=c.useState(null),s=c.useCallback(f=>{for(const{target:h}of f)if(Ge(h)){r(p=>{const y=t(h);return p?{...p,width:y.width,height:y.height}:y});break}},[t]),i=ht({callback:s}),a=c.useCallback(f=>{const h=gn(f);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?t(h):null)},[t,i]),[l,d]=ot(a);return c.useMemo(()=>({nodeRef:l,rect:n,setRef:d}),[n,l,d])}const $r=[{sensor:Et,options:{}},{sensor:hn,options:{}}],Hr={current:{}},rt={draggable:{measure:Ft},droppable:{measure:Ft,strategy:Ke.WhileDragging,frequency:jt.Optimized},dragOverlay:{measure:Me}};class _e extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Ur={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new _e,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:lt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:rt,measureDroppableContainers:lt,windowRect:null,measuringScheduled:!1},vn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:lt,draggableNodes:new Map,over:null,measureDroppableContainers:lt},Qe=c.createContext(vn),mn=c.createContext(Ur);function Yr(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new _e}}}function Xr(e,t){switch(t.type){case B.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case B.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case B.DragEnd:case B.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case B.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new _e(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case B.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new _e(e.droppable.containers);return a.set(n,{...i,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case B.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new _e(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function _r(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=c.useContext(Qe),i=it(r),a=it(n==null?void 0:n.id);return c.useEffect(()=>{if(!t&&!r&&i&&a!=null){if(!ft(i)||document.activeElement===i.target)return;const l=s.get(a);if(!l)return;const{activatorNode:d,node:f}=l;if(!d.current&&!f.current)return;requestAnimationFrame(()=>{for(const h of[d.current,f.current]){if(!h)continue;const p=Ln(h);if(p){p.focus();break}}})}},[r,t,s,a,i]),null}function xn(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,i)=>i({transform:s,...r}),n):n}function Vr(e){return c.useMemo(()=>({draggable:{...rt.draggable,...e==null?void 0:e.draggable},droppable:{...rt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...rt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Kr(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const i=c.useRef(!1),{x:a,y:l}=typeof s=="boolean"?{x:s,y:s}:s;ae(()=>{if(!a&&!l||!t){i.current=!1;return}if(i.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const h=n(f),p=nn(h,r);if(a||(p.x=0),l||(p.y=0),i.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const y=on(f);y&&y.scrollBy({top:p.y,left:p.x})}},[t,a,l,r,n])}const pt=c.createContext({...le,scaleX:1,scaleY:1});var De;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(De||(De={}));const Gr=c.memo(function(t){var n,r,s,i;let{id:a,accessibility:l,autoScroll:d=!0,children:f,sensors:h=$r,collisionDetection:p=rr,measuring:y,modifiers:x,...D}=t;const S=c.useReducer(Xr,void 0,Yr),[C,m]=S,[u,v]=Yn(),[E,I]=c.useState(De.Uninitialized),g=E===De.Initialized,{draggable:{active:w,nodes:j,translate:k},droppable:{containers:M}}=C,N=w!=null?j.get(w):null,ee=c.useRef({initial:null,translated:null}),te=c.useMemo(()=>{var H;return w!=null?{id:w,data:(H=N==null?void 0:N.data)!=null?H:Hr,rect:ee}:null},[w,N]),L=c.useRef(null),[ce,xe]=c.useState(null),[_,Be]=c.useState(null),de=Ve(D,Object.values(D)),Ee=Je("DndDescribedBy",a),ze=c.useMemo(()=>M.getEnabled(),[M]),U=Vr(y),{droppableRects:V,measureDroppableContainers:K,measuringScheduled:Y}=kr(ze,{dragging:g,dependencies:[k.x,k.y],config:U.droppable}),W=Ir(j,w),ke=c.useMemo(()=>_?at(_):null,[_]),ue=En(),ie=Tr(W,U.draggable.measure);Kr({activeNode:w!=null?j.get(w):null,config:ue.layoutShiftCompensation,initialRect:ie,measure:U.draggable.measure});const A=Xt(W,U.draggable.measure,ie),Pe=Xt(W?W.parentElement:null),ne=c.useRef({activatorEvent:null,active:null,activeNode:W,collisionRect:null,collisions:null,droppableRects:V,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),be=M.getNodeFor((n=ne.current.over)==null?void 0:n.id),se=Fr({measure:U.dragOverlay.measure}),ye=(r=se.nodeRef.current)!=null?r:W,ve=g?(s=se.rect)!=null?s:A:null,Ze=!!(se.nodeRef.current&&se.rect),et=Or(Ze?null:A),Le=pn(ye?X(ye):null),fe=Mr(g?be??W:null),Ie=Wr(fe),b=xn(x,{transform:{x:k.x-et.x,y:k.y-et.y,scaleX:1,scaleY:1},activatorEvent:_,active:te,activeNodeRect:A,containerNodeRect:Pe,draggingNodeRect:ve,over:ne.current.over,overlayNodeRect:se.rect,scrollableAncestors:fe,scrollableAncestorRects:Ie,windowRect:Le}),P=ke?Ae(ke,k):null,R=Br(fe),$=Vt(R),G=Vt(R,[A]),q=Ae(b,$),he=ve?sr(ve,b):null,We=te&&he?p({active:te,collisionRect:he,droppableRects:V,droppableContainers:ze,pointerCoordinates:P}):null,At=er(We,"id"),[we,Nt]=c.useState(null),Cn=Ze?b:Ae(b,G),Dn=or(Cn,(i=we==null?void 0:we.rect)!=null?i:null,A),gt=c.useRef(null),Ot=c.useCallback((H,J)=>{let{sensor:Q,options:Se}=J;if(L.current==null)return;const re=j.get(L.current);if(!re)return;const Z=H.nativeEvent,pe=new Q({active:L.current,activeNode:re,event:Z,options:Se,context:ne,onAbort(F){if(!j.get(F))return;const{onDragAbort:ge}=de.current,me={id:F};ge==null||ge(me),u({type:"onDragAbort",event:me})},onPending(F,je,ge,me){if(!j.get(F))return;const{onDragPending:$e}=de.current,Ce={id:F,constraint:je,initialCoordinates:ge,offset:me};$e==null||$e(Ce),u({type:"onDragPending",event:Ce})},onStart(F){const je=L.current;if(je==null)return;const ge=j.get(je);if(!ge)return;const{onDragStart:me}=de.current,Fe={activatorEvent:Z,active:{id:je,data:ge.data,rect:ee}};Ue.unstable_batchedUpdates(()=>{me==null||me(Fe),I(De.Initializing),m({type:B.DragStart,initialCoordinates:F,active:je}),u({type:"onDragStart",event:Fe}),xe(gt.current),Be(Z)})},onMove(F){m({type:B.DragMove,coordinates:F})},onEnd:Te(B.DragEnd),onCancel:Te(B.DragCancel)});gt.current=pe;function Te(F){return async function(){const{active:ge,collisions:me,over:Fe,scrollAdjustedTranslate:$e}=ne.current;let Ce=null;if(ge&&$e){const{cancelDrop:He}=de.current;Ce={activatorEvent:Z,active:ge,collisions:me,delta:$e,over:Fe},F===B.DragEnd&&typeof He=="function"&&await Promise.resolve(He(Ce))&&(F=B.DragCancel)}L.current=null,Ue.unstable_batchedUpdates(()=>{m({type:F}),I(De.Uninitialized),Nt(null),xe(null),Be(null),gt.current=null;const He=F===B.DragEnd?"onDragEnd":"onDragCancel";if(Ce){const vt=de.current[He];vt==null||vt(Ce),u({type:He,event:Ce})}})}}},[j]),Rn=c.useCallback((H,J)=>(Q,Se)=>{const re=Q.nativeEvent,Z=j.get(Se);if(L.current!==null||!Z||re.dndKit||re.defaultPrevented)return;const pe={active:Z};H(Q,J.options,pe)===!0&&(re.dndKit={capturedBy:J.sensor},L.current=Se,Ot(Q,J))},[j,Ot]),Mt=Er(h,Rn);zr(h),ae(()=>{A&&E===De.Initializing&&I(De.Initialized)},[A,E]),c.useEffect(()=>{const{onDragMove:H}=de.current,{active:J,activatorEvent:Q,collisions:Se,over:re}=ne.current;if(!J||!Q)return;const Z={active:J,activatorEvent:Q,collisions:Se,delta:{x:q.x,y:q.y},over:re};Ue.unstable_batchedUpdates(()=>{H==null||H(Z),u({type:"onDragMove",event:Z})})},[q.x,q.y]),c.useEffect(()=>{const{active:H,activatorEvent:J,collisions:Q,droppableContainers:Se,scrollAdjustedTranslate:re}=ne.current;if(!H||L.current==null||!J||!re)return;const{onDragOver:Z}=de.current,pe=Se.get(At),Te=pe&&pe.rect.current?{id:pe.id,rect:pe.rect.current,data:pe.data,disabled:pe.disabled}:null,F={active:H,activatorEvent:J,collisions:Q,delta:{x:re.x,y:re.y},over:Te};Ue.unstable_batchedUpdates(()=>{Nt(Te),Z==null||Z(F),u({type:"onDragOver",event:F})})},[At]),ae(()=>{ne.current={activatorEvent:_,active:te,activeNode:W,collisionRect:he,collisions:We,droppableRects:V,draggableNodes:j,draggingNode:ye,draggingNodeRect:ve,droppableContainers:M,over:we,scrollableAncestors:fe,scrollAdjustedTranslate:q},ee.current={initial:ve,translated:he}},[te,W,We,he,j,ye,ve,V,M,we,fe,q]),Dr({...ue,delta:k,draggingRect:he,pointerCoordinates:P,scrollableAncestors:fe,scrollableAncestorRects:Ie});const Pn=c.useMemo(()=>({active:te,activeNode:W,activeNodeRect:A,activatorEvent:_,collisions:We,containerNodeRect:Pe,dragOverlay:se,draggableNodes:j,droppableContainers:M,droppableRects:V,over:we,measureDroppableContainers:K,scrollableAncestors:fe,scrollableAncestorRects:Ie,measuringConfiguration:U,measuringScheduled:Y,windowRect:Le}),[te,W,A,_,We,Pe,se,j,M,V,we,K,fe,Ie,U,Y,Le]),In=c.useMemo(()=>({activatorEvent:_,activators:Mt,active:te,activeNodeRect:A,ariaDescribedById:{draggable:Ee},dispatch:m,draggableNodes:j,over:we,measureDroppableContainers:K}),[_,Mt,te,A,m,Ee,j,we,K]);return O.createElement(tn.Provider,{value:v},O.createElement(Qe.Provider,{value:In},O.createElement(mn.Provider,{value:Pn},O.createElement(pt.Provider,{value:Dn},f)),O.createElement(_r,{disabled:(l==null?void 0:l.restoreFocus)===!1})),O.createElement(Vn,{...l,hiddenTextDescribedById:Ee}));function En(){const H=(ce==null?void 0:ce.autoScrollEnabled)===!1,J=typeof d=="object"?d.enabled===!1:d===!1,Q=g&&!H&&!J;return typeof d=="object"?{...d,enabled:Q}:{enabled:Q}}}),qr=c.createContext(null),Gt="button",Jr="Draggable";function Qr(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const i=Je(Jr),{activators:a,activatorEvent:l,active:d,activeNodeRect:f,ariaDescribedById:h,draggableNodes:p,over:y}=c.useContext(Qe),{role:x=Gt,roleDescription:D="draggable",tabIndex:S=0}=s??{},C=(d==null?void 0:d.id)===t,m=c.useContext(C?pt:qr),[u,v]=ot(),[E,I]=ot(),g=Lr(a,t),w=Ve(n);ae(()=>(p.set(t,{id:t,key:i,node:u,activatorNode:E,data:w}),()=>{const k=p.get(t);k&&k.key===i&&p.delete(t)}),[p,t]);const j=c.useMemo(()=>({role:x,tabIndex:S,"aria-disabled":r,"aria-pressed":C&&x===Gt?!0:void 0,"aria-roledescription":D,"aria-describedby":h.draggable}),[r,x,S,C,D,h.draggable]);return{active:d,activatorEvent:l,activeNodeRect:f,attributes:j,isDragging:C,listeners:r?void 0:g,node:u,over:y,setNodeRef:v,setActivatorNodeRef:I,transform:m}}function bn(){return c.useContext(mn)}const Zr="Droppable",eo={timeout:25};function to(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const i=Je(Zr),{active:a,dispatch:l,over:d,measureDroppableContainers:f}=c.useContext(Qe),h=c.useRef({disabled:n}),p=c.useRef(!1),y=c.useRef(null),x=c.useRef(null),{disabled:D,updateMeasurementsFor:S,timeout:C}={...eo,...s},m=Ve(S??r),u=c.useCallback(()=>{if(!p.current){p.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{f(Array.isArray(m.current)?m.current:[m.current]),x.current=null},C)},[C]),v=ht({callback:u,disabled:D||!a}),E=c.useCallback((j,k)=>{v&&(k&&(v.unobserve(k),p.current=!1),j&&v.observe(j))},[v]),[I,g]=ot(E),w=Ve(t);return c.useEffect(()=>{!v||!I.current||(v.disconnect(),p.current=!1,v.observe(I.current))},[I,v]),c.useEffect(()=>(l({type:B.RegisterDroppable,element:{id:r,key:i,disabled:n,node:I,rect:y,data:w}}),()=>l({type:B.UnregisterDroppable,key:i,id:r})),[r]),c.useEffect(()=>{n!==h.current.disabled&&(l({type:B.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,l]),{active:a,rect:y,isOver:(d==null?void 0:d.id)===r,node:I,over:d,setNodeRef:g}}function no(e){let{animation:t,children:n}=e;const[r,s]=c.useState(null),[i,a]=c.useState(null),l=it(n);return!n&&!r&&l&&s(l),ae(()=>{if(!i)return;const d=r==null?void 0:r.key,f=r==null?void 0:r.props.id;if(d==null||f==null){s(null);return}Promise.resolve(t(f,i)).then(()=>{s(null)})},[t,r,i]),O.createElement(O.Fragment,null,n,r?c.cloneElement(r,{ref:a}):null)}const ro={x:0,y:0,scaleX:1,scaleY:1};function oo(e){let{children:t}=e;return O.createElement(Qe.Provider,{value:vn},O.createElement(pt.Provider,{value:ro},t))}const io={position:"fixed",touchAction:"none"},so=e=>ft(e)?"transform 250ms ease":void 0,ao=c.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:a,rect:l,style:d,transform:f,transition:h=so}=e;if(!l)return null;const p=s?f:{...f,scaleX:1,scaleY:1},y={...io,width:l.width,height:l.height,top:l.top,left:l.left,transform:Re.Transform.toString(p),transformOrigin:s&&r?Jn(r,l):void 0,transition:typeof h=="function"?h(r):h,...d};return O.createElement(n,{className:a,style:y,ref:t},i)}),lo=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:i,className:a}=e;if(i!=null&&i.active)for(const[l,d]of Object.entries(i.active))d!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,d));if(i!=null&&i.dragOverlay)for(const[l,d]of Object.entries(i.dragOverlay))d!==void 0&&r.node.style.setProperty(l,d);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[d,f]of Object.entries(s))n.node.style.setProperty(d,f);a!=null&&a.active&&n.node.classList.remove(a.active)}},co=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Re.Transform.toString(t)},{transform:Re.Transform.toString(n)}]},uo={duration:250,easing:"ease",keyframes:co,sideEffects:lo({styles:{active:{opacity:"0"}}})};function fo(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return ut((i,a)=>{if(t===null)return;const l=n.get(i);if(!l)return;const d=l.node.current;if(!d)return;const f=gn(a);if(!f)return;const{transform:h}=X(a).getComputedStyle(a),p=rn(h);if(!p)return;const y=typeof t=="function"?t:ho(t);return un(d,s.draggable.measure),y({active:{id:i,data:l.data,node:d,rect:s.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(f)},droppableContainers:r,measuringConfiguration:s,transform:p})})}function ho(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...uo,...e};return i=>{let{active:a,dragOverlay:l,transform:d,...f}=i;if(!t)return;const h={x:l.rect.left-a.rect.left,y:l.rect.top-a.rect.top},p={scaleX:d.scaleX!==1?a.rect.width*d.scaleX/l.rect.width:1,scaleY:d.scaleY!==1?a.rect.height*d.scaleY/l.rect.height:1},y={x:d.x-h.x,y:d.y-h.y,...p},x=s({...f,active:a,dragOverlay:l,transform:{initial:d,final:y}}),[D]=x,S=x[x.length-1];if(JSON.stringify(D)===JSON.stringify(S))return;const C=r==null?void 0:r({active:a,dragOverlay:l,...f}),m=l.node.animate(x,{duration:t,easing:n,fill:"forwards"});return new Promise(u=>{m.onfinish=()=>{C==null||C(),u()}})}}let qt=0;function po(e){return c.useMemo(()=>{if(e!=null)return qt++,qt},[e])}const go=O.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:a,wrapperElement:l="div",className:d,zIndex:f=999}=e;const{activatorEvent:h,active:p,activeNodeRect:y,containerNodeRect:x,draggableNodes:D,droppableContainers:S,dragOverlay:C,over:m,measuringConfiguration:u,scrollableAncestors:v,scrollableAncestorRects:E,windowRect:I}=bn(),g=c.useContext(pt),w=po(p==null?void 0:p.id),j=xn(a,{activatorEvent:h,active:p,activeNodeRect:y,containerNodeRect:x,draggingNodeRect:C.rect,over:m,overlayNodeRect:C.rect,scrollableAncestors:v,scrollableAncestorRects:E,transform:g,windowRect:I}),k=kt(y),M=fo({config:r,draggableNodes:D,droppableContainers:S,measuringConfiguration:u}),N=k?C.setRef:void 0;return O.createElement(oo,null,O.createElement(no,{animation:M},p&&w?O.createElement(ao,{key:w,id:p.id,ref:N,as:l,activatorEvent:h,adjustScale:t,className:d,transition:i,rect:k,style:{zIndex:f,...s},transform:j},n):null))});function Tt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function vo(e,t){return e.reduce((n,r,s)=>{const i=t.get(r);return i&&(n[s]=i),n},Array(e.length))}function tt(e){return e!==null&&e>=0}function mo(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function xo(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const yn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const i=Tt(t,r,n),a=t[s],l=i[s];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},nt={scaleX:1,scaleY:1},bo=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:a}=e;const l=(t=i[n])!=null?t:r;if(!l)return null;if(s===n){const f=i[a];return f?{x:0,y:n<a?f.top+f.height-(l.top+l.height):f.top-l.top,...nt}:null}const d=yo(i,s,n);return s>n&&s<=a?{x:0,y:-l.height-d,...nt}:s<n&&s>=a?{x:0,y:l.height+d,...nt}:{x:0,y:0,...nt}};function yo(e,t,n){const r=e[t],s=e[t-1],i=e[t+1];return r?n<t?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const wn="Sortable",Sn=O.createContext({activeIndex:-1,containerId:wn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:yn,disabled:{draggable:!1,droppable:!1}});function wo(e){let{children:t,id:n,items:r,strategy:s=yn,disabled:i=!1}=e;const{active:a,dragOverlay:l,droppableRects:d,over:f,measureDroppableContainers:h}=bn(),p=Je(wn,n),y=l.rect!==null,x=c.useMemo(()=>r.map(g=>typeof g=="object"&&"id"in g?g.id:g),[r]),D=a!=null,S=a?x.indexOf(a.id):-1,C=f?x.indexOf(f.id):-1,m=c.useRef(x),u=!mo(x,m.current),v=C!==-1&&S===-1||u,E=xo(i);ae(()=>{u&&D&&h(x)},[u,x,D,h]),c.useEffect(()=>{m.current=x},[x]);const I=c.useMemo(()=>({activeIndex:S,containerId:p,disabled:E,disableTransforms:v,items:x,overIndex:C,useDragOverlay:y,sortedRects:vo(x,d),strategy:s}),[S,p,E.draggable,E.droppable,v,x,C,d,y,s]);return O.createElement(Sn.Provider,{value:I},t)}const So=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return Tt(n,r,s).indexOf(t)},jo=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:i,newIndex:a,previousItems:l,previousContainerId:d,transition:f}=e;return!f||!r||l!==i&&s===a?!1:n?!0:a!==s&&t===d},Co={duration:200,easing:"ease"},jn="transform",Do=Re.Transition.toString({property:jn,duration:0,easing:"linear"}),Ro={roleDescription:"sortable"};function Po(e){let{disabled:t,index:n,node:r,rect:s}=e;const[i,a]=c.useState(null),l=c.useRef(n);return ae(()=>{if(!t&&n!==l.current&&r.current){const d=s.current;if(d){const f=Me(r.current,{ignoreTransform:!0}),h={x:d.left-f.left,y:d.top-f.top,scaleX:d.width/f.width,scaleY:d.height/f.height};(h.x||h.y)&&a(h)}}n!==l.current&&(l.current=n)},[t,n,r,s]),c.useEffect(()=>{i&&a(null)},[i]),i}function Io(e){let{animateLayoutChanges:t=jo,attributes:n,disabled:r,data:s,getNewIndex:i=So,id:a,strategy:l,resizeObserverConfig:d,transition:f=Co}=e;const{items:h,containerId:p,activeIndex:y,disabled:x,disableTransforms:D,sortedRects:S,overIndex:C,useDragOverlay:m,strategy:u}=c.useContext(Sn),v=Eo(r,x),E=h.indexOf(a),I=c.useMemo(()=>({sortable:{containerId:p,index:E,items:h},...s}),[p,s,E,h]),g=c.useMemo(()=>h.slice(h.indexOf(a)),[h,a]),{rect:w,node:j,isOver:k,setNodeRef:M}=to({id:a,data:I,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:g,...d}}),{active:N,activatorEvent:ee,activeNodeRect:te,attributes:L,setNodeRef:ce,listeners:xe,isDragging:_,over:Be,setActivatorNodeRef:de,transform:Ee}=Qr({id:a,data:I,attributes:{...Ro,...n},disabled:v.draggable}),ze=On(M,ce),U=!!N,V=U&&!D&&tt(y)&&tt(C),K=!m&&_,Y=K&&V?Ee:null,ke=V?Y??(l??u)({rects:S,activeNodeRect:te,activeIndex:y,overIndex:C,index:E}):null,ue=tt(y)&&tt(C)?i({id:a,items:h,activeIndex:y,overIndex:C}):E,ie=N==null?void 0:N.id,A=c.useRef({activeId:ie,items:h,newIndex:ue,containerId:p}),Pe=h!==A.current.items,ne=t({active:N,containerId:p,isDragging:_,isSorting:U,id:a,index:E,items:h,newIndex:A.current.newIndex,previousItems:A.current.items,previousContainerId:A.current.containerId,transition:f,wasDragging:A.current.activeId!=null}),be=Po({disabled:!ne,index:E,node:j,rect:w});return c.useEffect(()=>{U&&A.current.newIndex!==ue&&(A.current.newIndex=ue),p!==A.current.containerId&&(A.current.containerId=p),h!==A.current.items&&(A.current.items=h)},[U,ue,p,h]),c.useEffect(()=>{if(ie===A.current.activeId)return;if(ie!=null&&A.current.activeId==null){A.current.activeId=ie;return}const ye=setTimeout(()=>{A.current.activeId=ie},50);return()=>clearTimeout(ye)},[ie]),{active:N,activeIndex:y,attributes:L,data:I,rect:w,index:E,newIndex:ue,items:h,isOver:k,isSorting:U,isDragging:_,listeners:xe,node:j,overIndex:C,over:Be,setNodeRef:ze,setActivatorNodeRef:de,setDroppableNodeRef:M,setDraggableNodeRef:ce,transform:be??ke,transition:se()};function se(){if(be||Pe&&A.current.newIndex===E)return Do;if(!(K&&!ft(ee)||!f)&&(U||ne))return Re.Transition.toString({...f,property:jn})}}function Eo(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}T.Down,T.Right,T.Up,T.Left;const ko=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),To=[{type:"Header",label:"Header"},{type:"AnnouncementBar",label:"Announcement Bar"},{type:"ImageSlider",label:"Image Slider"},{type:"FeaturedProduct",label:"Featured Product"},{type:"ProductCarousel",label:"Product Carousel"},{type:"Spacer",label:"Spacer"},{type:"BannerCTA",label:"Banner with CTA"},{type:"Footer",label:"Footer"}],Ao=[{type:"ProductImageGallery",label:"Product Image Gallery"},{type:"ProductInfo",label:"Product Information"},{type:"ProductVariants",label:"Product Variants"},{type:"ProductDescription",label:"Product Description"},{type:"AddToCart",label:"Add to Cart"},{type:"ProductReviews",label:"Product Reviews"},{type:"RelatedProducts",label:"Related Products"},{type:"Spacer",label:"Spacer"},{type:"BannerCTA",label:"Banner with CTA"}];function No({component:e,onDragStart:t}){return o.jsx("li",{style:{padding:"8px 12px",marginBottom:8,background:"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"grab"},draggable:!0,onDragStart:n=>{n.dataTransfer.setData("component",JSON.stringify(e)),t&&t(e)},children:e.label})}function Oo({id:e,type:t,index:n}){const{attributes:r,listeners:s,setNodeRef:i,transform:a,transition:l,isDragging:d}=Io({id:e}),f={transform:Re.Transform.toString(a),transition:l,opacity:d?.5:1};return o.jsx("div",{ref:i,style:f,...r,...s,children:o.jsxs("div",{style:{padding:16,background:d?"#e0f7fa":"#fafafa",border:"1px solid #ddd",borderRadius:6,marginBottom:12,boxShadow:d?"0 2px 8px rgba(0,0,0,0.12)":void 0},children:[o.jsx("strong",{children:t})," (Component #",n+1,")"]})})}function Mo({item:e,products:t,collections:n,onChange:r}){var f,h,p,y,x,D,S,C,m;if(!e)return null;const{type:s,props:i={}}=e,[a,l]=c.useState(null);c.useEffect(()=>{let u=!0;return zt(()=>import("./index-Cp51y_bg.js").then(v=>v.i),__vite__mapDeps([0,1])).then(v=>{u&&l(()=>v.default),zt(()=>Promise.resolve().then(()=>ko),void 0)}),()=>{u=!1}},[]);const d=u=>{var I;const v=(I=u.target.files)==null?void 0:I[0];if(!v)return;const E=new FileReader;E.onload=g=>{var w;r({...i,image:(w=g.target)==null?void 0:w.result})},E.readAsDataURL(v)};switch(s){case"Header":return o.jsxs("div",{children:[o.jsx("label",{children:"Header Text"}),o.jsx("input",{type:"text",value:i.text||"",onChange:u=>r({...i,text:u.target.value}),style:{width:"100%",marginBottom:12}})]});case"AnnouncementBar":return o.jsxs("div",{children:[o.jsx("label",{children:"Announcement"}),a?o.jsx(a,{theme:"snow",value:i.text||"",onChange:u=>r({...i,text:u}),style:{marginBottom:12}}):o.jsx("div",{children:"Loading editor"})]});case"FeaturedProduct":return o.jsxs("div",{children:[o.jsx("label",{children:"Product"}),o.jsx("select",{value:i.productId||((f=t[0])==null?void 0:f.id)||"",onChange:u=>r({...i,productId:u.target.value}),style:{width:"100%",marginBottom:12},children:t.map(u=>o.jsx("option",{value:u.id,children:u.title},u.id))})]});case"ProductCarousel":return o.jsxs("div",{children:[o.jsx("label",{children:"Collection"}),o.jsx("select",{value:i.collectionId||((h=n[0])==null?void 0:h.id)||"",onChange:u=>r({...i,collectionId:u.target.value}),style:{width:"100%",marginBottom:12},children:n.map(u=>o.jsx("option",{value:u.id,children:u.title},u.id))})]});case"BannerCTA":return o.jsxs("div",{children:[o.jsx("label",{children:"Heading"}),o.jsx("input",{type:"text",value:i.heading||"",onChange:u=>r({...i,heading:u.target.value}),style:{width:"100%",marginBottom:8}}),o.jsx("label",{children:"Subtext"}),a?o.jsx(a,{theme:"snow",value:i.subtext||"",onChange:u=>r({...i,subtext:u}),style:{marginBottom:8}}):o.jsx("div",{children:"Loading editor"}),o.jsx("label",{children:"Button Label"}),o.jsx("input",{type:"text",value:i.button||"",onChange:u=>r({...i,button:u.target.value}),style:{width:"100%",marginBottom:8}}),o.jsx("label",{children:"Image"}),o.jsx("input",{type:"file",accept:"image/*",onChange:d,style:{width:"100%",marginBottom:8,padding:"4px"}}),i.image&&o.jsx("div",{style:{marginTop:8,marginBottom:8},children:o.jsx("img",{src:i.image,alt:"Banner",style:{maxWidth:"100%",borderRadius:8,border:"1px solid #ddd"}})})]});case"ProductImageGallery":return o.jsxs("div",{children:[o.jsx("label",{children:"Product"}),o.jsx("select",{value:i.productId||((p=t[0])==null?void 0:p.id)||"",onChange:u=>r({...i,productId:u.target.value}),style:{width:"100%",marginBottom:12},children:t.map(u=>o.jsx("option",{value:u.id,children:u.title},u.id))}),o.jsx("label",{children:"Gallery Style"}),o.jsxs("select",{value:i.galleryStyle||"grid",onChange:u=>r({...i,galleryStyle:u.target.value}),style:{width:"100%",marginBottom:12},children:[o.jsx("option",{value:"grid",children:"Grid Layout"}),o.jsx("option",{value:"carousel",children:"Carousel"}),o.jsx("option",{value:"masonry",children:"Masonry"})]})]});case"ProductInfo":return o.jsxs("div",{children:[o.jsx("label",{children:"Product"}),o.jsx("select",{value:i.productId||((y=t[0])==null?void 0:y.id)||"",onChange:u=>r({...i,productId:u.target.value}),style:{width:"100%",marginBottom:12},children:t.map(u=>o.jsx("option",{value:u.id,children:u.title},u.id))}),o.jsx("label",{children:"Show Price"}),o.jsx("input",{type:"checkbox",checked:i.showPrice!==!1,onChange:u=>r({...i,showPrice:u.target.checked}),style:{marginBottom:12}}),o.jsx("label",{children:"Show SKU"}),o.jsx("input",{type:"checkbox",checked:i.showSku!==!1,onChange:u=>r({...i,showSku:u.target.checked}),style:{marginBottom:12}})]});case"ProductVariants":return o.jsxs("div",{children:[o.jsx("label",{children:"Product"}),o.jsx("select",{value:i.productId||((x=t[0])==null?void 0:x.id)||"",onChange:u=>r({...i,productId:u.target.value}),style:{width:"100%",marginBottom:12},children:t.map(u=>o.jsx("option",{value:u.id,children:u.title},u.id))}),o.jsx("label",{children:"Variant Display"}),o.jsxs("select",{value:i.variantDisplay||"dropdown",onChange:u=>r({...i,variantDisplay:u.target.value}),style:{width:"100%",marginBottom:12},children:[o.jsx("option",{value:"dropdown",children:"Dropdown"}),o.jsx("option",{value:"buttons",children:"Buttons"}),o.jsx("option",{value:"swatches",children:"Color Swatches"})]})]});case"ProductDescription":return o.jsxs("div",{children:[o.jsx("label",{children:"Product"}),o.jsx("select",{value:i.productId||((D=t[0])==null?void 0:D.id)||"",onChange:u=>r({...i,productId:u.target.value}),style:{width:"100%",marginBottom:12},children:t.map(u=>o.jsx("option",{value:u.id,children:u.title},u.id))}),o.jsx("label",{children:"Show Full Description"}),o.jsx("input",{type:"checkbox",checked:i.showFullDescription!==!1,onChange:u=>r({...i,showFullDescription:u.target.checked}),style:{marginBottom:12}})]});case"AddToCart":return o.jsxs("div",{children:[o.jsx("label",{children:"Product"}),o.jsx("select",{value:i.productId||((S=t[0])==null?void 0:S.id)||"",onChange:u=>r({...i,productId:u.target.value}),style:{width:"100%",marginBottom:12},children:t.map(u=>o.jsx("option",{value:u.id,children:u.title},u.id))}),o.jsx("label",{children:"Button Style"}),o.jsxs("select",{value:i.buttonStyle||"primary",onChange:u=>r({...i,buttonStyle:u.target.value}),style:{width:"100%",marginBottom:12},children:[o.jsx("option",{value:"primary",children:"Primary"}),o.jsx("option",{value:"secondary",children:"Secondary"}),o.jsx("option",{value:"outline",children:"Outline"})]}),o.jsx("label",{children:"Show Quantity Selector"}),o.jsx("input",{type:"checkbox",checked:i.showQuantity!==!1,onChange:u=>r({...i,showQuantity:u.target.checked}),style:{marginBottom:12}})]});case"ProductReviews":return o.jsxs("div",{children:[o.jsx("label",{children:"Product"}),o.jsx("select",{value:i.productId||((C=t[0])==null?void 0:C.id)||"",onChange:u=>r({...i,productId:u.target.value}),style:{width:"100%",marginBottom:12},children:t.map(u=>o.jsx("option",{value:u.id,children:u.title},u.id))}),o.jsx("label",{children:"Show Rating"}),o.jsx("input",{type:"checkbox",checked:i.showRating!==!1,onChange:u=>r({...i,showRating:u.target.checked}),style:{marginBottom:12}}),o.jsx("label",{children:"Show Review Count"}),o.jsx("input",{type:"checkbox",checked:i.showReviewCount!==!1,onChange:u=>r({...i,showReviewCount:u.target.checked}),style:{marginBottom:12}})]});case"RelatedProducts":return o.jsxs("div",{children:[o.jsx("label",{children:"Collection"}),o.jsx("select",{value:i.collectionId||((m=n[0])==null?void 0:m.id)||"",onChange:u=>r({...i,collectionId:u.target.value}),style:{width:"100%",marginBottom:12},children:n.map(u=>o.jsx("option",{value:u.id,children:u.title},u.id))}),o.jsx("label",{children:"Number of Products"}),o.jsx("input",{type:"number",value:i.productCount||4,min:1,max:12,onChange:u=>r({...i,productCount:Number(u.target.value)}),style:{width:"100%",marginBottom:12}})]});case"Spacer":return o.jsxs("div",{children:[o.jsx("label",{children:"Height (px)"}),o.jsx("input",{type:"number",value:i.height||40,min:8,max:200,onChange:u=>r({...i,height:Number(u.target.value)}),style:{width:"100%",marginBottom:12}})]});default:return o.jsx("div",{children:"No editable properties."})}}function Bo({items:e,products:t,collections:n,designType:r}){const[s,i]=O.useState("main"),[a,l]=O.useState(null),[d,f]=c.useState(null),[h,p]=c.useState(!1),[y,x]=c.useState(!1),D=m=>{l(m),i("product")},S=()=>{i("main"),l(null)},C=async m=>{x(!0);try{let u=d,v;m.variants&&m.variants.length>0?v=m.variants[0].id:v=m.id,d?u=await Qt(d.id,v,1):u=await Jt(v,1),f(u),p(!0)}catch(u){alert("Failed to add to cart: "+(u instanceof Error?u.message:String(u)))}finally{x(!1)}};return o.jsxs("div",{style:{width:320,height:640,border:"1px solid #aaa",borderRadius:24,background:"#fff",margin:"0 auto",boxShadow:"0 4px 24px rgba(0,0,0,0.08)",overflow:"hidden",display:"flex",flexDirection:"column",marginTop:24,marginBottom:24},children:[o.jsx("div",{style:{height:32,background:"#f5f5f5",borderBottom:"1px solid #eee",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,color:"#888"},children:"9:41 AM | 100% "}),o.jsx("div",{style:{flex:1,overflowY:"auto",WebkitOverflowScrolling:"touch"},children:s==="main"?e.length===0?o.jsxs("div",{style:{color:"#bbb",textAlign:"center",marginTop:120},children:[o.jsx("p",{children:"App preview will appear here."}),o.jsxs("p",{style:{fontSize:"12px",marginTop:"8px",color:"#999"},children:["Currently viewing: ",r==="homepage"?"Homepage":"Product Detail Page"]})]}):e.map((m,u)=>{var E,I;const v=m.props||{};switch(m.type){case"Header":return o.jsx("div",{style:{padding:"16px 20px",borderBottom:"1px solid #eee"},children:o.jsx("h1",{style:{margin:0,fontSize:24,fontWeight:700},children:v.text||"Your Store"})},m.id);case"AnnouncementBar":return o.jsx("div",{style:{padding:"8px 16px",background:"#000",color:"#fff",fontSize:13,textAlign:"center"},children:o.jsx("span",{dangerouslySetInnerHTML:{__html:v.text||" Free shipping on orders over $50!"}})},m.id);case"ImageSlider":return o.jsx("div",{style:{height:200,background:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("p",{style:{color:"#999"},children:"Image Slider"})},m.id);case"FeaturedProduct":{const g=t.find(w=>w.id===v.productId)||t[0];return g?o.jsxs("div",{style:{padding:16},children:[o.jsx("div",{style:{background:"#f5f5f5",height:240,borderRadius:8,marginBottom:12,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>D(g),children:g.image?o.jsx("img",{src:g.image,alt:g.title,style:{maxHeight:200,maxWidth:"100%",borderRadius:8}}):o.jsx("span",{style:{color:"#999"},children:"Product Image"})}),o.jsx("h3",{style:{margin:"0 0 4px",fontSize:18,cursor:"pointer"},onClick:()=>D(g),children:g.title}),o.jsx("p",{style:{margin:"0 0 12px",color:"#666"},children:g.description}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[o.jsxs("span",{style:{fontSize:20,fontWeight:600},children:["$",g.price]}),o.jsx("button",{style:{background:"#1976d2",color:"#fff",border:"none",padding:"8px 16px",borderRadius:6,cursor:"pointer"},onClick:()=>C(g),children:"Add to Cart"})]})]},m.id):null}case"ProductCarousel":{const g=n.find(j=>j.id===v.collectionId)||n[0],w=(E=g==null?void 0:g.products)!=null&&E.length?g.products:t.slice(0,3);return o.jsxs("div",{style:{padding:"16px 0"},children:[o.jsx("h3",{style:{margin:"0 16px 12px",fontSize:16},children:(g==null?void 0:g.title)||"Featured Products"}),o.jsx("div",{style:{display:"flex",overflowX:"auto",gap:12,padding:"0 16px"},children:w.map(j=>o.jsxs("div",{style:{flex:"0 0 140px",cursor:"pointer"},onClick:()=>D(j),children:[o.jsx("div",{style:{background:"#f5f5f5",height:140,borderRadius:8,marginBottom:8,display:"flex",alignItems:"center",justifyContent:"center"},children:j.image?o.jsx("img",{src:j.image,alt:j.title,style:{maxHeight:120,maxWidth:"100%",borderRadius:8}}):o.jsx("span",{style:{color:"#999"},children:"Image"})}),o.jsx("h4",{style:{margin:"0 0 4px",fontSize:14},children:j.title}),o.jsxs("p",{style:{margin:0,fontSize:14,fontWeight:600},children:["$",j.price]})]},j.id))})]},m.id)}case"Spacer":return o.jsx("div",{style:{height:v.height||40}},m.id);case"ProductImageGallery":{const g=t.find(w=>w.id===v.productId)||t[0];return g?o.jsxs("div",{style:{padding:"16px"},children:[o.jsx("div",{style:{background:"#f5f5f5",height:300,borderRadius:8,marginBottom:12,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:g.image?o.jsx("img",{src:g.image,alt:g.title,style:{maxHeight:"100%",maxWidth:"100%",objectFit:"cover",borderRadius:8}}):o.jsx("span",{style:{color:"#999"},children:"Product Image Gallery"})}),o.jsxs("div",{style:{fontSize:12,color:"#666",textAlign:"center"},children:["Gallery Style: ",v.galleryStyle||"grid"]})]},m.id):null}case"ProductInfo":{const g=t.find(w=>w.id===v.productId)||t[0];return g?o.jsxs("div",{style:{padding:"16px"},children:[o.jsx("h1",{style:{margin:"0 0 8px",fontSize:24,fontWeight:600,color:"#333"},children:g.title}),v.showPrice!==!1&&o.jsx("div",{style:{marginBottom:"16px"},children:o.jsxs("span",{style:{fontSize:28,fontWeight:700,color:"#1976d2"},children:["$",g.price||"0.00"]})}),v.showSku!==!1&&o.jsxs("div",{style:{fontSize:14,color:"#666",marginBottom:8},children:["SKU: ",g.id]})]},m.id):null}case"ProductVariants":return t.find(w=>w.id===v.productId)||t[0]?o.jsxs("div",{style:{padding:"16px"},children:[o.jsx("h3",{style:{margin:"0 0 12px",fontSize:16},children:"Product Variants"}),o.jsxs("div",{style:{padding:"12px",background:"#f9f9f9",borderRadius:6,fontSize:14,color:"#666"},children:["Variant Display: ",v.variantDisplay||"dropdown"]})]},m.id):null;case"ProductDescription":{const g=t.find(w=>w.id===v.productId)||t[0];return g?o.jsxs("div",{style:{padding:"16px"},children:[o.jsx("h3",{style:{margin:"0 0 12px",fontSize:16},children:"Product Description"}),g.description&&o.jsx("p",{style:{margin:"0 0 16px",color:"#666",lineHeight:1.5,fontSize:14},children:v.showFullDescription!==!1?g.description:g.description.substring(0,100)+"..."})]},m.id):null}case"AddToCart":{const g=t.find(w=>w.id===v.productId)||t[0];return g?o.jsx("div",{style:{padding:"16px"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:16},children:[v.showQuantity!==!1&&o.jsxs(o.Fragment,{children:[o.jsx("label",{style:{fontSize:14,fontWeight:500,color:"#333"},children:"Qty:"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",border:"1px solid #ddd",borderRadius:6,overflow:"hidden"},children:[o.jsx("button",{style:{padding:"8px 12px",border:"none",background:"#f5f5f5",cursor:"pointer"},children:"-"}),o.jsx("span",{style:{padding:"8px 12px",borderLeft:"1px solid #ddd",borderRight:"1px solid #ddd"},children:"1"}),o.jsx("button",{style:{padding:"8px 12px",border:"none",background:"#f5f5f5",cursor:"pointer"},children:"+"})]})]}),o.jsx("button",{style:{padding:"12px 24px",background:v.buttonStyle==="outline"?"transparent":"#1976d2",color:v.buttonStyle==="outline"?"#1976d2":"#fff",border:v.buttonStyle==="outline"?"2px solid #1976d2":"none",borderRadius:6,cursor:"pointer",fontWeight:600},onClick:()=>C(g),children:"Add to Cart"})]})},m.id):null}case"ProductReviews":return t.find(w=>w.id===v.productId)||t[0]?o.jsxs("div",{style:{padding:"16px"},children:[o.jsx("h3",{style:{margin:"0 0 12px",fontSize:16},children:"Product Reviews"}),o.jsxs("div",{style:{padding:"12px",background:"#f9f9f9",borderRadius:6,fontSize:14,color:"#666"},children:[v.showRating!==!1&&o.jsx("div",{children:"     (4.5)"}),v.showReviewCount!==!1&&o.jsx("div",{style:{marginTop:4},children:"Based on 24 reviews"})]})]},m.id):null;case"RelatedProducts":{const g=n.find(j=>j.id===v.collectionId)||n[0],w=(I=g==null?void 0:g.products)!=null&&I.length?g.products:t.slice(0,v.productCount||4);return o.jsxs("div",{style:{padding:"16px"},children:[o.jsx("h3",{style:{margin:"0 0 12px",fontSize:16},children:"Related Products"}),o.jsx("div",{style:{display:"flex",overflowX:"auto",gap:12},children:w.map(j=>o.jsxs("div",{style:{flex:"0 0 120px",cursor:"pointer"},onClick:()=>D(j),children:[o.jsx("div",{style:{background:"#f5f5f5",height:120,borderRadius:8,marginBottom:8,display:"flex",alignItems:"center",justifyContent:"center"},children:j.image?o.jsx("img",{src:j.image,alt:j.title,style:{maxHeight:100,maxWidth:"100%",borderRadius:8}}):o.jsx("span",{style:{color:"#999"},children:"Image"})}),o.jsx("h4",{style:{margin:"0 0 4px",fontSize:12},children:j.title}),o.jsxs("p",{style:{margin:0,fontSize:12,fontWeight:600},children:["$",j.price]})]},j.id))})]},m.id)}case"BannerCTA":return o.jsxs("div",{style:{margin:"16px",padding:"24px",background:"#f5f5f5",borderRadius:8,textAlign:"center"},children:[v.image&&o.jsx("img",{src:v.image,alt:"Banner",style:{maxWidth:"100%",borderRadius:8,marginBottom:12}}),o.jsx("h3",{style:{margin:"0 0 8px",fontSize:18},children:v.heading||"Special Offer"}),o.jsx("div",{style:{margin:"0 0 16px",color:"#666"},children:o.jsx("span",{dangerouslySetInnerHTML:{__html:v.subtext||"Get 20% off your first order!"}})}),o.jsx("button",{style:{background:"#1976d2",color:"#fff",border:"none",padding:"8px 24px",borderRadius:6,cursor:"pointer"},children:v.button||"Shop Now"})]},m.id);case"Footer":return o.jsx("div",{style:{padding:"24px 16px",background:"#f5f5f5",marginTop:"auto"},children:o.jsx("div",{style:{borderTop:"1px solid #ddd",paddingTop:16,fontSize:13,color:"#666",textAlign:"center"},children:" 2024 Your Store. All rights reserved."})},m.id);default:return null}}):a&&o.jsxs("div",{style:{padding:16},children:[o.jsx("button",{onClick:S,style:{marginBottom:16,background:"none",border:"none",color:"#1976d2",fontWeight:600,fontSize:16,cursor:"pointer"},children:" Back"}),o.jsx("div",{style:{background:"#f5f5f5",height:240,borderRadius:8,marginBottom:12,display:"flex",alignItems:"center",justifyContent:"center"},children:a.image?o.jsx("img",{src:a.image,alt:a.title,style:{maxHeight:200,maxWidth:"100%",borderRadius:8}}):o.jsx("span",{style:{color:"#999"},children:"Product Image"})}),o.jsx("h3",{style:{margin:"0 0 4px",fontSize:18},children:a.title}),o.jsx("p",{style:{margin:"0 0 12px",color:"#666"},children:a.description}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[o.jsxs("span",{style:{fontSize:20,fontWeight:600},children:["$",a.price]}),a.inventory!==void 0&&o.jsx("span",{style:{fontSize:14,color:a.inventory>0?"#4caf50":"#f44336",fontWeight:500},children:a.inventory>0?`${a.inventory} in stock`:"Out of stock"})]}),o.jsx("button",{onClick:async()=>{x(!0);let m=d,u;a.variants&&a.variants.length>0?u=a.variants[0].id:u=a.id,d?m=await Qt(d.id,u,1):m=await Jt(u,1),f(m),p(!0)},disabled:y,style:{width:"100%",background:"#1976d2",color:"#fff",border:"none",padding:"12px 24px",borderRadius:6,cursor:"pointer",fontSize:16,fontWeight:600,marginBottom:12},children:y?"Adding...":"Add to Cart"}),o.jsx("button",{style:{width:"100%",background:"#fff",color:"#1976d2",border:"1px solid #1976d2",padding:"12px 24px",borderRadius:6,cursor:"pointer",fontSize:16,fontWeight:600},children:"Buy Now"})]})}),h&&d&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:24,minWidth:320,maxWidth:400},children:[o.jsx("h3",{children:"Cart"}),o.jsx("ul",{style:{listStyle:"none",padding:0},children:d.lines.edges.map(m=>o.jsxs("li",{style:{marginBottom:12},children:[o.jsx("div",{children:o.jsx("b",{children:m.node.merchandise.product.title})}),o.jsxs("div",{children:["Variant: ",m.node.merchandise.title]}),o.jsxs("div",{children:["Qty: ",m.node.quantity]})]},m.node.id))}),o.jsx("button",{onClick:()=>window.open(d.checkoutUrl,"_blank"),style:{width:"100%",background:"#1976d2",color:"#fff",border:"none",padding:"12px 24px",borderRadius:6,cursor:"pointer",fontSize:16,fontWeight:600,marginBottom:12},children:"Checkout"}),o.jsx("button",{onClick:()=>p(!1),style:{width:"100%",background:"#eee",color:"#333",border:"none",padding:"12px 24px",borderRadius:6,cursor:"pointer",fontSize:16,fontWeight:600},children:"Close"})]})})]})}async function Jt(e,t=1){const r=await(await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"createCart",variantId:e,quantity:t})})).json();if(r.error)throw new Error(r.error);return r.cartCreate.cart}async function Qt(e,t,n=1){const s=await(await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"addToCart",cartId:e,variantId:t,quantity:n})})).json();if(s.error)throw new Error(s.error);return s.cartLinesAdd.cart}function $o(){var Ie;const{products:e,collections:t}=kn(),[n,r]=c.useState("homepage"),[s,i]=c.useState([]),[a,l]=c.useState([]),[d,f]=c.useState(null),[h,p]=c.useState(null),[y,x]=c.useState(!1),[D,S]=c.useState(!1),[C,m]=c.useState(!1),[u,v]=c.useState([]),[E,I]=c.useState(!1),[g,w]=c.useState(null),[j,k]=c.useState(null),[M,N]=c.useState(!1),[ee,te]=c.useState(null),[L,ce]=c.useState(!1),xe=c.useRef(null),[_,Be]=c.useState(null),[de,Ee]=c.useState(!1),[ze,U]=c.useState(!1),[V,K]=c.useState(""),Y=n==="homepage"?s:a,W=n==="homepage"?i:l,ke=n==="homepage"?To:Ao,ue=Gn(Kn(Et,{activationConstraint:{distance:8}})),ie=b=>{f(b.active.id)},A=b=>{const{active:P,over:R}=b;R&&P.id!==R.id&&W($=>{const G=$.findIndex(he=>he.id===P.id),q=$.findIndex(he=>he.id===R.id);return Tt($,G,q)}),f(null)},Pe=b=>{b.preventDefault();const P=b.dataTransfer.getData("component");if(console.log("Drop event:",{componentData:P}),P){const R=JSON.parse(P),$={id:`${R.type}-${Date.now()}`,type:R.type,props:{}};console.log("Adding new item:",$),W(G=>{const q=[...G,$];return console.log("Updated items:",q),q})}},ne=b=>p(b),be=()=>p(null),se=(b,P)=>{W(R=>R.map($=>$.id===b?{...$,props:P}:$))},ye=async()=>{const b=V.trim()||"Untitled";if(b.length===0){w("Template name cannot be empty");return}if(Y.length===0){w("Cannot save empty template. Add some components first.");return}w(null);try{console.log("Saving template:",{name:b,data:Y,designType:n});const P=await fetch("/api/templates/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:b,data:Y,designType:n})}),R=await P.json();console.log("Save response:",{status:P.status,data:R}),P.ok?(w(R.message||"Saved!"),K("")):w(R.error||"Failed to save")}catch(P){console.error("Save error:",P),w("Failed to save")}},ve=async()=>{I(!0),k(null);try{const b=await fetch("/api/templates/load"),P=await b.json();if(b.ok){const R=P.filter(G=>G.data&&Array.isArray(G.data)&&G.data.length>0).sort((G,q)=>new Date(q.updatedAt).getTime()-new Date(G.updatedAt).getTime());v(R);const $=R.filter(G=>G.designType===n);R.length===0?k("No templates found. Create and save a template first."):$.length===0&&k(`No ${n==="homepage"?"Homepage":"PDP"} templates found. Try switching design type or create a new template.`)}else k(P.error||"Failed to load templates")}catch{k("Failed to load templates")}I(!1)},Ze=async b=>{k(null);try{const P=await fetch(`/api/templates/load?id=${b}`),R=await P.json();P.ok&&R.data?(R.designType==="pdp"?(l(R.data),r("pdp")):(i(R.data),r("homepage")),K(R.name||""),xe.current&&(xe.current.value=R.name||""),m(!1)):k(R.error||"Failed to load template")}catch{k("Failed to load template")}},et=async(b,P)=>{if(confirm(`Are you sure you want to delete template "${P}"?`))try{const R=await fetch(`/api/templates/delete?id=${b}`,{method:"DELETE"}),$=await R.json();R.ok?(ve(),k(`Template "${P}" deleted successfully`)):k($.error||"Failed to delete template")}catch{k("Failed to delete template")}},Le=b=>{r(b),p(null),K("")},fe=async()=>{const b=!L;if(b&&a.length===0){w("Please add some components to your Product Detail Page design before activating it.");return}w("Updating PDP status..."),ce(b);try{const P=await fetch("/api/pdp/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:b,designData:a})}),R=await P.json();P.ok?(w(R.message||`PDP design ${b?"activated":"deactivated"} successfully`),setTimeout(()=>w(null),3e3),console.log("PDP status updated:",R)):(ce(!b),w(`Failed to update PDP status: ${R.error||"Unknown error"}`),console.error("Failed to update PDP status:",R))}catch(P){ce(!b),w("Network error while updating PDP status"),console.error("Error updating PDP status:",P)}};return c.useEffect(()=>{(async()=>{try{const P=await fetch("/api/pdp/status");if(P.ok){const R=await P.json();ce(R.active||!1),R.designData&&R.designData.length>0&&l(R.designData)}}catch(P){console.error("Error loading PDP status:",P)}})()},[]),o.jsxs(Tn,{children:[o.jsx("style",{children:`
        .builder-root {
          width: 100vw;
          min-height: 100vh;
          background: #f5f6fa;
        }
        .builder-controls {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px 8px 0 8px;
          background: #f5f6fa;
          position: sticky;
          top: 0;
          z-index: 10;
        }
        .design-selector {
          display: flex;
          align-items: center;
          gap: 8px;
          background: #fff;
          padding: 8px 12px;
          border-radius: 8px;
          border: 1px solid #ddd;
          box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .design-selector label {
          font-weight: 600;
          color: #333;
          font-size: 14px;
        }
        .design-selector select {
          padding: 4px 8px;
          border: 1px solid #ccc;
          border-radius: 4px;
          background: #fff;
          font-size: 14px;
          cursor: pointer;
        }
        .builder-grid {
          display: grid;
          grid-template-columns: 220px 1.5fr 260px 340px;
          gap: 16px;
          align-items: stretch;
          width: 100vw;
          min-height: 0;
          height: calc(100vh - 56px);
          overflow-x: auto;
        }
        @media (max-width: 1200px) {
          .builder-grid {
            grid-template-columns: 48px 1fr 48px 1fr;
          }
        }
        @media (max-width: 900px) {
          .builder-grid {
            grid-template-columns: 1fr;
            gap: 10px;
            height: auto;
            overflow-x: visible;
          }
          .builder-panel, .builder-canvas, .builder-preview {
            min-width: 0 !important;
            width: 100% !important;
            max-width: 100vw !important;
            height: auto !important;
            max-height: none !important;
          }
        }
        .builder-panel, .builder-canvas, .builder-preview {
          height: 100%;
          max-height: 100vh;
          display: flex;
          flex-direction: column;
          min-height: 0;
          background: #fff;
          border-radius: 12px;
          box-shadow: 0 2px 8px rgba(0,0,0,0.04);
          border: 1px solid #ececec;
          overflow: hidden;
        }
        .panel-content {
          flex: 1 1 0;
          overflow-y: auto;
          min-height: 0;
          padding: 8px 12px;
        }
        .sticky-header {
          position: sticky;
          top: 0;
          background: #fff;
          z-index: 2;
          padding-bottom: 8px;
        }
        .collapse-btn {
          background: none;
          border: none;
          cursor: pointer;
          font-size: 18px;
          color: #888;
          float: right;
          margin-left: 8px;
        }
        .collapsed-bar {
          display: flex;
          align-items: center;
          justify-content: center;
          height: 48px;
          background: #fff;
          border-radius: 12px;
          box-shadow: 0 2px 8px rgba(0,0,0,0.04);
          border: 1px solid #ececec;
          margin-bottom: 8px;
        }
        @media (max-width: 700px) {
          .builder-controls {
            flex-direction: column;
            align-items: stretch;
            gap: 8px;
            padding: 8px 4px 0 4px;
          }
          .builder-grid {
            grid-template-columns: 1fr;
            gap: 8px;
            height: auto;
          }
          .builder-panel, .builder-canvas, .builder-preview {
            border-radius: 8px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.04);
            padding: 0 !important;
          }
          .panel-content {
            padding: 6px 4px;
          }
        }
      `}),o.jsxs("div",{className:"builder-root",children:[o.jsxs("div",{className:"builder-controls",children:[o.jsxs("div",{className:"design-selector",children:[o.jsx("label",{children:"Design:"}),o.jsxs("select",{value:n,onChange:b=>Le(b.target.value),children:[o.jsx("option",{value:"homepage",children:"Homepage"}),o.jsx("option",{value:"pdp",children:"Product Detail Page"})]})]}),n==="pdp"&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("label",{style:{fontSize:14,fontWeight:600,color:"#333"},children:"PDP Status:"}),o.jsx("button",{onClick:fe,style:{padding:"6px 12px",borderRadius:6,background:L?"#4caf50":"#f44336",color:"#fff",border:"none",fontWeight:600,cursor:"pointer",fontSize:12},children:L?"Active":"Inactive"}),L&&e.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("a",{href:`/products/${e[0].handle||"sample-product"}?title=${encodeURIComponent(e[0].title||"Sample Product")}&price=${e[0].price||"29.99"}&image=${encodeURIComponent(e[0].image||"")}&description=${encodeURIComponent(e[0].description||"Product description")}`,target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",borderRadius:6,background:"#1976d2",color:"#fff",border:"none",fontWeight:600,cursor:"pointer",fontSize:12,textDecoration:"none",marginRight:8},children:"Test PDP"}),o.jsx("button",{onClick:()=>alert(` Your PDP is ACTIVE! (${a.length} components)

 How to test:
1. Click "Test PDP" button  Opens your custom design
2. Status indicator will show "Custom PDP Design Active"

 Important:
 Your custom PDP only works in the APP
 Regular store URLs show the default theme
 App URLs show your custom design

 If seeing default view:
 Make sure PDP status shows "Active" (green)
 Check you have components in your design
 Use the "Test PDP" button, not store URLs`),style:{padding:"6px 12px",borderRadius:6,background:"#ff9800",color:"#fff",border:"none",fontWeight:600,cursor:"pointer",fontSize:12},children:" How to Test"})]}),!L&&a.length>0&&o.jsx("span",{style:{fontSize:12,color:"#f44336",background:"#ffebee",padding:"4px 8px",borderRadius:4,fontWeight:600},children:' PDP Inactive - Click "Inactive" to activate'}),!L&&a.length===0&&o.jsx("span",{style:{fontSize:12,color:"#666",background:"#f5f5f5",padding:"4px 8px",borderRadius:4,fontWeight:600},children:" Add PDP components first, then activate"})]}),o.jsx("input",{ref:xe,type:"text",placeholder:`${n==="homepage"?"Homepage":"PDP"} template name`,value:V,onChange:b=>K(b.target.value),style:{padding:6,borderRadius:6,border:"1px solid #ccc",minWidth:120,flex:1}}),o.jsx("button",{onClick:ye,style:{padding:"8px 18px",borderRadius:6,background:"#1976d2",color:"#fff",border:"none",fontWeight:600,cursor:"pointer"},children:"Save"}),o.jsx("button",{onClick:()=>{m(!0),ve()},style:{padding:"8px 18px",borderRadius:6,background:"#fff",color:"#1976d2",border:"1px solid #1976d2",fontWeight:600,cursor:"pointer"},children:"Load"}),o.jsx("button",{onClick:()=>{W([]),K(""),p(null)},style:{padding:"8px 18px",borderRadius:6,background:"#fff",color:"#f44336",border:"1px solid #f44336",fontWeight:600,cursor:"pointer"},children:"Clear"}),V&&o.jsxs("span",{style:{fontSize:12,color:"#4caf50",background:"#e8f5e8",padding:"4px 8px",borderRadius:4,fontWeight:600},children:[" ",n==="homepage"?"Homepage":"PDP"," Template Loaded"]}),g&&o.jsx("span",{style:{marginLeft:8,color:g.includes("success")||g==="Saved!"?"green":"red",fontSize:14},children:g})]}),C&&o.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.18)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:32,minWidth:400,maxWidth:500,boxShadow:"0 4px 24px rgba(0,0,0,0.12)"},children:[o.jsxs("h3",{style:{margin:"0 0 18px",fontSize:18},children:["Load Template (",n==="homepage"?"Homepage":"Product Detail Page",")"]}),E?o.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading templates..."}):o.jsx(o.Fragment,{children:u.filter(b=>b.designType===n).length===0?o.jsxs("div",{style:{color:"#bbb",textAlign:"center",padding:"20px"},children:[o.jsxs("p",{children:["No ",n==="homepage"?"Homepage":"PDP"," templates found."]}),o.jsxs("p",{style:{fontSize:"14px",marginTop:"8px"},children:["Create and save a ",n==="homepage"?"homepage":"PDP"," template first."]})]}):o.jsx("div",{style:{maxHeight:300,overflowY:"auto"},children:o.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:u.filter(b=>b.designType===n).map(b=>{var P;return o.jsxs("li",{style:{marginBottom:12,padding:"12px",border:"1px solid #eee",borderRadius:8,background:"#fafafa"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[o.jsx("span",{style:{fontWeight:600,fontSize:16},children:b.name}),o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{onClick:()=>Ze(b.id),style:{padding:"8px 16px",borderRadius:6,background:"#1976d2",color:"#fff",border:"none",fontWeight:600,cursor:"pointer",fontSize:14},children:"Load"}),o.jsx("button",{onClick:()=>et(b.id,b.name),style:{padding:"8px 16px",borderRadius:6,background:"#f44336",color:"#fff",border:"none",fontWeight:600,cursor:"pointer",fontSize:14},children:"Delete"})]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:12,color:"#666"},children:[o.jsxs("span",{children:[o.jsx("strong",{children:"Type:"})," ",b.designType==="pdp"?"Product Detail Page":"Homepage"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Components:"})," ",((P=b.data)==null?void 0:P.length)||0]})]}),o.jsxs("div",{style:{fontSize:12,color:"#888",marginTop:4},children:["Last updated: ",new Date(b.updatedAt).toLocaleString()]})]},b.id)})})})}),j&&o.jsx("div",{style:{color:j.includes("No templates")?"#666":"red",marginTop:12,padding:"8px 12px",background:j.includes("No templates")?"#f5f5f5":"#ffebee",borderRadius:6,fontSize:14},children:j}),o.jsx("button",{onClick:()=>m(!1),style:{marginTop:18,padding:"8px 20px",borderRadius:6,background:"#eee",color:"#333",border:"none",fontWeight:600,cursor:"pointer",width:"100%"},children:"Close"})]})}),o.jsxs("div",{className:"builder-grid",children:[o.jsx("div",{className:"builder-panel",children:y?o.jsx("div",{className:"collapsed-bar",children:o.jsx("button",{className:"collapse-btn",title:"Expand",onClick:()=>x(!1),children:""})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"sticky-header",style:{display:"flex",alignItems:"center",marginBottom:8},children:[o.jsx("h3",{style:{margin:0,fontSize:16,fontWeight:700,flex:1},children:"Components"}),o.jsx("button",{className:"collapse-btn",title:"Collapse",onClick:()=>x(!0),children:""})]}),o.jsx("div",{className:"panel-content",children:o.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:ke.map(b=>o.jsx(No,{component:b},b.type))})})]})}),o.jsxs("div",{className:"builder-canvas",children:[o.jsx("div",{className:"sticky-header",style:{marginBottom:8},children:o.jsxs("h3",{style:{margin:0,fontSize:16,fontWeight:700},children:["Canvas - ",n==="homepage"?"Homepage":"Product Detail Page"]})}),o.jsx("div",{className:"panel-content",onDrop:Pe,onDragOver:b=>b.preventDefault(),onClick:be,children:o.jsxs(Gr,{sensors:ue,collisionDetection:tr,onDragStart:ie,onDragEnd:A,children:[o.jsx(wo,{items:Y.map(b=>b.id),strategy:bo,children:Y.length===0?o.jsxs("div",{style:{color:"#bbb",textAlign:"center",marginTop:80},children:["Drag components here to start building your ",n==="homepage"?"homepage":"product detail page","."]}):Y.map((b,P)=>o.jsx("div",{onClick:R=>{R.stopPropagation(),ne(b.id)},style:{outline:h===b.id?"2px solid #1976d2":void 0,borderRadius:8},children:o.jsx(Oo,{id:b.id,type:b.type,index:P})},b.id))}),o.jsx(go,{children:d?o.jsx("div",{style:{padding:16,background:"#e0f7fa",border:"1px solid #bbb",borderRadius:6,boxShadow:"0 2px 8px rgba(0,0,0,0.12)"},children:o.jsx("strong",{children:(Ie=Y.find(b=>b.id===d))==null?void 0:Ie.type})}):null})]})})]}),o.jsx("div",{className:"builder-panel",children:D?o.jsx("div",{className:"collapsed-bar",children:o.jsx("button",{className:"collapse-btn",title:"Expand",onClick:()=>S(!1),children:""})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"sticky-header",style:{display:"flex",alignItems:"center",marginBottom:8},children:[o.jsxs("h3",{style:{margin:0,fontSize:16,fontWeight:700,flex:1},children:["Property Editor - ",n==="homepage"?"Homepage":"Product Detail Page"]}),o.jsx("button",{className:"collapse-btn",title:"Collapse",onClick:()=>S(!0),children:""})]}),o.jsx("div",{className:"panel-content",children:h?o.jsx(Mo,{item:Y.find(b=>b.id===h),products:e,collections:t,onChange:b=>se(h,b)}):o.jsxs("div",{style:{color:"#bbb",textAlign:"center",marginTop:40,padding:"20px"},children:[o.jsx("p",{children:"Select a component from the canvas to edit its properties."}),o.jsx("p",{style:{fontSize:"12px",marginTop:"8px"},children:"Click on any component in the canvas area to select it."}),o.jsxs("p",{style:{fontSize:"12px",marginTop:"8px",color:"#999"},children:["Currently editing: ",n==="homepage"?"Homepage":"Product Detail Page"]})]})})]})}),o.jsxs("div",{className:"builder-preview",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"transparent"},children:[o.jsx("div",{className:"sticky-header",style:{marginBottom:8},children:o.jsxs("h3",{style:{margin:0,fontSize:16,fontWeight:700},children:["Preview - ",n==="homepage"?"Homepage":"Product Detail Page"]})}),o.jsx("div",{className:"panel-content",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",height:"100%"},children:o.jsx(Bo,{items:Y,products:e,collections:t,designType:n})})]})]})]})]})}export{$o as default};
