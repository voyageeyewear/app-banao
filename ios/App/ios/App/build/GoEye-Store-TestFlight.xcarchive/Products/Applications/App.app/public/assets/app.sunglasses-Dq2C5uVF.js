import{r as n,j as e}from"./index-Cd5tM5Cw.js";import{F as _,T as $,M as S,a as ee,b as M,S as O,C as se,c as te}from"./Toast-uop3fvrM.js";import{P as ae,I as c,B as u,d as ne,a as d,b as g,T as l}from"./Page-Bs3Yy5l8.js";import{T as oe,L as o}from"./TitleBar-BcpaBvsu.js";import{C as p}from"./Card-Vxxgx_Dr.js";import{F as w}from"./FormLayout-DnJHHvdP.js";import{S as ie}from"./Select-BoFAFRMh.js";import"./context-DL2GIqZU.js";import"./context-D8WZWu7V.js";const A=[{id:"men-sunglasses",name:"Men",image:"https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=200&h=200&fit=crop&crop=center&q=80"},{id:"women-sunglasses",name:"Women",image:"https://images.unsplash.com/photo-1508296695146-257a814070b4?w=200&h=200&fit=crop&crop=center&q=80"},{id:"kids-sunglasses",name:"Kids",image:"https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=200&h=200&fit=crop&crop=center&q=80"},{id:"essentials-sunglasses",name:"Essentials",image:"https://images.unsplash.com/photo-1583394838336-acd977736f90?w=200&h=200&fit=crop&crop=center&q=80"}],B=[{id:"sp1",brand:"Ray-Ban",price:"4500",offer:"Free case + Extra ₹500 Off",image:"https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=100&h=100&fit=crop&crop=center&q=80",category:"men-sunglasses"},{id:"sp2",brand:"Oakley",price:"3200",offer:"Free case + Extra ₹500 Off",image:"https://images.unsplash.com/photo-1508296695146-257a814070b4?w=100&h=100&fit=crop&crop=center&q=80",category:"men-sunglasses"},{id:"sp3",brand:"Vincent Chase",price:"2500",offer:"Free case + Extra ₹500 Off",image:"https://images.unsplash.com/photo-1508296695146-257a814070b4?w=100&h=100&fit=crop&crop=center&q=80",category:"women-sunglasses"},{id:"sp4",brand:"Lenskart Air",price:"2800",offer:"Free case + Extra ₹500 Off",image:"https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=100&h=100&fit=crop&crop=center&q=80",category:"women-sunglasses"},{id:"sp5",brand:"Kids Fun",price:"1800",offer:"Free case + Extra ₹400 Off",image:"https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=100&h=100&fit=crop&crop=center&q=80",category:"kids-sunglasses"},{id:"sp6",brand:"Junior Shades",price:"1500",offer:"Free case + Extra ₹400 Off",image:"https://images.unsplash.com/photo-1583394838336-acd977736f90?w=100&h=100&fit=crop&crop=center&q=80",category:"kids-sunglasses"},{id:"sp7",brand:"Budget Sunglasses",price:"1200",offer:"70% Off + Free case",image:"https://images.unsplash.com/photo-1583394838336-acd977736f90?w=100&h=100&fit=crop&crop=center&q=80",category:"essentials-sunglasses"},{id:"sp8",brand:"Summer Shades",price:"900",offer:"70% Off + Free case",image:"https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=100&h=100&fit=crop&crop=center&q=80",category:"essentials-sunglasses"}];function me(){const[f,v]=n.useState(A),[h,x]=n.useState(B),[E,P]=n.useState("Sunglasses"),[C,T]=n.useState(!0),[k,I]=n.useState(0),[i,j]=n.useState(null),[a,r]=n.useState(null),[L,b]=n.useState(!1),[D,m]=n.useState(!1),[N,y]=n.useState(!1),[R,F]=n.useState("");n.useEffect(()=>{W()},[]);const W=async()=>{try{const s=await fetch("/api/sunglasses-settings");if(s.ok){const t=await s.json();t.success&&t.data&&(v(t.data.categories||A),x(t.data.products||B),P(t.data.title||"Sunglasses"),T(t.data.enabled!==!1))}}catch(s){console.error("Error loading sunglasses settings:",s)}},z=async()=>{try{if((await fetch("/api/sunglasses-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:E,enabled:C,categories:f,products:h})})).ok)F("Sunglasses section settings saved successfully!"),y(!0);else throw new Error("Failed to save settings")}catch(s){console.error("Error saving sunglasses settings:",s),F("Error saving settings. Please try again."),y(!0)}},J=s=>{j(s),b(!0)},K=()=>{if(!i)return;const s=f.map(t=>t.id===i.id?i:t);v(s),b(!1),j(null)},U=s=>{r(s),m(!0)},V=s=>{const t={id:Date.now().toString(),brand:"New Brand",price:"2000",offer:"Free case + Special offer",image:"https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=100&h=100&fit=crop&crop=center&q=80",category:s};r(t),m(!0)},G=()=>{if(!a)return;const s=h.findIndex(t=>t.id===a.id);if(s>=0){const t=[...h];t[s]=a,x(t)}else x([...h,a]);m(!1),r(null)},H=s=>{x(h.filter(t=>t.id!==s))},q=()=>e.jsx(o,{children:e.jsx(o.Section,{children:e.jsx(p,{children:e.jsxs(g,{gap:"400",children:[e.jsxs(c,{align:"space-between",children:[e.jsx(l,{variant:"headingMd",as:"h2",children:"Categories"}),e.jsx(u,{disabled:!0,children:"Add Category"})]}),e.jsx(g,{gap:"300",children:f.map(s=>e.jsx(p,{padding:"300",children:e.jsxs(c,{align:"space-between",children:[e.jsxs(c,{gap:"300",children:[e.jsx(M,{source:s.image,alt:s.name,size:"small"}),e.jsxs(g,{gap:"100",children:[e.jsx(l,{variant:"bodyMd",fontWeight:"semibold",as:"p",children:s.name}),e.jsx(l,{variant:"bodySm",tone:"subdued",as:"p",children:"Category Image"})]})]}),e.jsx(u,{icon:O,onClick:()=>J(s),children:"Edit"})]})},s.id))})]})})})}),Q=()=>e.jsx(o,{children:e.jsx(o.Section,{children:f.map(s=>e.jsx(p,{padding:"400",children:e.jsxs(g,{gap:"400",children:[e.jsxs(c,{align:"space-between",children:[e.jsxs(l,{variant:"headingMd",as:"h2",children:[s.name," Products"]}),e.jsx(u,{onClick:()=>V(s.id),children:"Add Product"})]}),e.jsx(g,{gap:"300",children:h.filter(t=>t.category===s.id).map(t=>e.jsx(p,{padding:"300",children:e.jsxs(c,{align:"space-between",children:[e.jsxs(c,{gap:"300",children:[e.jsx(M,{source:t.image,alt:t.brand,size:"small"}),e.jsxs(g,{gap:"100",children:[e.jsx(l,{variant:"bodyMd",fontWeight:"semibold",as:"p",children:t.brand}),e.jsxs(l,{variant:"bodySm",tone:"subdued",as:"p",children:["₹",t.price]}),e.jsx(l,{variant:"bodySm",tone:"subdued",as:"p",children:t.offer})]})]}),e.jsxs(c,{gap:"200",children:[e.jsx(u,{icon:O,onClick:()=>U(t),children:"Edit"}),e.jsx(u,{icon:te,variant:"primary",tone:"critical",onClick:()=>H(t.id),children:"Delete"})]})]})},t.id))})]})},s.id))})}),X=()=>e.jsx(o,{children:e.jsx(o.Section,{children:e.jsx(p,{children:e.jsxs(g,{gap:"400",children:[e.jsx(l,{variant:"headingMd",as:"h2",children:"Section Settings"}),e.jsxs(w,{children:[e.jsx(d,{label:"Section Title",value:E,onChange:P,placeholder:"Enter section title",autoComplete:"off"}),e.jsx(se,{label:"Enable Sunglasses Section",checked:C,onChange:T})]})]})})})}),Y=[{id:"categories",content:"Categories"},{id:"products",content:"Products"},{id:"settings",content:"Settings"}],Z=()=>{switch(k){case 0:return q();case 1:return Q();case 2:return X();default:return q()}};return e.jsx(_,{children:e.jsxs(ae,{title:"Sunglasses Section",children:[e.jsx(oe,{title:"Sunglasses Section Management"}),e.jsxs(o,{children:[e.jsx(o.Section,{children:e.jsx(p,{children:e.jsx($,{tabs:Y,selected:k,onSelect:I})})}),e.jsx(o.Section,{children:Z()}),e.jsx(o.Section,{children:e.jsx(p,{children:e.jsxs(c,{align:"space-between",children:[e.jsx(u,{onClick:z,variant:"primary",children:"Save Settings"}),e.jsx(ne,{tone:"info",children:C?"Enabled":"Disabled"})]})})})]}),e.jsx(S,{open:L,onClose:()=>b(!1),title:"Edit Category",primaryAction:{content:"Save",onAction:K},secondaryActions:[{content:"Cancel",onAction:()=>b(!1)}],children:e.jsx(S.Section,{children:i&&e.jsxs(w,{children:[e.jsx(d,{label:"Category Name",value:i.name,onChange:s=>j({...i,name:s}),autoComplete:"off"}),e.jsx(d,{label:"Image URL",value:i.image,onChange:s=>j({...i,image:s}),autoComplete:"off"})]})})}),e.jsx(S,{open:D,onClose:()=>m(!1),title:"Edit Product",primaryAction:{content:"Save",onAction:G},secondaryActions:[{content:"Cancel",onAction:()=>m(!1)}],children:e.jsx(S.Section,{children:a&&e.jsxs(w,{children:[e.jsx(d,{label:"Brand Name",value:a.brand,onChange:s=>r({...a,brand:s}),autoComplete:"off"}),e.jsx(d,{label:"Price",value:a.price,onChange:s=>r({...a,price:s}),autoComplete:"off"}),e.jsx(d,{label:"Offer",value:a.offer,onChange:s=>r({...a,offer:s}),autoComplete:"off"}),e.jsx(d,{label:"Image URL",value:a.image,onChange:s=>r({...a,image:s}),autoComplete:"off"}),e.jsx(ie,{label:"Category",options:f.map(s=>({label:s.name,value:s.id})),value:a.category,onChange:s=>r({...a,category:s})})]})})}),N&&e.jsx(ee,{content:R,onDismiss:()=>y(!1)})]})})}export{me as default};
